<?xml version="1.0" encoding="UTF-8"?>
<Export generator="Cache" version="22" zv="CACHE" ts="2001-01-01 00:00:00">
<Routine name="INARTKILL" type="MAC" languagemode="0" timestamp="58440,0"><![CDATA[
INARTKILL(YKEY)
	;-------------------------------------------------------------------------------
	; Description of Function :
	;		LÖSCHEN ARTIKEL
	;
	; Inputs : 
	;
	;
	; ByRef :
	;
	;
	; Returns :
	;
	;
	; History :
	; 03-Nov-2010	shobby	SR17599:	Don't record an entry in INARTHIST
	; 07.04.2003	FAN
	;-------------------------------------------------------------------------------
	
	QUIT:$GET(YKEY)=""
	DO PRUEFUNG
	
	quit:Q=1
	;Q:'$D(^INART(YM,YKEY))
	
	DO ^WWWSKILL("INART",YKEY)  			;LÖSCHEN ARTIKEL ;Delete item 
	DO ^WWWSKILL("INARTA",YKEY)  			;LÖSCHEN ATERNATIV ARTIKEL ;Delete item 
	DO ^WWWSKILL("INARTK",YKEY)  			;LÖSCHEN ARTIKEL KONDITIONEN;TYBD;14,7,2004;26099
	DO ^WWWSKILL("INARTKONTRA",YKEY)		;LÖSCHEN UNERLAUBTE ZUSATZARTIKEL ;Delete 
	DO ^WWWSKILL("INARTR",YKEY)  			;LÖSCHEN RABATTSTAFFEL ;Delete 
	DO ^WWWSKILL("INARTLP",YKEY)  			;LÖSCHEN LAGERPLÄTZE ;Delete 
	DO ^WWWSKILL("INARTMAP",YKEY)  			;LÖSCHEN ARTIKELAUSWAHL NACH ZEICHNUNG ;Delete within drawing 
	DO ^WWWSKILL("INARTMAP1",YKEY)  		;LÖSCHEN MAP DER ARTIKELTEILE ;Delete the 
	DO ^WWWSKILL("INARTNEBEN",YKEY) 		;LÖSCHEN ENTSTEHUNGSPRODUKTE ;Delete 
	DO ^WWWSKILL("INARTPACK",YKEY)  		;LÖSCHEN PACKUNGSGROSSE ;Delete 
	DO ^WWWSKILL("INARTPREISE",YKEY)  		;LÖSCHEN BETRIEBSABHÄNGIGE PREISE ;Delete 
	DO ^WWWSKILL("INARTPREISEBE",YKEY)  	;LÖSCHEN BETRIEBSABHÄNGIGE PREISE ;Delete 
	DO ^WWWSKILL("INARTPREISEBE1",YKEY)  	;LÖSCHEN BETRIEBSABHÄNGIGE PREISE ;Delete 
	DO ^WWWSKILL("INARTPREISEBETIME",YKEY)  ;LÖSCHEN BETRIEBSABHÄNGIGE PREISE SONDERAKTION ;Delete 
	DO ^WWWSKILL("INARTR",YKEY)  			;LÖSCHEN RABATTSTAFFEL ;Delete 
	DO ^WWWSKILL("INARTSP",YKEY) 			;LÖSCHEN TEILESPRACHENTEXTE ;Delete 
	DO ^WWWSKILL("INARTT",YKEY)  			;LÖSCHEN TEILE ;Delete 
	DO ^WWWSKILL("INARTT1",YKEY)  			;LÖSCHEN ZWISCHENDATEI ;Delete 
	DO ^WWWSKILL("INARTTV",YKEY)  			;LÖSCHEN ARTIKELSTÜCKLISTE GÜLTIG AB ;Delete valuable Confirm. 
	DO ^WWWSKILL("INARTTV1",YKEY)  			;LÖSCHEN ZWISCHENDATEI ;Delete 
	DO ^WWWSKILL("INARTTZW",YKEY)  			;LÖSCHEN ZWISCHENDATEI ;Delete 
	DO ^WWWSKILL("INARTXL",YKEY)  			;LÖSCHEN TEILESTRUKTUR ;Delete 
	DO ^WWWSKILL("INARTZUS",YKEY)  			;LÖSCHEN VERKAUFS-ZUSATZUARTIKEL ;Delete 
	DO ^WWWSKILL("INARTZUS1",YKEY) 			;LÖSCHEN ZUSATZARTIKEL VERKAUFSSTAFFEL ;Delete 
	DO ^WWWSKILL("INARTAVG",YKEY)  			;LÖSCHEN DRUCHSCHNITT ;Delete 
	DO ^WWWSKILL("INARTXCH",YKEY)  			;ALTERNATIVER NAME
	DO ^WWWSKILL("INARTWAEHRUNG",YKEY)  	;FREMDWAEHRUNGEN
	DO ^WWWSKILL("INARTZUSATZ",YKEY)  		;LÖSCHEN ZUSATZARTIKEL BETRIEBSABHÄNGIGE PREISE ;Delete 
	
	DO  									;TYBD;14,7,2004;26099;LOESCHEN WENN ARTIKEL IN UNTERTEIL IST
	. NEW ART,TEIL,KEY1
	. SET ART=""
	. FOR  SET ART=$ORDER(^INARTTs(YM,1,$$^WWWUMLAU(YKEY),ART)) QUIT:ART=""  DO
	. . SET TEIL=""
	. . FOR  SET TEIL=$ORDER(^INARTTs(YM,1,$$^WWWUMLAU(YKEY),ART,TEIL)) QUIT:TEIL=""  DO
	. . . SET KEY1=ART_","_TEIL
	. . . DO ^WWWSKILL("INARTT",KEY1)
	
	;SR17599 DO ^INARTHIST(YKEY,$$^WWWTEXT(32024)_" "_$$^WWWTEXT(42))  ;ARTIKEL GELÖSCHT ;item 
	QUIT
	
PRUEFUNG    ;AUCH AUS ^INARTCOPY;FAN
	SET Q=0
	QUIT:$GET(YKEY)=""
	IF +$TRANSLATE($$^INARTAUF(YKEY),"/")'=0 SET Q=1  ; MENGE VORHANDEN    ;quantity on hand 
	IF +$$^INARTMENGE(YKEY)'=0 SET Q=1                ; AUFRTÄGE VORHANDEN ; orders on hand 
	;IF Q=1 DO ^WWWINFO($$^WWWTEXT(32528),1)          ; NICHT GELÖSCHT, DA AUFTRÄGE
	QUIT
	
]]></Routine>
</Export>