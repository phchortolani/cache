<?xml version="1.0" encoding="UTF-8"?>
<Export generator="Cache" version="22" zv="CACHE" ts="2001-01-01 00:00:00">
<Routine name="INARTT2" type="MAC" languagemode="0" timestamp="58440,0"><![CDATA[
INARTT2 ;INARTT2;DT;ANZEIGE ARTIKEL AUSWAHL FÜR TEILE/ SPEICHERN NEUE TEILE/EDIT TEILE;8.02.2000  ; Compiled March 15, 2005 20:49:51
#include COMSYS
#include INConst
#define  UNITEach 1
	;-------------------------------------------------------------------------------
	; Description of Function :
	;		ANZEIGE ARTIKEL AUSWAHL FÜR TEILE/ SPEICHERN NEUE TEILE/EDIT TEILE
	;		ANZEIGE DER ARTIKEL ZUR AUSWAHL ;Show the item Selection 
	;
	;	DIE AUSWAHL DES ARTIKELS ERFOLGT, WENN EINE MENGE EINGETRAGEN WIRD
	;
	;	WENN EINE MENGE AUSGEWÄHLT WURDE SPEICHERN DER ARTIKEL IN EINER TEILEPOSITION
	;	when one quantity select were Save the item within unit 
	;
	; Inputs : 
	;	YKEY	(passed into YARTIKEL to preserve YKEY)
	;
	; ByRef :
	;
	; Called By : Form INARTT1 (Parts List for Item Masterfile - AfterData)
	;
	; Returns :
	;
	;
	; History :
	; 21-Sep-2006	FAN		SR14746 Sales statistics incorrect
	; 29-May-2006	GRF		Doco; dot level
	; 04-Aug-2005	GRF		SR13142 : doco; Macros
	; 24-Jul-2005	GRF		SR13024 : doco
	; 13-Jul-2005	GRF		SR12863 : doco
	; DT	8.02.2000  
	;-------------------------------------------------------------------------------
	new ANZM,ART,ART1,ARTIKEL,AUF,AUFMG,MULTIPLE,MENGE,NAME,objProduct,Q
	new SUCH,YARTIKEL,YARTIKEL1,YFKEY,YMNG,YSTD,YTEIL,YTEIL1,YTEILP,YVOR
	
	SET %("VAR","YKEY")=YKEY
	SET YARTIKEL=$PIECE(YKEY,",",1)
	QUIT:YARTIKEL=""  ;KEIN ARTIKEL ;no item 
	
	NEW YKEY
	
	; ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
	; Data Records :
	;   ART1			objINART			Item Masterfile (Component)
	;	YARTIKEL1		objINART			Item Masterfile (Parent Item)
	;	YTEIL1          objINARTT			Modify Item Parts  (?)
	; ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
	
	SET YARTIKEL1=$GET(^INART(YM,YARTIKEL,1))
	
	IF $$$INARTItemType(YARTIKEL1)=6 DO  QUIT   ;KEINE TEILE ;no 
	. WRITE "<A onClick='return doLink(this)' HREF=""JavaScript:window.history.back();"">"_$$^WWWTEXT(99)_"</A>"	//SR13195
	. WRITE YCR,"<BR><BR>"_$$$AppEnum("ARTIKEL-ART",$$$INARTItemType(YARTIKEL1))_" "_$$^WWWTEXT(32112,,1)  ;ARTIKELART NICHT MÖGLICH ;"! No Item Level For This Item Type !" 
	. WRITE YCR,"<BR>"
	
	;IF $PIECE(YARTIKEL1,Y,40)=2!($PIECE(YARTIKEL1,Y,40)=3)!($PIECE(YARTIKEL1,Y,40)=4)!($PIECE(YARTIKEL1,Y,40)=5)!($PIECE(YARTIKEL1,Y,40)=10)!($PIECE(YARTIKEL1,Y,40)=11) DO  QUIT   ;KEINE TEILE
	;IF $PIECE(YARTIKEL1,Y,40)=3!($PIECE(YARTIKEL1,Y,40)=4)!($PIECE(YARTIKEL1,Y,40)=5)!($PIECE(YARTIKEL1,Y,40)=10)!($PIECE(YARTIKEL1,Y,40)=11) DO  QUIT   ;KEINE TEILE
	;.W "<A HREF=""JavaScript:window.history.back();"">"_$$^WWWTEXT(99)_"</A>"
	;.WRITE YCR,"<BR><BR>"_$PIECE($GET(^WWW101(0,"EINHEIT",SPRACHE,$PIECE(YARTIKEL1,Y,40),1)),Y,1)_" "_$$^WWWTEXT(32119,,1)  ;ARTIKELART NICHT MÖGLICH
	;.WRITE YCR,"<BR>"
	
	KILL ^INARTT1(YM)  ;LOSCHEN MÖGLICHER WERTE
	KILL ^WWWDATEN(YM,+$HOROLOG,YUSER,YFORM,"LOCK",1)
	DO NEU
	DO SUCH
	SET YKEY=YARTIKEL
 
	;-------------------------------------------------------------------------------
	;  18 columns displayed in table via routine INARTT
	;  
	;  Delete             SubAssy       P          P-Position No   Z        Sub Number
	;  Item Number        Description   Quantity   Unit            Weight   Duration
	;  Preparation Time   Value         Length     Width           Height   Scrap In %
	;-------------------------------------------------------------------------------
	
	DO ^INARTT  ;TABELLE DER TEILE ANZEIGEN ;display the table
	
	DO   ;ANZEIGE DER BYPRODUCTS ;Show the byproducts
	. QUIT:'$DATA(^INARTNEBEN(YM,YARTIKEL))  ;KEIN BYPRODUKT ;no byproducts
	. NEW ART
	. SET ART=""
	. FOR  SET ART=$ORDER(^INARTNEBEN(YM,YARTIKEL,ART)) QUIT:ART=""  DO
	. . set objProduct=$GET(^INART(YM,ART,1))
	. . WRITE "<FONT SIZE=2>"
	. . WRITE "By Product: "                                                     ;BYPRODUCT     ; TODO $$^WWWTEXT()
	. . WRITE $PIECE($GET(^INARTNEBEN(YM,YARTIKEL,ART,1)),Y,1)_" " DO
	. . . IF $$$INARTUnitofMeasure(objProduct)'="" DO
	. . . . WRITE $$$AppEnum("EINHEIT",$$$INARTUnitofMeasure(objProduct))
	. . . . WRITE " "
	. . ;
	. . WRITE " ("_ART_") "_$$$INARTSearchName($GET(^INART(YM,ART,1)))_" "
	. . WRITE " per "                                                                           ; TODO $$^WWWTEXT()
	. . WRITE $PIECE($GET(^INARTNEBEN(YM,YARTIKEL,ART,1)),Y,2)_" "
	. . DO
	. . . IF $PIECE($GET(^INART(YM,YARTIKEL,1)),Y,40)'="" DO
	. . . . WRITE $PIECE($get(^WWW101(0,"EINHEIT",SPRACHE,$PIECE($GET(^INART(YM,YARTIKEL,1)),Y,40),1)),Y,1)
	. . . . WRITE " "
	. . ;
	. . WRITE "<BR>",YCR
	. WRITE YCR
	
	QUIT
	
NEU
	;-------------------------------------------------------------------------------
	;NEUE POSITION  
	;
	; History:
	; 05-Feb-2008	GRF		SR15627: Call MasterfileChanged to use $$$Save
	;-------------------------------------------------------------------------------
	
	;ARTIKELAUSWAHL / ANLEGEN DER POSITIONEN ;put onto the 
	IF $GET(%(YQUERY,"ITEMS"))'="" DO  ;SONDERFELDER AUS WWW2 ;out of 
	. SET %(YQUERY,"YMNG"_$GET(%(YQUERY,"ITEMS")))=$GET(%(YQUERY,"ITEMSQ"))
	. SET %(YQUERY,"YMUL"_$GET(%(YQUERY,"ITEMS")))=$GET(%(YQUERY,"ITEMMULN"))
	. SET %(YQUERY,"YBEN"_$GET(%(YQUERY,"ITEMS")))=$GET(%(YQUERY,"ITEMBENN"))
	. SET %(YQUERY,"YBRT"_$GET(%(YQUERY,"ITEMS")))=$GET(%(YQUERY,"ITEMBRTN"))
	. SET %(YQUERY,"YLNG"_$GET(%(YQUERY,"ITEMS")))=$GET(%(YQUERY,"ITEMLNGN"))
	. SET %(YQUERY,"YHOE"_$GET(%(YQUERY,"ITEMS")))=$GET(%(YQUERY,"ITEMHOEN"))
	
	SET YMNG="YMNG"
	FOR  SET YMNG=$ORDER(%(YQUERY,YMNG)) QUIT:$EXTRACT(YMNG,1,4)'="YMNG"  DO    ;ALLE MENGENFELDER LESEN ;read 
	. NEW YFORM,YEINHEIT,YTEILP,ME
	. SET YFORM="INARTT"  ;POSITIONEN
	. QUIT:$GET(%(YQUERY,YMNG))=""   ;KEINE MENGE EINGETRAGEN ;no quantity regd. 
	. ;
	. SET YTEIL=$ORDER(^INARTT(YM,YARTIKEL,""),-1)+1   ;NÄCHSTE POSITIONSNUMMER  ;next 
	. SET ART  =$EXTRACT(YMNG,5,99)  ;ARTIKELNUMMER BESTANDTEIL DER YMNG VARIABEL ;ingredient the 
	. ;PRUEFEN FALSCHE POSITION (DOPPEL SAVE)
	. SET YTEILP=$ORDER(^INARTT(YM,YARTIKEL,YTEIL),-1)
	. SET Q=0
	. IF YTEILP'="" DO
	. . NEW TIME,YTEILPP
	. . SET TIME   =$PIECE($GET(^INARTT(YM,YARTIKEL,YTEILP,1)),Y,22)    ;ERFASSUNGSDATUM
	. . SET YTEILPP=$PIECE($GET(^INARTT(YM,YARTIKEL,YTEILP,1)),Y,1)     ;ARTIKEL ;item 
	. . IF YTEILPP'=ART QUIT  ;NICHT GLEICHER ARTIKEL ;Not same item 
	. . ;
	. . IF +TIME=+$HOROLOG DO
	. . . IF ($PIECE(TIME,",",2)+5)>$PIECE($HOROLOG,",",2) SET Q=1  ;DOPPELSAVE FALSCH ;wrong 
	. ;
	. QUIT:Q=1
	. ;
	. ;ZUSAMMENSTELLEN NEUES TEIL ;organise new parts 
	. ;SET MENGE=$TRANSLATE($GET(%(YQUERY,YMNG)),",",".")
	. SET MENGE=$$^WWWTR(1,8,$GET(%(YQUERY,YMNG)))  ;TYBD;3,8,2004;MENGE;26151
	. QUIT:+MENGE=0
	. QUIT:ART=""
	. QUIT:'$DATA(^INART(YM,ART,1))  ;ARTIKEL NICHT VORHANDEN ;item Not on hand 
	. ;
	. SET YARTIKEL1 = $GET(^INART(YM,ART,1))  ;ARTIKELDATEN
	. SET ME        = $$$INARTUnitofMeasure(YARTIKEL1)
	. IF MENGE<0 IF ($$$INARTItemType(YARTIKEL1)=2)||(ME=2)||(ME=10)||(ME=11)||(ME=15)||(ME=16)||(ME=17) QUIT  ;KEINE NEGATIVEN LEISTUNGEN;FIS;2289112.12.03 ;no LEISTUNGEN 
	. ;
	. SET $PIECE(^INVORG(YM,YM,1),Y,121)=""  ;ACHTUNG ARTIKEL HABEN SICH VERÄNDERT ;estimation item have got yourself 
	. ;
	. SET YTEIL1=""   ;ZUSAMMENSTELLEN DATENTEIL1
	. SET $PIECE(YTEIL1,Y,4)=+MENGE
	. SET $PIECE(YTEIL1,Y,1)=ART                                                ;NEUE TEILEARTIKELNUMMER
	. SET $PIECE(YTEIL1,Y,3)=$PIECE(YARTIKEL1,Y,1)                              ;BESCHREIBUNG ;description 
	. SET $PIECE(YTEIL1,Y,5)=+$PIECE(YARTIKEL1,Y,40)                            ;EINHEIT      ;unit 
	. IF +$PIECE(YTEIL1,Y,5)=0 SET $PIECE(YTEIL1,Y,5)=1
	. SET YEINHEIT=$PIECE(YTEIL1,Y,5)
	. IF YEINHEIT'=11 IF YEINHEIT'=2 IF YEINHEIT'=10 SET $PIECE(YTEIL1,Y,7)=($$^INARTDAUER(ART)*MENGE)  ;RUEST +(MENGE * DAUER)
	. ;SET $PIECE(YTEIL1,Y,15)=+$TRANSLATE($GET(%(YQUERY,"YLNG"_ART)),",",".")  ;LÄNGE
	. ;SET $PIECE(YTEIL1,Y,16)=+$TRANSLATE($GET(%(YQUERY,"YBRT"_ART)),",",".")  ;BREITE
	. ;SET $PIECE(YTEIL1,Y,17)=+$TRANSLATE($GET(%(YQUERY,"YHOE"_ART)),",",".")  ;HOEHE
	. SET $PIECE(YTEIL1,Y,15)=$$^WWWTR(1,8,$GET(%(YQUERY,"YLNG"_ART)))          ;LÄNGE     ; length    ;26151;TYBD;23,7,2004
	. SET $PIECE(YTEIL1,Y,16)=$$^WWWTR(1,8,$GET(%(YQUERY,"YBRT"_ART)))          ;BREITE    ; breadth   ;26151;TYBD;23,7,2004
	. SET $PIECE(YTEIL1,Y,17)=$$^WWWTR(1,8,$GET(%(YQUERY,"YHOE"_ART)))          ;HOEHE     ; height    ;26151;TYBD;23,7,2004
	. SET $PIECE(YTEIL1,Y,30)=$GET(%(YQUERY,"YBEN"_ART))                        ;BENENNUNG ; description
	. SET MULTIPLE=+$GET(%(YQUERY,"YMUL"_ART))                                  ;ANZAHL DER TEILE ;Number of Part 
	. SET $PIECE(YTEIL1,Y,6)=$$^INGEWICHTT(ART,MENGE,$PIECE(YTEIL1,Y,15),$PIECE(YTEIL1,Y,16),$PIECE(YTEIL1,Y,17))  ;MENGE*GEWICHT
	. SET $PIECE(YTEIL1,Y,251)=$PIECE(YARTIKEL1,Y,251)  ;MASCHINENSTUNDENSATZ KOPIEREN ;machine hour rate 
	. SET $PIECE(YTEIL1,Y,252)=$PIECE(YARTIKEL1,Y,252)  ;BEDIENERSTUNDENSATZ KOPIEREN
	. ;
	. ;ZEICHNUNGSNUMMER WENN KEINE DAUER ;when no permanence 
	. SET YTEILP=YTEIL
	. IF YTEILP'="" DO
	. . NEW YTEILP1,YBIG
	. . ;QUIT:$ORDER(^INARTT(YM,YARTIKEL,""),-1)=""
	. . SET YBIG=""
	. . SET YTEILP1=""
	. . FOR  SET YTEILP1=$ORDER(^INARTT(YM,YARTIKEL,YTEILP1),-1) QUIT:YTEILP1=""  DO 
	. . . IF $PIECE($GET(^INARTT(YM,YARTIKEL,YTEILP1,1)),Y,18)>YBIG SET YBIG=$PIECE($GET(^INARTT(YM,YARTIKEL,YTEILP1,1)),Y,18)
	. . ;
	. . SET YTEILP=YBIG+1
	. ;
	. IF (YEINHEIT=2) || (YEINHEIT=10) || (YEINHEIT=11) SET YTEILP=""
	. SET $PIECE(YTEIL1,Y,18)=YTEILP
	. ;
	. IF YEINHEIT=2 DO  ;STUNDEN = DAUER ;hours 
	. . NEW YSTD
	. . SET YSTD=$GET(%(YQUERY,YMNG))
	. . SET $PIECE(YTEIL1,Y,4)=""                        ;LÖSCHEN MENGE ;Delete quantity
	. . IF $FIND(YSTD,":") SET $PIECE(YTEIL1,Y,7)=($PIECE(YSTD,":",1)*60*60)+($PIECE(YSTD,":",2)*60)+$PIECE(YSTD,":",3) SET YSTD=""  ;STUNDEN MINUTEN SEKUNDEN ;procrastinate 
	. . IF $FIND(YSTD,",") SET $PIECE(YTEIL1,Y,7)=($PIECE(YSTD,",",1)*60*60)+(60*60*("."_$PIECE(YSTD,",",2))) SET YSTD=""  ;STUNDEN MIT KOMMA ;procrastinate by means of comma 
	. . IF $FIND(YSTD,".") SET $PIECE(YTEIL1,Y,7)=($PIECE(YSTD,".",1)*60*60)+(60*60*("."_$PIECE(YSTD,".",2))) SET YSTD=""  ;STUNDEN MIT PUNKT ;procrastinate by means of point 
	. . IF +YSTD'=0 SET $PIECE(YTEIL1,Y,7)=(YSTD*60*60)  ;VOLLE STUNDEN  ;hours
	. ;
	. IF YEINHEIT=10 DO  ;MINUTEN = DAUER ;Minutes 
	. . NEW YSTD
	. . SET YSTD=$GET(%(YQUERY,YMNG))
	. . SET $PIECE(YTEIL1,Y,4)=""                     ;LÖSCHEN MENGE ;Delete quantity 
	. . IF $FIND(YSTD,":") SET $PIECE(YTEIL1,Y,7)=($PIECE(YSTD,":",1)*60*60)+($PIECE(YSTD,":",2)*60)+$PIECE(YSTD,":",3) SET YSTD="" ;STUNDEN MINUTEN SEKUNDEN ;procrastinate 
	. . IF $FIND(YSTD,",") SET $PIECE(YTEIL1,Y,7)=($PIECE(YSTD,",",1)*60)+(60*("."_$PIECE(YSTD,",",2))) SET YSTD=""  ;MINUTEN MIT KOMMA ;by means of comma 
	. . IF $FIND(YSTD,".") SET $PIECE(YTEIL1,Y,7)=($PIECE(YSTD,".",1)*60)+(60*("."_$PIECE(YSTD,".",2))) SET YSTD=""  ;MINUTEN MIT PUNKT ;by means of point 
	. . IF +YSTD'=0 SET $PIECE(YTEIL1,Y,7)=(YSTD*60)  ;VOLLE MINUTEN 
	. ;
	. IF YEINHEIT=11 DO  ;INDUSTRIE MINUTEN = DAUER ;industry minutes
	. . NEW YSTD
	. . SET YSTD=$GET(%(YQUERY,YMNG))
	. . SET $PIECE(YTEIL1,Y,4)=""                            ;LÖSCHEN MENGE ;Delete quantity 
	. . IF +YSTD'=0 SET $PIECE(YTEIL1,Y,7)=(YSTD*60/100*60)  ;VOLLE INDUSTIEMINUTEN 
	. ;
	. ;SAVE DAUER OHNE RUEST   FÜR NACHRECHNUNGEN ;permanence without to 
	. IF +$PIECE(YTEIL1,Y,7)'=0 SET $PIECE(YTEIL1,Y,9)=$PIECE(YTEIL1,Y,7)   ;-$$^INARTRUEST(ART)
	. SET $PIECE(YTEIL1,Y,70)=$$^INARTRUEST(ART)*$$^INPROLOS(ART,MENGE)
	. ;
	. IF $DATA(^INARTT(YM,ART)) SET $PIECE(YTEIL1,Y,7)=$$^INARTDAUERT(ART,$PIECE(YTEIL1,Y,4))   ;ERRECHNEN DAUER AUS TEILEN * MENGE ;permanence out of quantity 
	. IF $DATA(^INARTT(YM,ART)) SET $PIECE(YTEIL1,Y,6)=$$^INGEWICHTT(ART,$PIECE(YTEIL1,Y,4),$PIECE(YTEIL1,Y,15),$PIECE(YTEIL1,Y,16),$PIECE(YTEIL1,Y,17))  ;GEWICHT AUS TEILEN * MENGE ;wt. out of quantity 
	. IF +$PIECE(YTEIL1,Y,6)=0 SET $PIECE(YTEIL1,Y,6)=""  ;GEWICHT ;wt. 
	. SET $PIECE(YTEIL1,Y,8)=$$^INARTKOSTT(ART,$PIECE(YTEIL1,Y,4),$PIECE(YTEIL1,Y,7),$PIECE(YTEIL,Y,6))  ;PREISERRECHNEN INKL VERSCHNITT
	. ;
	. IF $PIECE(YTEIL1,Y,5)'=2 IF $PIECE(YTEIL1,Y,5)'=11 IF $PIECE(YTEIL1,Y,5)'=10 SET $PIECE(YTEIL1,Y,7)="",$PIECE(YTEIL1,Y,9)=""  ;DAUER LÖSCHEN WENN KEINE ZEIT ;permanence Delete when no time 
	. IF +$PIECE(YTEIL1,Y,6)=0 SET $PIECE(YTEIL1,Y,6)=""  ;GEWICHT=""
	. SET $PIECE(YTEIL1,Y,22)=$HOROLOG                    ;ERFASST
	. SET $PIECE(YTEIL1,Y,23)=YBED                        ;ERFASST
	. IF +$PIECE(YTEIL1,Y,5)=0 SET $PIECE(YTEIL1,Y,5)=1
	. ;
	. DO
	. . NEW YVOR,YVORG,YVORG1,YFORM   ;YVOR; TYBD;6,2,2004
	. . SET YFORM="INARTT"
	. . SET YOK=$$^WWWSPEI("INARTT",YARTIKEL_","_YTEIL,YTEIL1,1)                    ;SPEICHERN ARTIKELTEIL ;Save 
	. . IF $GET(MULTIPLE)>1 SET:MULTIPLE>300 MULTIPLE=300 FOR YMULTI=2:1:MULTIPLE DO  ;ANLAGE VON MEHREREN MENGEN ;layout shuffle 
	. . . SET YTEIL=$ORDER(^INARTT(YM,YARTIKEL,""),-1)+1                            ;NÄCHSTE POSITIONSNUMMER ;next 
	. . . SET YOK=$$^WWWSPEI("INARTT",YARTIKEL_","_YTEIL,YTEIL1,1)                  ;SPEICHERN ARTIKELTEIL  ;Save 
	. ;
	. ;SPEICHERN ÄNDERUNGSMITARBEITER ;Save 
	. ;SET $PIECE(^INART(YM,YARTIKEL,1),Y,24)=$HOROLOG    ; SR15627 vvv 3 lines
	. ;SET $PIECE(^INART(YM,YARTIKEL,1),Y,25)=YBED
	. set strStatus = $$MasterfileChanged^INARTMaster(YARTIKEL,YBED)
	. ;
	. QUIT:+$GET(YOPTION)=1  ;KEIN NEUAUBAU DER DATEN ;no the 
	. DO ^INARTNEU(YARTIKEL)  ;NEUAUFBAU DER TEILE ;the 
	. ;SET $PIECE(^INART(YM,YARTIKEL,1),Y,47)=$$^INARTKOST(YARTIKEL,1)  ;// SR14746 ;NEUER SELBSTKOSTENPREIS
	. DO
	. . NEW SATZ
	. . SET SATZ=$GET(^INART(YM,YARTIKEL,1))
	. . SET $PIECE(SATZ,Y,47)=$$^INARTKOST(YARTIKEL,1)  ;// SR14746 ;NEUER SELBSTKOSTENPREIS
	. . set strStatus=$$$Save("INART",YARTIKEL,SATZ,$$$YES) // SR14746
	. ;
	. DO ^INARTXL(YARTIKEL)  ;NEUAUFBAU DER TEILESTRUKTUR ;the 
	. SET ARTIKEL=""
	. FOR  SET ARTIKEL=$ORDER(^INARTTs(YM,1,$$^WWWUMLAU(YARTIKEL,1),ARTIKEL)) QUIT:ARTIKEL=""  DO ^INARTXL(ARTIKEL)
	
	QUIT
 
	;+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
	;						YEINHEIT
	;	 1	Each				:	12	m³
	;	 2	Hours				:	13	Pair
	;	 3	Litre	(Gallon)	:	14	Grams	(Ounce)
	;	 4	Kg		(Pair)		:	15	Days
	;	 5	Metre	(Box)		:	16	Weeks
	;	 6	m²		(Pack)		:	17	Month
	;	 7	set?	(Litre)		:	18	mm		(Inches)
	;	 						:	19	km		(Miles)
	;	 9	Package				:	20	mm²		(Sq.Inches)
	;	10	Minutes				:	21	mg
	;	11	Industry-Minutes	:	22	/100
	;+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
	
EDIT
	;-------------------------------------------------------------------------------
	;EDITIEREN BESTEHENDER DATENSATZ   AUFRUF AUS FORMAULARSTPEICHERUNG  ;data record out of 
	;
	; History :
	; 05-Feb-2008	GRF		SR15627: Call MasterfileChanged to use $$$Save
	; 17-May-2006	GRF		Dot level
	; 02-Aug-2005	GRF		SR13142 : doco; !=>||
	;-------------------------------------------------------------------------------
	
	;MENGENÄNDERUNG DER POSITIONEN 
	SET YARTIKEL = $PIECE(YKEY,",",1)			QUIT:YARTIKEL=""
	SET YTEIL    = $PIECE(YKEY,",",2)			QUIT:YTEIL=""
	QUIT:$GET(YFELD)=""  ;KEIN DATENSATZ VORHANDEN ;no data record on hand 
	
	DO
	. NEW YFORM
	. SET YFORM	   = "INARTT"            ;POSITIONEN
	. SET YTEIL1   = YFELD               ;ZUSAMMENSTELLEN DATEN TEIL1
	. SET YEINHEIT = $PIECE(YTEIL1,Y,5)
	. SET MENGE	   = $PIECE(YFELD,Y,4)
	. IF YEINHEIT'=10 QUIT:+MENGE=0      ;0 MENGE SOLL GEHEN 
	. IF YEINHEIT=10  QUIT:MENGE=""      ;0 MENGE SOLL GEHEN
	. IF (YEINHEIT=2)||(YEINHEIT=10)||(YEINHEIT=11)||(YEINHEIT=15)||(YEINHEIT=16)||(YEINHEIT=17) SET:MENGE<0 MENGE=-MENGE  ;KEINE NEGATIVE ZEIT;FIS;22891;12.12.03
	. SET ART=$PIECE(YFELD,Y,1)
	. QUIT:ART=""
	. QUIT:'$DATA(^INART(YM,ART,1))      ;ARTIKEL NICHT VORHANDEN ;item Not on hand 
	. ;
	. SET YARTIKEL1=$GET(^INART(YM,ART,1))  ;ARTIKELDATEN
	. SET $PIECE(YTEIL1,Y,3) = $PIECE(YARTIKEL1,Y,1)   ;BESCHREIBUNG AKTUELL ;description up-to-date 
	. SET $PIECE(YTEIL1,Y,5) =+$PIECE(YARTIKEL1,Y,40)  ;EINHEIT AKTUELL ;unit up-to-date 
	. IF (YEINHEIT'=11) && (YEINHEIT'=2) && (YEINHEIT'=10) SET $PIECE(YTEIL1,Y,7)=$$^INARTRUEST(ART)+($$^INARTDAUER(ART)*MENGE)   ;RUEST+(MENGE * DAUER)
	. SET $PIECE(YTEIL1,Y,6)=$$^INGEWICHT(ART)*MENGE  ;MENGE*GEWICHT
	. ;
	. ; STUNDEN = DAUER ; Hours
	. ;-------------------------------------
	. IF YEINHEIT=2 DO
	. . NEW YSTD
	. . SET YSTD=MENGE
	. . SET $PIECE(YTEIL1,Y,4)=""  ;LÖSCHEN MENGE ;Delete quantity 
	. . IF $FIND(YSTD,":") SET $PIECE(YTEIL1,Y,7)=+($PIECE(YSTD,":",1)*60*60)+($PIECE(YSTD,":",2)*60)+$PIECE(YSTD,":",3) SET YSTD="" ;STUNDEN MINUTEN SEKUNDEN ;procrastinate 
	. . IF $FIND(YSTD,",") SET $PIECE(YTEIL1,Y,7)=+($PIECE(YSTD,",",1)*60*60)+(60*60*("."_$PIECE(YSTD,",",2))) SET YSTD=""  ;STUNDEN MIT KOMMA ;procrastinate by means of comma 
	. . IF $FIND(YSTD,".") SET $PIECE(YTEIL1,Y,7)=+($PIECE(YSTD,".",1)*60*60)+(60*60*("."_$PIECE(YSTD,".",2))) SET YSTD=""  ;STUNDEN MIT PUNKT ;procrastinate by means of point 
	. .;IF +YSTD'=0 SET $PIECE(YTEIL1,Y,7)=+(YSTD*60*60)  ;VOLLE STUNDEN 
	. . IF +YSTD'=0 SET $PIECE(YTEIL1,Y,7)=+(YSTD*60*60)  ;VOLLE STUNDEN  ;hours 
	. ;
	. ;MINUTEN = DAUER ; Minutes
	. ;-------------------------------------
	. IF YEINHEIT=10 DO
	. . NEW YSTD
	. . SET YSTD=MENGE
	. . SET $PIECE(YTEIL1,Y,4)=""  ;LÖSCHEN MENGE ;Delete quantity 
	. . IF $FIND(YSTD,":") SET $PIECE(YTEIL1,Y,7)=+($PIECE(YSTD,":",1)*60*60)+($PIECE(YSTD,":",2)*60)+$PIECE(YSTD,":",3) SET YSTD="" ;STUNDEN MINUTEN SEKUNDEN ;procrastinate 
	. . IF $FIND(YSTD,",") SET $PIECE(YTEIL1,Y,7)=+($PIECE(YSTD,",",1)*60)+(60*("."_$PIECE(YSTD,",",2))) SET YSTD=""  ;MINUTEN MIT KOMMA ;by means of comma 
	. . IF $FIND(YSTD,".") SET $PIECE(YTEIL1,Y,7)=+($PIECE(YSTD,".",1)*60)+(60*("."_$PIECE(YSTD,".",2))) SET YSTD=""  ;MINUTEN MIT PUNKT ;by means of point 
	. . IF +YSTD'=0 SET $PIECE(YTEIL1,Y,7)=+(YSTD*60)  ;VOLLE MINUTEN 
	. . IF MENGE=0  SET $PIECE(YTEIL1,Y,7)=0,$PIECE(YTEIL1,Y,9)=0   ;0 MENGE ;quantity 
	. ;
	. ;INDUSTRIE MINUTEN = DAUER ; industry minutes (100 sec)
	. ;-------------------------------------
	. IF YEINHEIT=11 DO
	. . NEW YSTD
	. . SET YSTD=MENGE
	. . SET $PIECE(YTEIL1,Y,4)=""  ;LÖSCHEN MENGE ;Delete quantity 
	. . IF +YSTD'=0 SET $PIECE(YTEIL1,Y,7)=+(YSTD*60/100*60)  ;VOLLE INDUSTIEMINUTEN 
	. ;-------------------------------------
	. ;
	. ;SAVE DAUER OHNE RUEST   FÜR NACHRECHNUNGEN ;permanence without to 
	. IF +$PIECE(YTEIL1,Y,7)'=0 SET $PIECE(YTEIL1,Y,9) =$PIECE(YTEIL1,Y,7)   ;-$$^INARTRUEST(ART)
	. IF $PIECE(YTEIL1,Y,70)="" SET $PIECE(YTEIL1,Y,70)=$$^INARTRUEST(ART)*$$^INPROLOS(ART,MENGE)
	. IF +MENGE=0 SET $PIECE(YTEIL1,Y,70)="" ;KEINE RUESTZEITEN WENN KEINE MENGE ;no when no quantity 
	. ;
	. IF $DATA(^INARTT(YM,ART)) SET $PIECE(YTEIL1,Y,7)=$$^INARTDAUERT(ART,$PIECE(YTEIL1,Y,4))   ;ERRECHNEN DAUER AUS TEILEN * MENGE ;permanence out of quantity 
	. SET $PIECE(YTEIL1,Y,6)=$$^INGEWICHTT(ART,$PIECE(YTEIL1,Y,4),$PIECE(YTEIL1,Y,15),$PIECE(YTEIL1,Y,16),$PIECE(YTEIL1,Y,17))  ;GEWICHT AUS TEILEN * MENGE ;wt. out of quantity 
	. IF +$PIECE(YTEIL1,Y,6)=0 SET $PIECE(YTEIL1,Y,6)=""  ;GEWICHT=""
	. SET $PIECE(YTEIL1,Y,8)=$$^INARTKOSTT(ART,$PIECE(YTEIL1,Y,4),$PIECE(YTEIL1,Y,7),$PIECE(YTEIL1,Y,6),YARTIKEL,YTEIL)  ;PREISERRECHNEN INKL VERSCHNITT
	. IF $PIECE(YTEIL1,Y,5)'=2 IF $PIECE(YTEIL1,Y,5)'=11 IF $PIECE(YTEIL1,Y,5)'=10 SET $PIECE(YTEIL1,Y,7)="",$PIECE(YTEIL1,Y,9)=""  ;DAUER LÖSCHEN WENN KEINE ZEIT ;permanence Delete when no time 
	. DO
	. . NEW YVORG,YVORG1,YFORM 
	. . SET YFORM="INARTT"
	. . SET YOK=$$^WWWSPEI("INARTT",YARTIKEL_","_YTEIL,YTEIL1,1)   ;SPEICHERN ARTIKELTEIL ;Save 
	. . DO ALLEARTIKEL  ; ÄNDERN VON GLEICHEN ARTIKELN ;alter resemble 
	
	;SPEICHERN ÄNDERUNGSMITARBEITER ;Save 
	;SET $PIECE(^INART(YM,YARTIKEL,1),Y,24) = $HOROLOG   ; SR15627 vvv 3 lines
	;SET $PIECE(^INART(YM,YARTIKEL,1),Y,25) = YBED
	set strStatus = $$MasterfileChanged^INARTMaster(YARTIKEL,YBED)	
	
	;DO
	;. N NEUTEIL,YNEUTEIL1,YQ=0
	;S NEUTEIL=$O(^SDFSDSF) Q:YNASJDF=""  D  Q:Q=0
	;. S NEUTIEL1=$G(^INARTT(YM,YARTILE,ASDFA,1)
	;. F 18,2,3,4,5 WSDFSD I RICHTIG =0
	;. Q:YQ=1  ;NICHT RICHTK ;Not 
	;. . NEW YVORG,YVORG1,YFORM 
	;. . SET YFORM="INARTT"
	;. . SET YOK=$$^WWWSPEI("INARTT",YARTIKEL_","_YNEUTEIL,YTEIL1,1)   ;SPEICHERN ARTIKELTEIL
	
	DO
	. QUIT:+$GET(YOPTION)=1     ;KEIN NEUAUFBAU DER DATEN ;DON'T RECONSTRUCT THE DATA 
	. DO ^INARTNEU(YARTIKEL)    ;NEUAUFBAU DER TEILE      ;RECONSTRUCT THE PARTS 
	. DO ^INARTXL(YARTIKEL,1)   ;NEUAUFBAU STRUKTUR NUR DIESES ;Reconstruct this 
	. ;		D47		$$$INARTProductionCosts()
	. DO
	. . NEW SATZ
	. . SET SATZ=$GET(^INART(YM,YARTIKEL,1))
	. . SET $PIECE(SATZ,Y,47)=$$^INARTKOST(YARTIKEL,1)      // SR14746 ;NEUER SELBSTKOSTENPREIS
	. . set strStatus=$$$Save("INART",YARTIKEL,SATZ,$$$YES) // SR14746
	QUIT
	
	
ALLEARTIKEL
	;-------------------------------------------------------------------------------
	;ÄNDERN VON GLEICHEN ARTIKELN, WENN DER FOLGENDE ARTIKEL GLEICH IST SOLL ER AUCH GEÄNDERT WERDEN 
	;YARTIKEL1 ALTER ARTIKEL ;governor item 
	;YARTIKEL KEY DES ARTIKELS
	;-------------------------------------------------------------------------------
	NEW NLFN,NARTIKEL1,YI,YQ
	
	SET YQ=0
	SET NLFN=$GET(YTEIL)
	FOR  SET NLFN=$ORDER(^INARTT(YM,YARTIKEL,NLFN)) QUIT:NLFN=""  DO  QUIT:YQ=1
	. SET NARTIKEL1=$GET(^INARTT(YM,YARTIKEL,NLFN,1))
	. SET YQ=0
	. SET YI=""
	. FOR YI=1,3,18,30 DO  QUIT:YQ=1  
	. . IF $PIECE(NARTIKEL1,Y,YI)'=$PIECE(YTEIL1,Y,YI) SET YQ=1
	. ;
	. IF YQ=0 SET YOK=$$^WWWSPEI("INARTT",YARTIKEL_","_NLFN,YTEIL1,1)   ;SPEICHERN ARTIKELTEIL ;Save 
	
	QUIT
	
SUCH
	;-------------------------------------------------------------------------------
	;	ANZEIGEN NACH SUCHVORGABE ;display within 
	;
	; History :
	; 02-Aug-2005	GRF		SR13142 : doco; simplify code
	;-------------------------------------------------------------------------------
	new strBGColour,TableHeading
	
	SET VORG(1)=$EXTRACT(YAUSWAHL,2,99)   ;SUCHVORGABE VOLLTEXT ODER NUMMER ;full text Or numeral 
	
	KILL ^WWWSOR(YUSER,"ARTIKEL")
	KILL ^WWWSOR(YUSER,"JOB")
	
	QUIT:VORG(1)=""   ;KEINE AUSWAHL ;no Selection 
	SET YDDSATZ=0     ;VARIABELE ZUR HELL DUNKELSCHALTUNG ;bright 
	WRITE YCR
	
	IF $FIND(VORG(1),"=") DO  SET VORG(1)="" QUIT  ;SONDERFUNKTION LÖSCHEN UND MOVE ;Delete And 
	. SET VORG(1)=$TRANSLATE(VORG(1),"()""")
	. IF +$PIECE(VORG(1),"=",1)=0!(+$PIECE(VORG(1),"=",2)=0) IF $PIECE(VORG(1),"=",2)'="x" IF $PIECE(VORG(1),"=",2)'="X"  DO  QUIT
	. . WRITE "<script language=""JavaScript"">alert('"_$$^WWWTEXT(32292,,1)_"');</script>"  ;BITTE PRÜFEN
	. ;
	. ;PRÜFEN ARTIKELAUFBEREITUNG IM HINTERGRUND;FIS;19.01.04;24078;FEHLERHAFTE DATENSÄTZE NACH VERSCHIEBEN
	. NEW PROCESSING,JOBNR,JOBTYPE,YSONDERFUNKTION,YNOSORT
	. SET PROCESSING=0
	. SET JOBNR="" FOR  SET JOBNR=$ORDER(^INARTJOB(YM,JOBNR)) QUIT:JOBNR=""  DO
	. . SET JOBTYPE=$GET(^INARTJOB(YM,JOBNR,1))
	. . IF '$FIND(JOBTYPE,"INART") QUIT  ;ARTIKELAUFBEREITUNG (INARTXL,INARTNEU,...)
	. . LOCK +^INARTJOB(YM,JOBNR):2  SET:'$TEST PROCESSING=1  ;LÄUFT GERADE ;okay 
	. . IF $DATA(^INARTJOB(YM,JOBNR)) KILL ^INARTJOB(YM,JOBNR) SET ^WWWSOR(YUSER,"JOB",JOBNR)=JOBTYPE  ;AUS WARTESCHLANGE GELÖSCHT ;out of waiting line 
	. . LOCK -^INARTJOB(YM,JOBNR)
	. ;
	. IF PROCESSING=1 DO  QUIT  ;KEINE PARALLEL-BEARBEITUNG MÖGLICH ;no potential 
	. . WRITE "<script language=""JavaScript"">alert('"_$$^WWWTEXT(33720,,1)_"');</script>"  ;Dieser Vorgang konnte nicht durchgeführt werden, da zur Zeit eine Artikelaufbereitung im Hintergrund gestartet ist
	. ;
	. IF $TRANSLATE($PIECE(VORG(1),"=",2),"x","X")="X" DO  ;LOESCHEN
	. . NEW YPARA1,TLFN
	. . SET YSONDERFUNKTION=1
	. . SET TLFN    = $PIECE(VORG(1),"=",1) 
	. . SET TLFN(1) = $PIECE(TLFN,"-",1)
	. . SET TLFN(2) = $PIECE(TLFN,"-",2)
	. . IF (TLFN(2)-TLFN(1))>500 DO  QUIT
	. . . WRITE "<script language=""JavaScript"">alert('"_$$^WWWTEXT(32292,,1)_"');</script>"  ;BITTE PRÜFEN
	. . ;
	. . IF TLFN(2)="" SET TLFN(2)=TLFN(1)
	. . ;WRITE "<script language=""JavaScript"">alert('"_$$^WWWTEXT(33238,,1)_"');</script>"  ;GGF. INTAGES STARTEN
	. . FOR TLFN(3)=TLFN(1):1:TLFN(2) DO   ;LÖSCHEN EINZELNE FELDER ;Delete 
	. . . SET YNOSORT=1
	. . . IF TLFN(3)=TLFN(2) SET YNOSORT=0  ;FIS;25.02.04;25183;STARTET NEUSORTIERUNG NACH MEHRFACH-LÖSCHUNG
	. . . SET %(YQUERY,"YFUNCT1")="KILL"  ;FUNKTION (UP DOWN KILL)
	. . . SET %(YQUERY,"YPARA1")=YARTIKEL_","_TLFN(3)
	. . . DO PROC^INARTT  ;LÖSCHEN DATEN ;Delete 
	. . ;
	. . DO ^INARTNEU(YARTIKEL,1)
	. . DO ^INARTXL(YARTIKEL,1)  ;ARTIKELSTRUKTUR NEU ;recent 
	. ;
	. IF $TRANSLATE($PIECE(VORG(1),"=",2),"x","X")'="X" DO  ;BEWEGEN ;stir 
	. . NEW YPARA1,TLFN
	. . SET YSONDERFUNKTION=1
	. . SET TLFN(1)=+$PIECE(VORG(1),"=",1) 
	. . SET TLFN(2)=+$PIECE(VORG(1),"=",2) 
	. . IF (TLFN(2)-TLFN(1))>500 DO  QUIT
	. . . WRITE "<script language=""JavaScript"">alert('"_$$^WWWTEXT(32292,,1)_"');</script>"  ;BITTE PRÜFEN
	. . ;
	. . SET TLFN(3)=TLFN(1)-TLFN(2)
	. . IF TLFN(3)>0 DO  QUIT   ;UP
	. . . FOR TLFN(4)=TLFN(1):-1:TLFN(2)+1 DO   ;SCHIEBEN FELDER ;shove 
	. . . . SET %(YQUERY,"YFUNCT1")="UP"  ;FUNKTION (UP DOWN KILL)
	. . . . SET %(YQUERY,"YPARA1")=YARTIKEL_","_TLFN(4)
	. . . . DO PROC^INARTT  ; DATEN SCHIEBEN ;shove 
	. . . ;
	. . . DO ^INARTNEU(YARTIKEL,1)
	. . . DO ^INARTXL(YARTIKEL,1)  ;ARTIKELSTRUKTUR NEU ;recent 
	. . ;
	. . IF TLFN(3)<0 DO  QUIT   ;DOWN
	. . . FOR TLFN(4)=TLFN(1):1:TLFN(2)-1 DO   ;SCHIEBEN FELDER ;shove 
	. . . . SET %(YQUERY,"YFUNCT1")="DOWN"  ;FUNKTION (UP DOWN KILL)
	. . . . SET %(YQUERY,"YPARA1")=YARTIKEL_","_TLFN(4)
	. . . . DO PROC^INARTT  ; DATEN SCHIEBEN ;shove 
	. . . ;
	. . . DO ^INARTNEU(YARTIKEL,1)
	. . . DO ^INARTXL(YARTIKEL,1)  ;ARTIKELSTRUKTUR NEU ;recent 
	. ;
	. SET %(YQUERY,"YFUNCT1")=""  ;FUNKTION (UP DOWN KILL)
	. SET %(YQUERY,"YPARA1")=""
	. ;
	. ;WIEDEREINSETZTEN HINTERGRUNDJOB;FIS;19.01.04;24078
	. SET JOBNR=""
	. FOR  SET JOBNR=$ORDER(^WWWSOR(YUSER,"JOB",JOBNR)) QUIT:JOBNR=""  DO
	. . SET ^INARTJOB(YM,JOBNR,1)=$GET(^WWWSOR(YUSER,"JOB",JOBNR))
	. KILL ^WWWSOR(YUSER,"JOB")
	
	IF VORG(1)'="" WRITE "&nbsp;"_$$^WWWTEXT(148)_": "_VORG(1)       ;SUCHE NACH    "Search : #######"
	IF $PIECE(YARTIKEL1,Y,26)=2 WRITE " ("_$$^WWWTEXT(32992)_")"     ;"Only Work Orders Possible"
	
	;---------------------------------------
	;KOPF ZEILE ;heading of Input table
	;---------------------------------------
	
	;+++++++++++++++++++++++++++++++++++++++
	;  Secondary Input - 7 columns            (total 130% ?)
	;    Quantity (10%)           Item (10%)
	;    Description (30%)        Stock (10%)    
	;    Unit Price (Cost) (10%)
	;    Text (30%)               Supplier (30%)
	;+++++++++++++++++++++++++++++++++++++++
	
	DO ^WWWFRAME(0)  ;TABLE AN  ;upon 
	WRITE "<TH VALIGN=TOP NOWRAP VALIGN=TOP align=LEFT ALIGN=LEFT WIDTH=10%"
	WRITE " BGCOLOR="_YDARKGRAY_">"
	WRITE "<FONT SIZE=2>"
	WRITE $$^WWWTEXT(32025)  ;MENGE MENGENEINHEIT ;quantity unit of measure 
	WRITE "</TH>",YCR
	
	WRITE "<TH VALIGN=TOP NOWRAP VALIGN=TOP align=LEFT ALIGN=LEFT WIDTH=10%"
	WRITE " BGCOLOR="_YDARKGRAY_">"
	WRITE "<FONT SIZE=2>"
	WRITE $$^WWWTEXT(32024)  ;ARTIKEL ;item 
	WRITE "</TH>",YCR
	
	WRITE "<TH VALIGN=TOP NOWRAP VALIGN=TOP align=LEFT ALIGN=LEFT WIDTH=30%"
	WRITE " BGCOLOR="_YDARKGRAY_">"
	WRITE "<FONT SIZE=2>"
	WRITE $$^WWWTEXT(32026)  ;BEZEICHNUNG ;description 
	WRITE "</TH>",YCR
	
	WRITE "<TH VALIGN=TOP NOWRAP VALIGN=TOP align=LEFT ALIGN=LEFT WIDTH=10%"
	WRITE " BGCOLOR="_YDARKGRAY_">"
	WRITE "<FONT SIZE=2>"
	WRITE $$^WWWTEXT(32020)  ;BESTAND
	WRITE "</TH>",YCR
	
	WRITE "<TH VALIGN=TOP NOWRAP VALIGN=TOP align=LEFT ALIGN=LEFT WIDTH=10%"
	WRITE " BGCOLOR="_YDARKGRAY_">"
	WRITE "<FONT SIZE=2>"
	WRITE $$^WWWTEXT(31409)_" ("_$$^WWWTEXT(32980)_")"  ;EINZEL-PREIS (EK)
	WRITE "</TH>",YCR
	
	WRITE "<TH VALIGN=TOP NOWRAP VALIGN=TOP align=LEFT ALIGN=LEFT WIDTH=30%"
	WRITE " BGCOLOR="_YDARKGRAY_">"
	WRITE "<FONT SIZE=2>"
	WRITE $$^WWWTEXT(32027)  ;AUSFÜHRUNG ;execution 
	WRITE "</TH>",YCR
	
	WRITE "<TH VALIGN=TOP NOWRAP VALIGN=TOP align=LEFT ALIGN=LEFT WIDTH=30%"
	WRITE " BGCOLOR="_YDARKGRAY_">"
	WRITE "<FONT SIZE=2>"
	WRITE $$^WWWTEXT(32022)  ;LIEFERANT ;supplier 
	WRITE "</TH>",YCR
	
	WRITE "</TR>"
	
	SET ANZM=0
	
	IF $PIECE($GET(^INVORG(YM,YM,1)),Y,212)'=1 DO  ;TYBD;SERACH IN BITMAPS;15,3,2005;27167
	. ;STRATEGIE 1 ARTIKELNUMMER ;strategy 
	. IF $EXTRACT(VORG(1))'="*" IF VORG(1)'="" IF $DATA(^INART(YM,VORG(1))) SET ART=VORG(1) DO
	. . SET ART1=$GET(^INART(YM,ART,1))
	. . DO ANZ
	. ;
	. ;STRATEGIE 2 BEZEICHNUNG GENAU ;strategy notation truly 
	. IF VORG(1)'="" IF $EXTRACT(VORG(1))'="*" SET NAME=$$^WWWUMLAU(VORG(1),1) IF $DATA(^INARTs(YM,1,NAME)) DO
	. . SET ART=""
	. . FOR  SET ART=$ORDER(^INARTs(YM,1,NAME,ART)) QUIT:ART=""  DO  QUIT:ANZM>50
	. . . SET ART1=$GET(^INART(YM,ART,1))
	. . . DO ANZ
	. ;
	. ;STRATEGIE 3 BEZEICHNUNG UNGENAU ;strategy notation inexact 
	. IF ANZM<10 IF VORG(1)'="" IF $EXTRACT(VORG(1))'="*" SET NAME=$$^WWWUMLAU(VORG(1),1) FOR  SET NAME=$ORDER(^INARTs(YM,1,NAME)) QUIT:NAME=""  QUIT:'$FIND(NAME,$$^WWWUMLAU(VORG(1),1))  DO  QUIT:ANZM>50
	. . SET ART=""
	. . FOR  SET ART=$ORDER(^INARTs(YM,1,NAME,ART)) QUIT:ART=""  DO  QUIT:ANZM>50
	. . . SET ART1=$GET(^INART(YM,ART,1))
	. . . DO ANZ
	. ;
	. ;STRATEGIE 4 SUCHEN ARTIKELNUMMERN ;strategy seek 
	. IF ANZM<10 IF +VORG(1)'=0 FOR I=0:1:4 DO  QUIT:ANZM>50
	. . SET ART=VORG(1)_$EXTRACT("00000000",1,I)
	. . IF ART'=VORG(1) IF $DATA(^INART(YM,ART,1)) SET ART1=$GET(^INART(YM,ART,1)) DO ANZ
	. . FOR  SET ART=$ORDER(^INART(YM,ART)) QUIT:ART=""  QUIT:'$FIND(ART,VORG(1))  DO  QUIT:ANZM>50
	. . . SET ART1=$GET(^INART(YM,ART,1))
	. . . IF VORG(1)'=ART DO ANZ
	. ;
	. ;STRATEGIE 4 SUCHEN ARTIKELNUMMERN ;strategy seek 
	. IF ANZM<10 IF +VORG(1)'=0 FOR I=1 DO  QUIT:ANZM>50
	. . SET ART=VORG(1)_$EXTRACT("    ",1,I)
	. . IF ART'=VORG(1) IF $DATA(^INART(YM,ART,1)) SET ART1=$GET(^INART(YM,ART,1)) DO ANZ
	. . FOR  SET ART=$ORDER(^INART(YM,ART)) QUIT:ART=""  QUIT:'$FIND(ART,VORG(1))  DO  QUIT:ANZM>50
	. . . SET ART1=$GET(^INART(YM,ART,1))
	. . . IF VORG(1)'=ART DO ANZ
	. ;
	. ;STRATEGIE 4 SUCHEN VOLLTEXT MODELL ;strategy seek full text 
	. IF ANZM=0 IF VORG(1)'="" IF $EXTRACT(VORG(1))'="*" SET NAME="" FOR  SET NAME=$ORDER(^INARTs(YM,1,NAME)) QUIT:NAME=""  IF $FIND(NAME,$$^WWWUMLAU(VORG(1),1)) DO  QUIT:ANZM>50
	. . SET ART=""
	. . FOR  SET ART=$ORDER(^INARTs(YM,1,NAME,ART)) QUIT:ART=""  DO  QUIT:ANZM>50
	. . . SET ART1=$GET(^INART(YM,ART,1))
	. . . DO ANZ
	. ;
	. ;STRATEGIE 4 SUCHEN VOLLTEXT ARTIKEL ;strategy seek full text item 
	. IF ANZM=0 IF $EXTRACT(VORG(1))="*" SET VORG(1)=$$^WWWUMLAU($EXTRACT(VORG(1),2,99),1) SET NAME="" FOR  SET NAME=$ORDER(^INARTs(YM,1,NAME)) QUIT:NAME=""  DO  QUIT:ANZM>50
	. . SET ART=""
	. . FOR  SET ART=$ORDER(^INARTs(YM,1,NAME,ART)) QUIT:ART=""  DO  QUIT:ANZM>50
	. . . SET ART1=$GET(^INART(YM,ART,1))
	. . . IF VORG(1)'="" IF $FIND($$^WWWUMLAU(ART1_Y_ART,1),VORG(1)) DO ANZ QUIT
	. . . IF VORG(1)="" DO ANZ
	
	;BITMAPSUCHE
	IF $PIECE($GET(^INVORG(YM,YM,1)),Y,212)=1 DO  ;TYBD;SERACH IN BITMAPS;15,3,2005;27167
	. NEW YFORM,YOK,SEL
	. SET YFORM="INART"
	. KILL ^WWWSOR(YUSER,"KEY")
	. KILL ^WWWSOR(YUSER,"SEL")
	. SET YOK=$$^WWWBITSEARCH(VORG(1),"INART")
	. SET ART=""
	. FOR  SET ART=$ORDER(^WWWSOR(YUSER,"SEL",ART)) QUIT:ART=""  DO  QUIT:ANZM>50    ;BITSUCHE
	. . SET ART1=$GET(^INART(YM,ART,1))
	. . DO ANZ  
	. ;
	. KILL ^WWWSOR(YUSER,"KEY")
	. KILL ^WWWSOR(YUSER,"SEL")
	
	;STRATEGIE 7 SUCHEN ALTERNATIVE ARTIKELSUCHE ;strategy seek option 
	IF ANZM=0 DO    ;TYBD;25563;17,4,2004
	. SET ART=""
	. FOR  SET ART=$ORDER(^INARTXCHs(YM,1,$$^WWWUMLAU(VORG(1),1),ART)) QUIT:ART=""  DO  QUIT:ANZM>50    ;SSOK
	. . SET ART1=$GET(^INART(YM,ART,1))
	. . DO ANZ
	
	; seven empty fields if item not found (Looks like YDDSATZ is pointless here)
	IF ANZM=0 DO   ;KEIN DATENYTEIL1 GEFUNDEN ;no part date found?
	. WRITE "<TR>"
	. SET YDDSATZ=YDDSATZ+1
	. set strBGColour = $select(YDDSATZ#2=1:" BGCOLOR="_YWHITE,1:"")
	. ;
	. WRITE "<TD NOWRAP VALIGN=TOP"_strBGColour_">"
	. WRITE "<FONT SIZE=2>"
	. WRITE "&nbsp;"
	. WRITE "</TD>",YCR
	. ;
	. WRITE "<TD NOWRAP VALIGN=TOP"_strBGColour_">"
	. WRITE "<FONT SIZE=2>"
	. WRITE "&nbsp;"
	. WRITE "</TD>",YCR
	. ;
	. WRITE "<TD NOWRAP VALIGN=TOP"_strBGColour_">"
	. WRITE "<FONT SIZE=2>"
	. WRITE "&nbsp;"
	. WRITE "</TD>",YCR
	. ;
	. WRITE "<TD NOWRAP VALIGN=TOP"_strBGColour_">"
	. WRITE "<FONT SIZE=2>"
	. WRITE "&nbsp;"
	. WRITE "</TD>",YCR
	. ;
	. WRITE "<TD NOWRAP VALIGN=TOP"_strBGColour_">"
	. WRITE "<FONT SIZE=2>"
	. WRITE "&nbsp;"
	. WRITE "</TD>",YCR
	. ;
	. WRITE "<TD NOWRAP VALIGN=TOP"_strBGColour_">"
	. WRITE "<FONT SIZE=2>"
	. WRITE "&nbsp;"
	. WRITE "</TD>",YCR
	. ;
	. WRITE "<TD NOWRAP VALIGN=TOP"_strBGColour_">"
	. WRITE "<FONT SIZE=2>"
	. WRITE "&nbsp;"
	. WRITE "</TD>",YCR
	. ;
	. WRITE "</TR>"
	
	DO ^WWWFRAME(1)   ;TABLE AUS ;out of 
	WRITE YCR,"<BR>"
	IF ANZM>49 WRITE "<B>",$$^WWWTEXT(32111),"</b>"  ;Weitere Artikel vorhanden.... Suche einschränken!
	KILL ^WWWSOR(YUSER,"ARTIKEL")
	QUIT
	
ANZ
	;-------------------------------------------------------------------------------
	;   anzeige suchergebnis auswahl der Menge ;Selection who Q]]><![CDATA[uantity
	;   INTPUT AREA - If there are more than 1 items matching the details entered,
	;                 all will be displayed and multiple components can be selected
	;                 at once.
	;   
	;-------------------------------------------------------------------------------
	;  7 columns displayed in table
	;  
	;  Quantity, Item, Description, Stock On Hand Qty, Unit Price (Cost), Text, Supplier
	;-------------------------------------------------------------------------------
	;
	; Inputs :
	;   ART			Item Number
	;	ART1		objINART
	;	YFELD		
	;-------------------------------------------------------------------------------
	new DIMENS,DOPPEL,HoldReason,ItemHeight,ItemLength,ItemRemark,ItemType,ItemWidth
	new strBGColour,strWarning,SupName,UnitType
	
	set ItemRemark = $$$INARTRemarks(ART1)			; D14
	set ItemLength = $$$INARTLength1(ART1)			; D15
	set ItemWidth  = $$$INARTWidth(ART1)			; D16
	set ItemHeight = $$$INARTHeight(ART1)			; D17
	set ItemType   = $$$INARTItemType(ART1)			; D26
	set UnitType   = $$$INARTUnitofMeasure(ART1)	; D40
	set HoldReason = $$$INARTHoldReason(ART1)		; D66
	set SupName    = $$$INARTSupplierName(ART1)		; D195
	
	;+++++++++++++++++++++++++++++++++++++++
	; Item Type :
	; 0 - Make or Buy	4 - Consumable Supplies
	; 1 - Buy			5 - Phantom Item
	; 2 - Service		6 - Overall performances
	; 3 - Make			7 - Item To Configure
	;+++++++++++++++++++++++++++++++++++++++
	
	;-------------------------------------------------------------------------------
	
	QUIT:$DATA(^WWWSOR(YUSER,"ARTIKEL",ART))  ;SCHON AUSGEWÄHLT ;already selected
	SET ^WWWSOR(YUSER,"ARTIKEL",ART)=""
	
	;EIGENAUFTRAG
	;NUR LEISTUNGEN UND EIGENFERTIGUNG BEI INNTERNEM AUFTRAG ;only LEISTUNGEN And next to mandate 
	IF ($PIECE(YFELD,Y,2)=1) && (+ItemType'=0) && (ItemType'=2) && (ItemType'=3) QUIT
	
	;LIEFERANTEN BESTELLUNG ;sales order 
	;NUR BESTELLUNG UND KLEINTEILE BER BESTELLUNGEN  ;only sales order And 
	; FIXME : Should ItemType be +ItemType? <GRF>
	IF ($PIECE(YFELD,Y,2)=2) && (ItemType'=0) && (ItemType'=1) && (ItemType'=4) QUIT
	
	; Services can only contain services  ;NUR LEISTUNGEN AN LEISTUNGEN TYBD07.05.2002
	IF ($$$INARTItemType(YARTIKEL1)=2) && (ItemType'=2) QUIT
	
	;-------------------------------------------------------------------------------
	
	;+++++++++++++++++++++++++++++++++++++++
	; Uses Dimensions
	; FIXME : ? The logic seems faulty.  Seems it only considers WIDTH/LENGTH/HEIGHT options. <GRF>
	;      e.g. why should litres (3) have dimensions and kg (4) not?
	;           Ditto Weeks (16) but not days (15)
	;           If one of our dimensions is colour why can't we sell by the metre (5)?
	;           Why do services have dimensions?
	;           Shouldn't we actually look if the item uses dimensions?
	;           Is this same faulty logic used elsewhere?
	;+++++++++++++++++++++++++++++++++++++++
	set DIMENS = $$$NO
	IF (+ItemType=0) || (ItemType=1) || (ItemType=2) || (ItemType=3) DO   ;NUR WENN BESTELL ODER EIGENFERTIGUNG ;ONLY IF ORDER OR SELF-MANUFACTURING 
	. QUIT:ART'=$TRANSLATE(ART,",.-#;:_'+*´?=!§%&/()=[]{}²³@|><""")
	. IF (UnitType'=4) && (UnitType'=5) && (UnitType'=6) && (UnitType'=12) && (UnitType'=15) QUIT  ;FALSCHE EINHEIT ;Can't apply to these units
	. SET DIMENS=$$$YES
	
	;PRÜFEN OB TEIL IN GLEICHEM TEIL;FIS;23867;07.07.03
	SET DOPPEL=0
	DO
	. IF YARTIKEL=ART SET DOPPEL=1 QUIT
	. IF $DATA(^INARTTs(YM,1,$$^WWWUMLAU(YARTIKEL,1),ART)) SET DOPPEL=1
	
	SET ANZM=ANZM+1
	WRITE "<TR>",YCR
	SET YDDSATZ=YDDSATZ+1
	set strBGColour = $select(YDDSATZ#2=1:" BGCOLOR="_YWHITE,1:"")
	set strWarning  = ""
	if HoldReason=1 set strWarning = "<FONT COLOR=RED>"      ;ARTIKEL ;item 
	if HoldReason=2 set strWarning = "<FONT COLOR=ORANGE>"   ;ACHTUNG ;estimation 
	if HoldReason=3 set strWarning = "<FONT COLOR=GREEN>"
	
	;---------------------------------------
	; COLUMN 1 : Quantity
	;---------------------------------------
	WRITE "<TD NOWRAP VALIGN=TOP"_strBGColour_">"
	WRITE "<FONT SIZE=2>"
	
	
	;MENGENAUSWAHL
	WRITE "<INPUT NAME=YMNG"_ART_" SIZE=5 MAXLENGTH=5 TYPE=float VALUE="""""
	WRITE " TABINDEX=ART style=""padding-top:0 ;padding-bottom:0"" style=""text-align:right"""
	WRITE YCR
	WRITE " onFocus='select();'"
	IF $GET(YHTMFORM)="WWW2" DO
	. WRITE YCR," onBlur='"
	. WRITE " retval = EventValue("""_YUCI_""","""_YUSER_""","""_YFORM_""",""FIX"_$GET(YKEY)_""","""",this.value,""0"",""YMNG"_ART_""");"
	. ;WRITE "document.WWW.ITEMS.value="""_ART_""";document.WWW.ITEMSQ.value=this.value;"
	. ;WRITE "document.WWW.ITEMBENN.value=document."_YHTMFORM_".YBEN"_ART_".value;"
	. ;IF DIMENS=1 DO
	. ;.WRITE "document.WWW.ITEMLNGN.value=document."_YHTMFORM_".YLNG"_ART_".value;"
	. ;.WRITE "document.WWW.ITEMBRTN.value=document."_YHTMFORM_".YBRT"_ART_".value;"
	. ;.WRITE "document.WWW.ITEMHOEN.value=document."_YHTMFORM_".YHOE"_ART_".value;"
	. ;.WRITE "document.WWW.ITEMMULN.value=document."_YHTMFORM_".YMUL"_ART_".value;"
	. WRITE "'"
	
	WRITE YCR
	WRITE " onKeyDown='if (event.keyCode == 13) event.keyCode = 9;'"
	WRITE YCR
	WRITE " STYLE=""background-color: 'beige'"""
	WRITE YCR
	
	;vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv DISABLED BLOCK START
	;DO  ;NUR WENN KEINE DIM ;only when no 
	. IF UnitType'=5 IF UnitType'=6 IF UnitType'=12 IF UnitType'=15 IF UnitType'=4 QUIT
	. WRITE " onKeyDown='if (event.keyCode == 13) event.keyCode = 9;'"
	. QUIT
	;^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ DISABLED BLOCK END
	
	WRITE ">"
	
	write strWarning
	WRITE "&nbsp;"
	
	;MENGENEINHEIT
	IF $$$INARTSalesUnit(ART1)=""                                      SET $$$INARTSalesUnit(ART1) = UnitType      ;VERKAUFSEINHEIT=MENGENEINHEIT
	IF $$$INARTSalesUnit(ART1)=""                                      SET $$$INARTSalesUnit(ART1) = $$$UNITEach
	IF '$DATA(^WWW101(0,"EINHEIT",SPRACHE,+$$$INARTSalesUnit(ART1),1)) SET $$$INARTSalesUnit(ART1) = $$$UNITEach   ;STUECK ; each
	IF +$$$INARTSalesUnit(ART1)'=0 WRITE $PIECE($GET(^WWW101(0,"EINHEIT",SPRACHE,$$$INARTSalesUnit(ART1),1)),Y,1)  ;EINHEIT ;unit
	WRITE "&nbsp;"
	
	;BREITE/LÄNGE/HÖHE  ; WIDTH/LENGTH/HEIGHT
	IF DIMENS=1 DO   ;WENN DIMENSIONEN VORHANDEN ;when on hand 
	. WRITE YCR,"<BR>"
	. WRITE "<INPUT NAME=YLNG"_ART_" SIZE=5 MAXLENGTH=10 TYPE=float VALUE="""_$$^WWWTR(0,12,ItemLength)_""""
	. WRITE YCR," TABINDEX=ART style=""padding-top:0 ;padding-bottom:0"" style=""text-align:right"""
	. WRITE YCR," onFocus='select();'"
	. WRITE YCR," onKeyDown='if (event.keyCode == 13) event.keyCode = 9;'"
	. WRITE YCR
	. SET ^WWWDATEN(YM,+$HOROLOG,YUSER,YFORM,"V","YLNG"_ART,1)=ItemLength  ;DATEN ZUR PRUEFUNG
	. WRITE " onBlur='retval = EventValue("""_YUCI_""","""_YUSER_""","""_YFORM_""",""FIX"",""INMNGART"",this.value,6,"""_ART_""" + ""/"" + document."_YHTMFORM_".YBRT"_ART_".value+""/"" + document."_YHTMFORM_".YHOE"_ART_".value); if (retval != """") document."_YHTMFORM_".YMNG"_ART_".value = retval;"
	. IF $GET(YHTMFORM)="WWW2" WRITE " retval = EventValue("""_YUCI_""","""_YUSER_""","""_YFORM_""",""FIX"_$GET(YKEY)_""","""",this.value,""0"",""YLNG"_ART_""");"
	. ;IF $GET(YHTMFORM)="WWW2" DO
	. ;.WRITE "document.WWW.ITEMS.value = """_ART_""";"
	. ;.WRITE "document.WWW.ITEMSQ.value = retval;"
	. ;.WRITE "document.WWW.ITEMLNGN.value=document."_YHTMFORM_".YLNG"_ART_".value;"
	. ;.WRITE "document.WWW.ITEMBRTN.value=document."_YHTMFORM_".YBRT"_ART_".value;"
	. ;.WRITE "document.WWW.ITEMHOEN.value=document."_YHTMFORM_".YHOE"_ART_".value;"
	. ;
	. WRITE "'"
	. WRITE ">"
	. ;
	. WRITE " Dim.1"
	. ;
	. WRITE YCR,"<BR>"
	. WRITE "<INPUT NAME=YBRT"_ART_" SIZE=5 MAXLENGTH=10 TYPE=float VALUE="""_$$^WWWTR(0,12,ItemWidth)_""""
	. WRITE YCR," TABINDEX=ART style=""padding-top:0 ;padding-bottom:0"" style=""text-align:right"""
	. WRITE YCR," onFocus='select();'"
	. WRITE YCR," onKeyDown='if (event.keyCode == 13) event.keyCode = 9;'"
	. WRITE YCR
	. SET ^WWWDATEN(YM,+$HOROLOG,YUSER,YFORM,"V","YBRT"_ART,1)=ItemWidth  ;DATEN ZUR PRUEFUNG
	. WRITE " onBlur='retval = EventValue("""_YUCI_""","""_YUSER_""","""_YFORM_""",""FIX"",""INMNGART"",this.value,6,"""_ART_""" + ""/"" + document."_YHTMFORM_".YLNG"_ART_".value+""/"" + document."_YHTMFORM_".YHOE"_ART_".value); if (retval != """") document."_YHTMFORM_".YMNG"_ART_".value = retval;"
	. IF $GET(YHTMFORM)="WWW2" WRITE " retval = EventValue("""_YUCI_""","""_YUSER_""","""_YFORM_""",""FIX"_$GET(YKEY)_""","""",this.value,""0"",""YBRT"_ART_""");"
	. ;IF $GET(YHTMFORM)="WWW2" DO
	. ;.WRITE "document.WWW.ITEMS.value = """_ART_""";"
	. ;.WRITE "document.WWW.ITEMSQ.value = retval;"
	. ;.WRITE "document.WWW.ITEMLNGN.value=document."_YHTMFORM_".YLNG"_ART_".value;"
	. ;.WRITE "document.WWW.ITEMBRTN.value=document."_YHTMFORM_".YBRT"_ART_".value;"
	. ;.WRITE "document.WWW.ITEMHOEN.value=document."_YHTMFORM_".YHOE"_ART_".value;"
	. ;
	. WRITE "'"
	. WRITE ">"
	. ;
	. WRITE " Dim.2"
	. ;
	. WRITE YCR,"<BR>"
	. WRITE "<INPUT NAME=YHOE"_ART_" SIZE=5 MAXLENGTH=10 TYPE=float VALUE="""_$$^WWWTR(0,12,ItemHeight)_""""
	. WRITE YCR," TABINDEX=ART style=""padding-top:0 ;padding-bottom:0"" style=""text-align:right"""
	. WRITE YCR," onFocus='select();'"
	. WRITE YCR," onKeyDown='if (event.keyCode == 13) event.keyCode = 9;'"
	. WRITE YCR
	. SET ^WWWDATEN(YM,+$HOROLOG,YUSER,YFORM,"V","YHOE"_ART,1)=ItemHeight  ;DATEN ZUR PRUEFUNG
	. WRITE " onBlur='retval = EventValue("""_YUCI_""","""_YUSER_""","""_YFORM_""",""FIX"",""INMNGART"",this.value,6,"""_ART_""" + ""/"" + document."_YHTMFORM_".YBRT"_ART_".value+""/"" + document."_YHTMFORM_".YLNG"_ART_".value); if (retval != """") document."_YHTMFORM_".YMNG"_ART_".value = retval;"
	. IF $GET(YHTMFORM)="WWW2" WRITE " retval = EventValue("""_YUCI_""","""_YUSER_""","""_YFORM_""",""FIX"_$GET(YKEY)_""","""",this.value,""0"",""YHOE"_ART_""");"
	. ;IF $GET(YHTMFORM)="WWW2" DO
	. ;.WRITE "document.WWW.ITEMS.value = """_ART_""";"
	. ;.WRITE "document.WWW.ITEMSQ.value = retval;"
	. ;.WRITE "document.WWW.ITEMLNGN.value=document."_YHTMFORM_".YLNG"_ART_".value;"
	. ;.WRITE "document.WWW.ITEMBRTN.value=document."_YHTMFORM_".YBRT"_ART_".value;"
	. ;.WRITE "document.WWW.ITEMHOEN.value=document."_YHTMFORM_".YHOE"_ART_".value;"
	. ;
	. WRITE "'"
	. WRITE ">"
	. ;
	. WRITE " Dim.3"
	. ;
	. WRITE "<IMG SRC="""_YGIF_"total.gif"" ALIGN=right TITLE="""_$$^WWWTEXT(32366)_""" border=0>"	;"Calculation"
	. WRITE "</TD>",YCR
	
	;---------------------------------------
	; COLUMN 2 : Item Number
	;---------------------------------------
	WRITE "<TD VALIGN=TOP"_strBGColour_">"
	WRITE "<FONT SIZE=2>"
	write strWarning
	WRITE ART
	WRITE "&nbsp;"
	WRITE "</TD>",YCR
	
	;---------------------------------------
	; COLUMN 3 : Item Description
	;---------------------------------------
	;BEZEICHNUNG 
	WRITE "<TD VALIGN=TOP"_strBGColour_">"
	WRITE "<FONT SIZE=2>"
	write strWarning
	write $$$INARTSearchName(ART1)
	
	;ZUSATZBENENNUNG
	WRITE "<BR>"
	WRITE "<INPUT NAME=YBEN"_ART_" SIZE=20 MAXLENGTH=60 TYPE=TEXT VALUE="""""
	WRITE " TABINDEX=ART style=""padding-top:0 ;padding-bottom:0"""
	WRITE " onFocus='select();'"
	IF $GET(YHTMFORM)="WWW2" WRITE " onBlur='retval = EventValue("""_YUCI_""","""_YUSER_""","""_YFORM_""",""FIX"_$GET(YKEY)_""","""",this.value,""0"",""YBEN"_ART_""");'"
	;IF $GET(YHTMFORM)="WWW2" WRITE " onBlur='document.WWW.ITEMBENN.value=this.value;'"
	WRITE YCR," onKeyDown='if (event.keyCode == 13) event.keyCode = 9;'"
	WRITE ">",YCR
	
	;MENGE, WENN VIELE EINHEITEN
	IF DIMENS=1 {
		WRITE "<BR>"
		WRITE "<INPUT NAME=YMUL"_ART_" SIZE=4 MAXLENGTH=10 TYPE=TEXT VALUE="""""
		WRITE " TABINDEX=ART style=""padding-top:0 ;padding-bottom:0"""
		WRITE " onFocus='select();'"
		IF $GET(YHTMFORM)="WWW2" WRITE " onBlur='retval = EventValue("""_YUCI_""","""_YUSER_""","""_YFORM_""",""FIX"_$GET(YKEY)_""","""",this.value,""0"",""YMUL"_ART_""");'"
	;	IF $GET(YHTMFORM)="WWW2" WRITE YCR," onBlur='document.WWW.ITEMMULN.value=this.value;'"
		WRITE YCR," onKeyDown='if (event.keyCode == 13) event.keyCode = 9;'"
		WRITE ">"
		WRITE "&nbsp;"_$$^WWWTEXT(32240)  ;MENGE  ; "Piece"
		WRITE YCR
	}
	
	;TEIL IN EIGENEM TEIL ;FIS;23867;07.07.03
	;ACHTUNG ARTIKEL KANN NICHT IN SICH SELBST EINGEBAUT WERDEN      ; "Attention! Part can not be made from itself."
	IF DOPPEL=1 {
		WRITE "<BR>"
		WRITE "<FONT COLOR="_YRED_"><B>"_$$^WWWTEXT(33525,,1)_"</B></FONT>" 
	}
	
	WRITE "</TD>",YCR
	
	;---------------------------------------
	; COLUMN 4 : Quantity On Hand
	;---------------------------------------
	WRITE "<TD VALIGN=TOP"_strBGColour_">"
	WRITE "<FONT SIZE=2>"
	write strWarning
	DO
	. NEW MENGE
	. SET MENGE=$$^INARTMENGE(ART)
	. IF +MENGE>0 WRITE MENGE
	WRITE "&nbsp;"
	WRITE "</TD>",YCR
	
	;---------------------------------------
	; COLUMN 5 : Unit Price (Cost)
	;---------------------------------------
	WRITE "<TD VALIGN=TOP"_strBGColour_">"
	WRITE "<FONT SIZE=2>"
	write strWarning
	WRITE $$^WWWZAHL($$^INARTKOST(ART,1),10,2,YWHR)         ; Cost
	WRITE "&nbsp;"
	WRITE "</TD>",YCR
	
	;---------------------------------------
	; COLUMN 6 : Text
	;---------------------------------------
	WRITE "<TD VALIGN=TOP"_strBGColour_">"
	WRITE "<FONT SIZE=2>"
	write strWarning
	WRITE $TRANSLATE(ItemRemark,"|"," ")
	WRITE "&nbsp;"
	WRITE "</TD>",YCR
	
	;---------------------------------------
	; COLUMN 7 : Supplier
	;---------------------------------------
	WRITE "<TD VALIGN=TOP"_strBGColour_">"
	WRITE "<FONT SIZE=2>"
	write strWarning
	WRITE $TRANSLATE(SupName,"|"," ")
	WRITE "&nbsp;"
	WRITE "</TD>",YCR
	
	WRITE YCR
	WRITE "</TR>"
	QUIT
	
HIDDEN
	;-------------------------------------------------------------------------------
	;	NEU HIDDENFELDER ;new hidden fields 
	;
	; Called By : Form INARTT1 (Parts List for Item Masterfile - AfterButtonLine)
	;
	;-------------------------------------------------------------------------------
	QUIT:$GET(YHTMFORM)'="WWW2"
	
	WRITE YCR,"<INPUT TYPE=HIDDEN NAME=""ITEMS"" VALUE="""">"
	WRITE YCR,"<INPUT TYPE=HIDDEN NAME=""ITEMSQ"" VALUE="""">"
	WRITE YCR,"<INPUT TYPE=HIDDEN NAME=""ITEMBENN"" VALUE="""">"
	WRITE YCR,"<INPUT TYPE=HIDDEN NAME=""ITEMMULN"" VALUE="""">"
	WRITE YCR,"<INPUT TYPE=HIDDEN NAME=""ITEMLNGN"" VALUE="""">"
	WRITE YCR,"<INPUT TYPE=HIDDEN NAME=""ITEMBRTN"" VALUE="""">"
	WRITE YCR,"<INPUT TYPE=HIDDEN NAME=""ITEMHOEN"" VALUE="""">"
	QUIT
	
]]></Routine>
</Export>