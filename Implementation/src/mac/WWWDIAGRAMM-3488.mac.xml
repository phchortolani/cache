<?xml version="1.0" encoding="UTF-8"?>
<Export generator="Cache" version="22" zv="CACHE" ts="2001-01-01 00:00:00">
<Routine name="WWWDIAGRAMM" type="MAC" languagemode="0" timestamp="58440,0"><![CDATA[
WWWDIAGRAMM(TOP,LEFT,HI,WI,ROWS,COL,DATA,DATA1,COLORCOL,RCOLOR,RCOLOR2,NAME,TEXT,RLINK,HNAMES,TLEGEND,CLICKREF,COLOMDAY,CLICKKEY,COMBINED)
	;/------------------------------------------------------------------\
	; Description of Function :
	;		SHOW DIAGRAMM
	;	DO ^WWWDIAGRAMM(0,0,200,600,20,YFELD,"#008800","jg","Anzeige Mannstunden")    ;
	;
	; Inputs : 
	;
	;
	; ByRef :
	;
	;
	; Returns :
	;
	;
	; History :
	; BEC	15.08.03
	;\------------------------------------------------------------------/
	NEW FACT,YI,BIG,WIDTH,HEIGHT,FONTSIZE,NAMES
	
	SET TOP =+$JUSTIFY($GET(TOP),0,0)    ;TOP POSIOTION OF THE DIAGRAMM,ABSTAND VOM RAND
	SET LEFT=+$JUSTIFY($GET(LEFT),0,0)   ;LEFT POSITION,ABSTAND VOM LINKEN RAND
	SET HI=$GET(HI)  	;HEIGTH OF DIAGRAMM IN PX ;within 
	SET WI=$GET(WI)   	;WIDTH OF DIAGRAMM IN PX ;within 
	SET COL=$GET(COL)	;NUMBERS OF COLUMNS
	SET ROWS=+$GET(ROWS)	;NUMBERS OF DATA ROWS 0 = DYN. ANSPASSEN
	SET DATA=$GET(DATA)      ;DATA OF COLUMS->HEIGTH OF THE COLUMS, SPERATED BY Y E.G. (10~20~..)
	SET DATA1=$GET(DATA1)    ;DATEN FÜR REFERENZLINIE   ;to 
	SET RCOLOR=$GET(RCOLOR)    ;COLOR OF THE REFERENZLINE
	SET RCOLOR2=$GET(RCOLOR2)   ;COLOR OF THE BOXES OVER THE REFERENZ LINE ;reference 
	IF RCOLOR=""  SET RCOLOR="red"
	IF RCOLOR2="" SET RCOLOR2="red"
	SET RLINK=$GET(RLINK)        ;=1 REFERZLINIE ÄNDERN ;alter 
	SET HNAMES=$GET(HNAMES)		  ;NAME OF THE HISTOGRAMM SCALE
	SET TLEGEND=$GET(TLEGEND)        ;=1 LEGENDE IMMER SICHTBAR ;legend constantly conspicuous 
	IF +LEFT<150 SET TLEGEND=""         ;WENN ZU KLEIN DANN TOOLTIP ;when within wee 
	SET COLORCOL=$GET(COLORCOL)  	;COLOR FOR THE COLUM
	IF COLORCOL="" SET COLORCOL="blue"
	SET FONTSIZE=7   ;SCHRIFTGRÖßE IN PIXEL ;within 
	SET CLICKKEY=$GET(CLICKKEY)     ;KEY BEI ONCLICK REFERENZLINIE ;KEY next to 
	SET CLICKREF=$GET(CLICKREF)   ;FORMULAR BEI ONCLICK DER REFERENZLINIE ;form next to the 
	SET COLOMDAY=$GET(COLOMDAY)   ;ANZAHL DER PALTEN PRO TAG ;Number the within TAG 
	SET COMBINED=$GET(COMBINED)  ;COMBINED COLUMNS
	SET NAME=$GET(NAME)     		;NAME OF THE DIAGRAMM OBJECT (e.g jg
	SET TEXT=$GET(TEXT)   			;ÜBERSCHRIFT DIAGRAMM ;superscription 
	IF NAME="" SET NAME=YUSER
	IF ROWS'=0 IF +ROWS<11 SET ROWS=11  ;MIN. GRÖSSE ;m. 
	IF ROWS=0 DO
	. FOR YI=1:1:COL DO   ;GRÖSSTEN WERT ERMITTELN WENN KEINE MAXIMALWERTE ANGEGEBEN SIND ;worthy find when no 
	. . IF +$PIECE(DATA,Y,YI)>ROWS SET ROWS=$PIECE(DATA,Y,YI)
	
	SET ROWS=$JUSTIFY(((ROWS/2)*3),0,0)
	SET FACT=0   	;FACTOR ERMITTELN ;find 
	IF +ROWS'=0 SET FACT=$JUSTIFY((HI/ROWS),0,10)
	;SCALA ERSTELLEN
	IF +$GET(LEFT)'=0 DO
	. WRITE YCR,"<div id="_""""_"scale"_NAME_""""
	. WRITE " style="_""""
	. WRITE " position:absolute;"
	. WRITE " height:"_+HI_"px;"
	. WRITE " width:"_+LEFT_"px;"
	. IF TOP'=0 WRITE " top:"_TOP_";"
	. WRITE " left:"_0_";"
	. WRITE " z-index:110;"
	. WRITE """"
	. IF TLEGEND'=1  DO LINK^WWWTOOLTIP("LEGENDE")
	. WRITE ">"
	. WRITE "&nbsp;"
	. WRITE "</div>"  ;ENDE SCALA  ;termination 
	. ;
	. ;ZEICHNEN SCALA ;drawing 
	. IF +ROWS'=0 DO
	. . NEW XLIN,YLIN,YI,SIZE,TEXT,FONT,SCALE,SCALE2
	. . SET SCALE=ROWS\10
	. . IF ROWS>999 SET SCALE=ROWS\5
	. . IF ROWS>99999 SET SCALE=ROWS\2
	. . SET SCALE=(SCALE\5)*5
	. . SET SCALE2=(SCALE\5)
	. . IF SCALE2<1 SET SCALE2=1
	. . IF SCALE<5 SET SCALE=5
	. . FOR YI=0:1:ROWS DO
	. . . IF YI=0 SET XLIN=(TOP+HI)
	. . . IF YI>0 SET XLIN=$JUSTIFY((TOP+HI)-(YI*FACT),0,0)
	. . . SET SIZE=10
	. . . IF YI#SCALE=0 SET SIZE=15
	. . . SET YLIN=LEFT-SIZE
	. . . IF YLIN<0 SET YLIN=0
	. . . IF YI#SCALE2=0 DO LINIE($JUSTIFY((XLIN),0,0),$JUSTIFY((YLIN),0,0),SIZE,1)
	. . . IF YI#SCALE=0 IF (LEFT-SIZE)>0 DO
	. . . . SET TEXT=YI
	. . . . SET FONT=8
	. . . . IF YI'=0 IF YI'=ROWS DO STRING1($JUSTIFY((XLIN-((FONT+2)\2)),0,0),$JUSTIFY((YLIN-($LENGTH(TEXT)*FONT)),0,0),TEXT)
	. . . . ;IF YI=0 DO STRING1($JUSTIFY((XLIN-(FONT+4)),0,0),$JUSTIFY((YLIN-($LENGTH(TEXT)*FONT)),0,0),TEXT)
	. . . . IF YI=0 IF HNAMES'="" DO STRING1($JUSTIFY((XLIN-($LENGTH($PIECE(HNAMES,Y,1))*FONT)-15),0,0),$JUSTIFY((YLIN-20-($LENGTH(ROWS)*FONT)),0,0),$PIECE(HNAMES,Y,1),,,,,1,)
	. ;
	. IF HNAMES'="" DO 
	. . NEW LEGENDE,TD,BORDER
	. . SET TD="<TD STYLE="_""""_ "text-align:middle; font:"_FONTSIZE_"pt arial; height:22px;"
	. . SET TD=TD_""""_">"
	. . SET LEGENDE="<U STYLE="_""""_ " text-align:middle; font:"_FONTSIZE_"pt arial;"_""""_" >"_$$^WWWTEXT(33623)_"</FONT></U><BR>"
	. . SET LEGENDE=LEGENDE_" <TABLE BORDER=0 CELLSPACING=0>"
	. . SET LEGENDE=LEGENDE_" <TR><TD><HR style="_""""_"border-style:dashed; height:3; border-color:"_RCOLOR_"; width:15px;"_""""_"></TD>"  ;FARBE KAP GRENZE GESTRICHELT
	. . SET LEGENDE=LEGENDE_TD_$PIECE(HNAMES,Y,5)_"</TD></TR>"
	. . SET LEGENDE=LEGENDE_" <TR><TD><HR style="_""""_"border-style:solid; height:3; border-color:"_RCOLOR_"; width:15px;"_""""_"></TD>"  ;FARBE KAP GRENZE 
	. . SET LEGENDE=LEGENDE_TD_$PIECE(HNAMES,Y,3)_"</TD></TR>"
	. . SET LEGENDE=LEGENDE_" <TR><TD><HR style="_""""_"border-style:solid; height:8; border-color:"_RCOLOR2_"; width:10px;"_""""_"></TD>"  ;FARBE KAP GRENZE GESTRICHELT
	. . SET LEGENDE=LEGENDE_TD_$PIECE(HNAMES,Y,4)_"</TD></TR>"  ;ÜBER DATA1 ;via 
	. . SET LEGENDE=LEGENDE_" <TR><TD><HR style="_""""_"border-style:solid; height:8; border-color:"_COLORCOL_"; width:10px;"_""""_"></TD>"  ;FARBE KAP GRENZE GESTRICHELT
	. . SET LEGENDE=LEGENDE_TD_$PIECE(HNAMES,Y,2)_"</TD></TR>"   ;LEGENDE DATA ;legend 
	. . SET LEGENDE=LEGENDE_" </TABLE>"
	. . NEW TTCOLOR
	. . ;SET TTCOLOR="white"
	. . SET TTCOLOR=YDARKGRAY
	. . IF +TLEGEND=0 SET TTCOLOR=""
	. . SET BORDER=""
	. . IF TLEGEND=1 SET BORDER="none"
	. . DO ^WWWTOOLTIP(LEGENDE,TOP+((HI-120)/2)+2,((HI-120)/2)+2,"LEGENDE",110,,,TTCOLOR,TLEGEND,BORDER)   ;TOLLTIP FENSTER ERSTELLEN  ;window 
	. . ;SET HNAME=$$^WWWTEXT($PIECE(HNAMES,Y,1))
	. . ;SET HNAME=$PIECE(HNAMES,Y,1)
	. . ;IF (+LEFT-20)>($LENGTH(HNAME)*5) DO STRING1(TOP+2,(LEFT-($LENGTH(HNAME)*5)-20),HNAME,)
	
	;NEUES DIV ERSTELLEN ;something new 
	WRITE YCR
	WRITE YCR,"<div id="_""""_"chart"_NAME_""""
	WRITE " style="_""""
	IF (TOP'=0)!(LEFT=0) WRITE " position:absolute;"
	IF TOP=0 IF LEFT=0   WRITE " position:relative;"
	IF TOP'=0  WRITE " top:"_TOP_";"
	IF LEFT'=0 WRITE " left:"_LEFT_";"
	WRITE " height:"_+HI_"px;"
	WRITE " width:"_+WI_"px;"
	WRITE " z-index:100;"
	WRITE """"_">" 
	
	NEW SBREITE,SPALTE,YVER,YVERALT,ANZ,YI
	
	SET SBREITE=0
	IF +COL'=0 SET SBREITE=$JUSTIFY(WI/COL,0,0)
	;ZEICHEN RECHTECKE DATA ;sign 
	
	NEW X1,Y1,W,H,YVER,SKORR
	
	FOR SPALTE=1:1:COL DO
	. IF $PIECE($GET(DATA1),Y,SPALTE)'="X" SET YVER=HI-$JUSTIFY(($PIECE(DATA,Y,SPALTE)*FACT),0,0)  ;FIS;05.01.05;WENN X, DANN KEINE AUSLASTUNG
	. IF $PIECE($GET(DATA1),Y,SPALTE)="X"  SET YVER=HI  ;FIS;05.01.05;WENN X, DANN KEINE AUSLASTUNG
	. DO   ;RECHTECK MIT FÜLLUNG ;rectangle by means of stuffing 
	. . SET X1=((SPALTE-1)*SBREITE)+2
	. . SET Y1=+$GET(YVER)
	. . SET SKORR=4
	. . IF +COMBINED'=0 IF SPALTE#COMBINED'=0 SET SKORR=0  ;NO SPACE BETWEEN COMBINED COLUMNS;FIS;15.10.04;26371
	. . SET W=(SBREITE-SKORR)
	. . SET H=(-YVER+HI)
	. . IF H'>0 SET H=1
	. . ;IF $PIECE($GET(DATA1),Y,SPALTE)="X" SET H=0
	. . DO RECHTECK("COLSP"_SPALTE,COLORCOL,10050,X1,Y1,W,H,)
	
	;DATEN ÜBER REFERENZLINIE LINIE ;via
	IF $GET(DATA1)'="" DO
	. NEW VERALT,DY,DY1,SKORR
	. SET YVERALT=HI
	. FOR SPALTE=1:1:COL DO    ;DATEN ÜBER REFERENZLINIE LINIE ;via
	. . IF $PIECE(DATA1,Y,SPALTE)<0 SET $PIECE(DATA1,Y,SPALTE)=0  ;KEINE NEGATIVEN LINIEN ;no 
	. . DO
	. . . SET X1 = (((SPALTE-1)*SBREITE)+2)
	. . . SET Y1 = HI-$JUSTIFY(($PIECE($GET(DATA),Y,SPALTE)*FACT),0,0)
	. . . SET H  = $JUSTIFY(($PIECE($GET(DATA),Y,SPALTE)-$PIECE($GET(DATA1),Y,SPALTE))*FACT,0,0)
	. . . ;SET W=(SBREITE-4) ;table-mat 
	. . . SET SKORR=4
	. . . IF +COMBINED'=0 IF SPALTE#COMBINED'=0 SET SKORR=0  ;NO SPACE BETWEEN COMBINED COLUMNS;FIS;15.10.04;26371
	. . . SET W=(SBREITE-SKORR)
	. . . IF $PIECE(DATA1,Y,SPALTE)="X" SET H=0  ;FIS;05.01.05;WENN X, DANN KEINE AUSLASTUNG
	. . . DO RECHTECK("COLOVER"_SPALTE,RCOLOR2,1100,X1,Y1,W,H)
	. . . QUIT
	. . SET YVERALT=+$GET(YVER)
	. . QUIT
	. SET YVERALT=HI
	. FOR SPALTE=1:1:COL DO    ;REFERENZLINIE LINIE
	. . SET YVER=HI-$JUSTIFY(($PIECE(DATA1,Y,SPALTE)*FACT),0,0)
	. . IF $PIECE(DATA1,Y,SPALTE)'="X" SET YVER=HI-$JUSTIFY(($PIECE(DATA1,Y,SPALTE)*FACT),0,0)  ;FIS;05.01.05;WENN X, DANN KEINE AUSLASTUNG
	. . IF $PIECE(DATA1,Y,SPALTE)="X" SET YVER=HI  ;FIS;05.01.05;WENN X, DANN KEINE AUSLASTUNG
	. . DO  		;LINIE
	. . . SET BIG1=0   ;WENN WERT ZU GROSS ;when worthy within 
	. . . ;IF $PIECE(DATA1,Y,SPALTE)>ROWS SET YVER=ROWS SET BIG1=1
	. . . IF $PIECE(DATA1,Y,SPALTE)>ROWS SET BIG1=1 SET YVER=(HI-$JUSTIFY((ROWS*FACT)-5,0,0))  ;FIS;15.10.04
	. . . ;HORIZONTAL
	. . . SET X1=(((SPALTE-1)*SBREITE))
	. . . SET Y1=(+$GET(YVER))
	. . . SET H=SBREITE
	. . . IF SPALTE'=COL SET H=SBREITE+2
	. . . SET W=2
	. . . SET TYP=""
	. . . IF BIG1=1 DO
	. . . . SET TYP=1
	. . . . IF SPALTE'=COL SET H=SBREITE+2
	. . . . QUIT
	. . . NEW LINKTEXT
	. . . SET LINKTEXT=""
	. . . IF RLINK=1 DO   ;SETZEN LINK FÜR REFERENRLINIE ZU ÄNDERN ;typeset to within alter 
	. . . . ;SET LINK="#"
	. . . . SET LINKTEXT=$JUSTIFY(($PIECE(DATA1,Y,SPALTE)*COLOMDAY),0,1)
	. . . . SET LINKTEXT=$$^WWWZAHL(LINKTEXT,$LENGTH(LINKTEXT),1)
	. . . . IF LINKTEXT<0 SET LINKTEXT=0
	. . . . SET LINKTEXT=$$^WWWTEXT(32904)_": "_+LINKTEXT_" "_$$^WWWTEXT($PIECE(HNAMES,Y,1))  ; Gesamt Anzahl ;total Number 
	. . . . QUIT
	. . . IF Y1'=0 DO RECHTECK("COLREFH"_SPALTE,RCOLOR,1200,X1,Y1,H,W,,TYP,LINKTEXT,CLICKREF,$PIECE(CLICKKEY,Y,SPALTE)) 
	. . . ;VERTIKAL ;vertical 
	. . . SET X1=((SPALTE-1)*SBREITE)
	. . . SET Y1=+$GET(YVERALT)
	. . . SET H=2
	. . . SET W=$GET(YVER)-$GET(YVERALT)
	. . . IF W<0 DO
	. . . . SET W=-W
	. . . . SET Y1=Y1-W
	. . . . QUIT
	. . . DO RECHTECK("COLREFV"_SPALTE,RCOLOR,1200,X1,Y1,H,W)
	. . . SET YVERALT=+$GET(YVER)
	. . . QUIT
	. . QUIT
	. ;
	. QUIT
	DO RECHTECK("SCALEX","black",1200,0,HI,WI,1)  ;X-ACHSE ZEICHNEN   ;drawing 
	WRITE "</div>"
	QUIT
	
CHANGE(HEIGHT,WIDTH,ROWS,COL,DATA,OLDDATA,DATA1,COMBINED)    ;EINSPRUNG VOM EVENTBROKER ZUM VERÄNDERN DER DATEN ;alter the 
	NEW FACT,YI,VALUE,SBREITE,SPALTE,YVER,YVERALT,SKORR
	SET VALUE=""
	SET HEIGHT=$GET(HEIGHT)  	;HEIGTH OF DIAGRAMM IN PX ;within 
	IF +HEIGHT=0 QUIT VALUE
	SET WIDTH=$GET(WIDTH)   	;WIDTH OF DIAGRAMM IN PX ;within 
	IF +WIDTH=0 QUIT VALUE
	SET COL=$GET(COL)	        ;NUMBERS OF COLUMNS
	IF +COL=0 SET COL=10
	SET ROWS=+$GET(ROWS)	    ;NUMBERS OF DATA ROWS
	SET DATA=$GET(DATA)        ;DATA OF COLUMS->HEIGTH OF THE COLUMS, SPERATED BY Y E.G. (10~20~..)
	SET OLDDATA=$GET(OLDDATA)
	SET DATA1=$GET(DATA1)      ;DATA OF REFERENZLINE 
	SET FACT=0   	            ;FACTOR ERMITTELN ;find 
	IF ROWS'=0 IF +ROWS<11 SET ROWS=11  ;MIN. GRÖSSE ;m. 
	IF ROWS=0 DO
	. FOR YI=1:1:COL DO   ;GRÖSSTEN WERT ERMITTELN WENN KEINE MAXIMALWERTE ANGEGEBEN SIND ;worthy find when no 
	. . IF +$PIECE(DATA,Y,YI)>ROWS SET ROWS=$PIECE(DATA,Y,YI)
	. . QUIT
	. QUIT
	SET ROWS=$JUSTIFY(((ROWS/2)*3),0,0)
	SET FACT=0   	;FACTOR ERMITTELN ;find 
	IF +ROWS'=0 SET FACT=$JUSTIFY((HEIGHT/ROWS),0,10)
	SET SBREITE=$JUSTIFY((WIDTH/COL),0,0)
	SET YVERALT=HEIGHT
	FOR SPALTE=1:1:COL QUIT:$PIECE(DATA,Y,SPALTE,999)=""  DO
	. IF $GET(DATA1)'="" IF $PIECE(DATA1,Y,SPALTE)="X" QUIT 	;FIS;05.01.05;WENN X, DANN KEINE AUSLASTUNG	
	. QUIT:$PIECE(DATA,Y,SPALTE)=$PIECE(OLDDATA,Y,SPALTE)   ;NUR GEÄNDERTE SPALTEN ;only split 
	. ;   
	. ;SETZTEN RECHTECKE NORMAL UNTER REFERENZLINIE ;normal under 
	. DO
	. . NEW ID,X1,Y1,W,H,WKORR
	. . SET YVER=HEIGHT-$JUSTIFY(($PIECE(DATA,Y,SPALTE)*FACT),0,0)
	. . DO
	. . . SET X1=(((SPALTE-1)*SBREITE)+2)
	. . . IF X1<0 SET X1=0
	. . . SET Y1=(+$GET(YVER))
	. . . IF Y1<0 SET Y1=0
	. . . SET SKORR=4
	. . . IF +$GET(COMBINED)'=0 IF SPALTE#COMBINED'=0 SET SKORR=0  ;NO SPACE BETWEEN COMBINED COLUMNS;FIS;15.10.04;26371
	. . . SET W=(SBREITE-SKORR)
	. . . IF W<0 SET W=0
	. . . SET H=(-YVER+HEIGHT)
	. . . IF H>HEIGHT SET H=HEIGHT
	. . . IF H<0 SET H=0
	. . . SET ID="COLSP"_SPALTE
	. . . SET VALUE=VALUE_" setelementposition("_""""_ID_""""_","_""""_$JUSTIFY(Y1,0,0)_""""_","_""""_$JUSTIFY(X1,0,0)_""""_");"      ;ÄNDER POSITION
	. . . SET VALUE=VALUE_" setelementsize("_""""_ID_""""_","_""""_$JUSTIFY(H,0,0)_""""_","_""""_$JUSTIFY(W,0,0)_""""_");"       ;ÄNDER GRÖßE
	. ;
	. ;DATEN ÜBER REFERENZLINE (ANDERE FARBE) ;via 
	. IF $GET(DATA1)'="" DO
	. . DO
	. . . IF $PIECE(DATA1,Y,SPALTE)="X" QUIT 		;FIS;05.01.05;WENN X, DANN KEINE AUSLASTUNG
	. . . IF $PIECE($GET(DATA1),Y,SPALTE)<$PIECE($GET(DATA),Y,SPALTE) DO    ;RECHTECKE IN ANDERER FARBE über line ;within other tincture via 
	. . . . SET ID="COLOVER"_SPALTE
	. . . . SET X1=(((SPALTE-1)*SBREITE)+2)
	. . . . IF X1<0 SET X1=0
	. . . . SET Y1=+(HEIGHT-(+$PIECE($GET(DATA),Y,SPALTE)*FACT))
	. . . . IF Y1<0 SET Y1=0
	. . . . ;SET W=(SBREITE-4) ;table-mat 
	. . . . SET SKORR=4
	. . . . IF +$GET(COMBINED)'=0 IF SPALTE#COMBINED'=0 SET SKORR=0  ;NO SPACE BETWEEN COMBINED COLUMNS;FIS;15.10.04;26371
	. . . . SET W=(SBREITE-SKORR)
	. . . . IF W<0 SET W=0
	. . . . SET H=(+$PIECE($GET(DATA),Y,SPALTE)-$PIECE($GET(DATA1),Y,SPALTE))*FACT
	. . . . IF H<0 SET H=0
	. . . . SET VALUE=VALUE_" setelementposition("_""""_ID_""""_","_""""_$JUSTIFY(Y1,0,0)_""""_","_""""_$JUSTIFY(X1,0,0)_""""_");" 
	. . . . SET VALUE=VALUE_" setelementsize("_""""_ID_""""_","_""""_$JUSTIFY(H,0,0)_""""_","_""""_$JUSTIFY(W,0,0)_""""_");" 
	. . . ;
	. . . IF $PIECE($GET(DATA1),Y,SPALTE)'<$PIECE($GET(DATA),Y,SPALTE) DO    ;RECHTECKE VERKLEINERN
	. . . . SET ID="COLOVER"_SPALTE
	. . . . SET SKORR=4
	. . . . IF +$GET(COMBINED)'=0 IF SPALTE#COMBINED'=0 SET SKORR=0  ;NO SPACE BETWEEN COMBINED COLUMNS;FIS;15.10.04;26371
	. . . . SET W=(SBREITE-SKORR)
	. . . . IF W<0 SET W=0
	. . . . SET VALUE=VALUE_" setelementsize("_""""_ID_""""_","_""""_0_""""_","_""""_$JUSTIFY(W,0,0)_""""_");" 
	. . . ;
	. . . SET YVERALT=+$GET(YVER)
	
	QUIT VALUE
	
RECHTECK(ID,COLOR,INDEX,X1,Y1,W,H,HID,TYP,LINKTEXT,CLICKREF,CKEY)   ;ZEICHNEN RECHTECK ;drawing rectangle 
	SET ID=$GET(ID)  ;ID FÜR DIV ;ID to 
	SET COLOR=$GET(COLOR)  ;
	SET X1=$GET(X1)  ;X KOORDINATEN
	SET Y1=$GET(Y1)  ;Y KOORDINATEN
	SET W=$GET(W)    ;BREITE ;width 
	SET H=$GET(H)    ;HOEHE
	SET HID=$GET(HID)  ;HIDDEN
	SET TYP=$GET(TYP)    ;LINIENART, 1=DOOTET, "" =DURCHGEZOGEN
	SET INDEX=$GET(INDEX)
	IF INDEX="" SET INDEX=100
	SET LINKTEXT=$GET(LINKTEXT)
	SET CLICKREF=$GET(CLICKREF)
	S CKEY=$G(CKEY)
	IF LINKTEXT'="" IF CLICKREF'="" DO  ;LINK SETZTEN
	. DO
	. . WRITE YCR,"<A HREF="_""""
	. . WRITE YCR, YAKTION_"EP=WWWFORM&amp;YFORM="_CLICKREF_"&amp;YKEY="_CKEY
	. . DO ^WWWCGI
	. . ; 
	. . WRITE """"
	. . WRITE " TARGET="_""""_$G(YTARGET)_"""" 
	. . WRITE YCR,">"
	. . QUIT
	. QUIT
	IF $GET(LINKTEXT)'="" DO ^WWWTOOLTIP($GET(LINKTEXT),Y1,(X1+30),"TOOL"_ID,20,($LENGTH(LINKTEXT)*5)+15)   ;TOLLTIP FENSTER ERSTELLEN  ;window 
	WRITE YCR,"<div id="_""""_ID_""""
	WRITE " style="_""""
	WRITE " position:absolute;"
	IF TYP'=1 WRITE " border-left:"_W_"px solid "_COLOR_";"
	IF TYP=1 DO
	. WRITE " border-left:"_W_"px "_COLOR_";"
	. WRITE " border-style: dashed ;" 
	. QUIT
	IF LINKTEXT'="" WRITE " cursor:pointer;"		;SR17253
	WRITE " border-color: "_COLOR_" ;" 
	WRITE " background-color:"_COLOR_";"
	WRITE " top:"_Y1_"px;"
	WRITE " left:"_X1_"px;"
	WRITE " height:"_H_"px;"
	WRITE " width:"_W_"px;"
	WRITE " clip:rect(0,"_W_"px,"_H_"px,0);"
	WRITE " text-align:left;"
	WRITE " font:8pt arial;"
	IF HID=1 WRITE " overflow:hidden;"
	IF HID=1 WRITE " visibility:hidden;"
	WRITE " z-index:"_100_";"
	WRITE """"
	IF $GET(LINKTEXT)'="" DO LINK^WWWTOOLTIP("TOOL"_ID)
	WRITE YCR, ">"
	WRITE YCR,"</div>"
	IF CLICKREF'="" WRITE "</A>"
	QUIT
	
LINIE(TOP,LEFT,WIDTH,WEIGHT,COLOR,STYLE)   ;ZEICHNEN LINIE ;drawing 
	SET TOP=+$GET(TOP)  ;X KOORDINATEN
	SET LEFT=+$GET(LEFT)  ;Y KOORDINATEN
	SET WIDTH=+$GET(WIDTH)    ;BREITE ;width 
	IF WIDTH=0 QUIT
	SET COLOR=$GET(COLOR)  ;LINIENFARBE
	IF COLOR="" SET COLOR="black"
	SET WEIGHT=+$GET(WEIGHT)    ;HOEHE
	IF WEIGHT'>0 SET WEIGHT=1
	SET STYLE=$GET(STYLE)  ;HIDDEN
	IF STYLE="" SET STYLE="solid"  ;durchgezogen
	WRITE YCR,"<div"
	WRITE " style="_""""
	WRITE " position:absolute;"
	WRITE " top:"_TOP_";"
	WRITE " left:"_LEFT_";"
	WRITE " border-top:"_WEIGHT_"px "_STYLE_" "_COLOR_";"
	WRITE " height:"_WEIGHT_"px;"
	WRITE " width:"_WIDTH_"px;"
	WRITE " background-color:"_COLOR_";"
	;WRITE " clip:rect(0,"_WIDTH_"px,"_WEIGHT_"px,0);"
	WRITE " z-index:"_100_";"
	WRITE " overflow:hidden;"
	WRITE """"
	WRITE ">"
	WRITE "&nbsp;"
	WRITE "</div>"
	QUIT
	
STRING1(TOP,LEFT,TEXT,COLOR,SIZE,STYLE,IDTOOLTIP,HOCHKANT,WEIGHT)   ;ZEICHNEN TEXT ;drawing Text 
	SET TOP=+$GET(TOP)  ;X KOORDINATEN
	SET LEFT=+$GET(LEFT)  ;Y KOORDINATEN
	SET SIZE=+$GET(SIZE)    ;SCHRIFT-GROESSE
	IF SIZE=0 SET SIZE=8
	SET TEXT=$GET(TEXT)    ;SCHRIFT-GROESSE
	SET WIDTH=($LENGTH(TEXT)*SIZE)+4    ;BREITE ;width 
	SET HEIGHT=($LENGTH(TEXT)*SIZE)+4 
	SET COLOR=$GET(COLOR)  ;LINIENFARBE
	IF COLOR="" SET COLOR="black"
	SET STYLE=$GET(STYLE)
	IF STYLE="" SET STYLE="arial"
	SET IDTOOLTIP=$GET(IDTOOLTIP)
	SET HOCHKANT=$GET(HOCHKANT)
	WRITE YCR,"<div"
	WRITE " style="_""""
	WRITE " position:absolute;"
	WRITE " top:"_TOP_";"
	WRITE " left:"_LEFT_";"
	WRITE " border:none;"
	WRITE " background-color:none;"
	WRITE " color:"_COLOR_";"
	WRITE " font:"_SIZE_"pt "_STYLE_";"
	IF $GET(WEIGHT)'="" WRITE " font-weight:"_WEIGHT_";"
	WRITE " height:"_HEIGHT_"px;"
	WRITE " width:"_WIDTH_"px;"
	WRITE " text-align:left;"
	WRITE " vertical-align:middle;"
	;WRITE " clip:rect(0,"_WIDTH_"px,"_WEIGHT_"px,0);"
	WRITE " z-index:"_100_";"
	WRITE " overflow:hidden;"
	IF HOCHKANT=1 WRITE " writing-mode:tb-rl; filter:flipH() flipV();"
	WRITE """"
	IF IDTOOLTIP'="" DO LINK^WWWTOOLTIP(IDTOOLTIP)
	WRITE ">"
	WRITE TEXT
	WRITE "</div>"
	QUIT
]]></Routine>
</Export>