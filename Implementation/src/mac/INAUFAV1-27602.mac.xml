<?xml version="1.0" encoding="UTF-8"?>
<Export generator="Cache" version="22" zv="CACHE" ts="2001-01-01 00:00:00">
<Routine name="INAUFAV1" type="MAC" languagemode="0" timestamp="58440,0"><![CDATA[
INAUFAV1    ;INAUFAV1;DT;DRUCKEN/WIEDERHOLEN LIEFERAVICE;14.08.2000
	;
	;/------------------------------------------------------------------\
	;| Description of Function :
	;|		DRUCKEN/WIEDERHOLEN LIEFERAVICE
	;|
	;| Inputs : 
	;|
	;|
	;| ByRef :
	;|
	;|
	;| Returns :
	;|
	;|
	;| History :
	;|
	;| DT	14.08.2000
	;\------------------------------------------------------------------/
	NEW POS,YAUFTRAG,WH
	
	IF $PIECE($GET(YKEY),",",1)="" DO ^WWWFORM QUIT   ;KEIN KEY ENTHALTEN ;no KEY include 
	
	SET YAUFTRAG = $PIECE($GET(YKEY),",",1)
	QUIT:$PIECE($GET(^INAUF(YM,YAUFTRAG,1)),Y,2)'=0  ;NUR KUNDENAUFTRÃ„GE ;only 
	
	SET WH=""
	SET POS=""
	FOR  SET POS = $ORDER(^INAUFP(YM,YAUFTRAG,POS)) QUIT:POS=""  DO  QUIT:WH="X"
	. IF +$PIECE($GET(^INAUFP(YM,YAUFTRAG,POS,1)),Y,7)=0 S WH="X"
	
	IF WH="X" DO ^WWWINFO($$^WWWTEXT(32076)) QUIT  ;NICHT ALLE WH ERFASST ;Not
	 
	;ZUSAMMENSTELLEN LIEFERUNG
	IF $PIECE($GET(YKEY),",",2)="" DO  IF $ORDER(YAUFTRAG(""))="" DO ^WWWINFO($$^WWWTEXT(32295)_" / "_$$^WWWTEXT(10004)) QUIT  ;SCHON GEDRUCKT ;yet 
	. SET POS=""
	. FOR  SET POS=$ORDER(^INAUFP(YM,YAUFTRAG,POS)) QUIT:POS=""  DO
	. . IF +$PIECE($GET(^INAUFP(YM,YAUFTRAG,POS,1)),Y,90)=1 SET YAUFTRAG(POS)="" QUIT
	. . IF +$PIECE($GET(^INAUFP(YM,YAUFTRAG,POS,1)),Y,7)=2  SET YAUFTRAG(POS)="" QUIT
	. . IF +$PIECE($GET(^INAUFP(YM,YAUFTRAG,POS,1)),Y,7)=4  SET YAUFTRAG(POS)="" QUIT
	
	IF $PIECE($GET(YKEY),",",2)'="" SET YAUFTRAG($PIECE($GET(YKEY),",",2))=""
	SET YBELEG=5
	IF $GET(YCOPY)="" SET YCOPY=0  ;KEINE WIEDERHOLUNGSDRUCK ;no 
	DO ^INDRUCK     ;DRUCK ;printing 
	DO ^INDRUCKZHD  ;DRUCK KOPIE ZU ANSPRECHENPATNER     ;FAN;13.03.2003;23059
	QUIT
	
GESAMT ; EINSPRUNG GESAMT ;total 
	SET YCOPY=0
	SET ^WWW126(YM,"INAUF",YBED,1,1)=$PIECE($G(YKEY),",",1)
	DO INAUFAV1
	QUIT
	
WIEDERHOLUNG    ;  EINSPRUNG MIT WIEDERHOLUNG (OHNE BUCHEN) ;by means of repetition 
	SET YCOPY=1
	SET ^WWW126(YM,"INAUF",YBED,1,1)=$PIECE($G(YKEY),",",1)
	DO INAUFAV1
	QUIT     
	
MAIL ;SEND VIA MAIL  / EINSPRUNG VON DRUCKFORMULAR
	SET YSEND=1  ;MAIL
	SET YCOPY=0
	SET ^WWW126(YM,"INAUF",YBED,1,1)=$PIECE($GET(YKEY),",",1)
	DO INAUFAV1
	QUIT   
	
XML ;SEND VIA XML  / EINSPRUNG VON DRUCKFORMULAR
	SET YSEND=3  ;XML
	SET YCOPY=0
	SET ^WWW126(YM,"INAUF",YBED,1,1)=$PIECE($GET(YKEY),",",1)
	DO INAUFAV1
	QUIT         
	
EDI ;SEND VIA EDI  / EINSPRUNG VON DRUCKFORMULAR
	SET YSEND=4  ;EDI
	SET YCOPY=0
	SET ^WWW126(YM,"INAUF",YBED,1,1)=$PIECE($GET(YKEY),",",1)
	DO INAUFAV1
	QUIT            
	
EDIP ;SEND VIA EDIPRO  / EINSPRUNG VON DRUCKFORMULAR
	SET YSEND=6  ;EDI
	SET YCOPY=0
	SET ^WWW126(YM,"INAUF",YBED,1,1)=$PIECE($GET(YKEY),",",1)
	DO INAUFAV1
	QUIT            
	
FTP ;SEND VIA FTP  / EINSPRUNG VON DRUCKFORMULAR
	SET YSEND=5  ;FTP
	SET YCOPY=0
	SET ^WWW126(YM,"INAUF",YBED,1,1)=$PIECE($GET(YKEY),",",1)
	DO INAUFAV1
	QUIT         
	
FAX ;SEND VIA FAX  / EINSPRUNG VON DRUCKFORMULAR
	SET YSEND=2  ;FAX
	SET YCOPY=0
	SET ^WWW126(YM,"INAUF",YBED,1,1)=$PIECE($GET(YKEY),",",1)
	DO INAUFAV1
	QUIT 
	
PDF ;SEND VIA PDF  / EINSPRUNG VON DRUCKFORMULAR
	SET YSEND=7  ;PDF
	SET YCOPY=0
	SET ^WWW126(YM,"INAUF",YBED,1,1)=$PIECE($GET(YKEY),",",1)
	DO INAUFAV1
	QUIT 
	
STDIF ;SEND VIA STD. INTERFACE  / EINSPRUNG VON DRUCKFORMULAR    ;FIS;23.02.04;25177
	SET YSEND=9  ;STANDARDSCHNITTSTELLE
	SET YCOPY=0
	SET ^WWW126(YM,"INAUF",YBED,1,1)=$PIECE($GET(YKEY),",",1)
	DO INAUFAV1
	QUIT
]]></Routine>
</Export>