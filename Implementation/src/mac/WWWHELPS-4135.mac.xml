<?xml version="1.0" encoding="UTF-8"?>
<Export generator="Cache" version="22" zv="CACHE" ts="2001-01-01 00:00:00">
<Routine name="WWWHELPS" type="MAC" languagemode="0" timestamp="58440,0"><![CDATA[
WWWHELPS ;WWWHELPS;DT;SUCHEN IN HILFETEXTEN;20.01.2001
	;
	;/------------------------------------------------------------------\
	;| Description of Function :
	;|		SUCHEN IN HILFETEXTEN
	;|
	;| Inputs : 
	;|
	;|
	;| ByRef :
	;|
	;|
	;| Returns :
	;|
	;|
	;| History :
	;|
	;| DT	20.01.2001
	;|
	;\------------------------------------------------------------------/
	;
	; VORG(1)=SUCHFUNKTION  (AUS FORMDEFINITION)
	; VORG(2)=1 IN FORMULARNAMEN SUCHEN  ;within seek 
	; BEC: GEÄNDERT 03.03.03 DAS DER TITEL, FORMULAR UND FELDNAME AUCH SPRACHENABHÄNIG ANGEZEIGT WIRD  
	SET VORG(1)=$G(VORG(1))
	SET VORG(2)=$G(VORG(2))
	;AUFRUF VIA FORMULARGENERATOR BEI SAVE = #D ^WWWHELPS
	;AUFRUF NACH DATENFELD (VORG(1)=SUCHSTRING) D SUCH^WWWHELPS
	SET %("VAR","YBACK")=""
	SET %("VAR","YAUSWAHL")="#"_VORG(1)_"#"_VORG(2)
	SET %("VAR","YFORM")=YFORM
	DO ^WWWFORM
	QUIT
	
SUCH ;ANZEIGE SUCHFUNKTION ;Show 
	NEW I,FORM,FELD,FART,TEXT,TEXT1,YDATEI,LFN1,FNAME
	;SET VORG(1)=$EXTRACT(YAUSWAHL,2,99)
	SET VORG(1)=$P(YAUSWAHL,"#",2)
	SET VORG(2)=$P(YAUSWAHL,"#",3)
	SET YDDSATZ=0   ;VARIABEL ZUR HELL DUNKELSCHALTUNG ;bright 
	WRITE YCR
	IF VORG(1)'="" WRITE $$^WWWTEXT(148)_": "_VORG(1) 
	WRITE "<BR>"
	;kopf
	DO ^WWWFRAME(0)  ;TABLE AN  ;upon 
	IF $F(","_YBEDBER_",",",1,") DO  ;NUR WENN SYSADMIN ;only when 
	. WRITE "<TH VALIGN=TOP NOWRAP VALIGN=TOP align=LEFTNO ALIGN=LEFT"
	. WRITE " BGCOLOR="_YDARKGRAY
	. WRITE ">"
	. WRITE "<FONT SIZE=2>"
	. WRITE $$^WWWTEXT(93)  ;FORMULAR ;form 
	. WRITE "</TH>"
	. WRITE YCR
	. Q
	WRITE "<TH VALIGN=TOP NOWRAP VALIGN=TOP align=LEFT ALIGN=LEFT"
	WRITE " BGCOLOR="_YDARKGRAY
	WRITE ">"
	WRITE "<FONT SIZE=2>"
	WRITE $$^WWWTEXT(31)  ;NAME
	WRITE "</TH>"
	WRITE YCR
	WRITE "<TH VALIGN=TOP ALIGN=LEFT"
	WRITE " BGCOLOR="_YDARKGRAY
	WRITE ">"
	WRITE "<FONT SIZE=2>"
	WRITE $$^WWWTEXT(283)  ;DATENFELDER
	WRITE "</TH>"
	WRITE YCR
	WRITE "<TH VALIGN=TOP VALIGN=TOP align=LEFT ALIGN=LEFT"
	WRITE " BGCOLOR="_YDARKGRAY
	WRITE ">"
	WRITE "<FONT SIZE=2>"
	WRITE $$^WWWTEXT(92)  ;HILFETEXT
	WRITE "</TH>"
	WRITE YCR
	WRITE "</TR>"
	SET ANZM=0
	;SUCHEN HIFETEXT ;seek 
	IF VORG(1)'="" DO
	. SET FORM="" FOR  SET FORM=$ORDER(^WWW127(0,FORM)) QUIT:FORM=""  DO  QUIT:ANZM>100
	. . IF VORG(2)=1 IF FORM'="" IF VORG(1)'=""  DO        ;SUCHEN IN FORMULARNAME ;seek within 
	. . . IF $DATA(^WWW1201(0,FORM,SPRACHE,1)) SET FNAME=$GET(^WWW1201(0,FORM,SPRACHE,1)) 
	. . . IF '$DATA(^WWW1201(0,FORM,SPRACHE,1)) SET FNAME=$GET(^WWW120(0,FORM,1))
	. . . IF $FIND($$^WWWUMLAU($PIECE(FNAME,Y,1),1),$$^WWWUMLAU(VORG(1),1)) DO ANZ
	. . . QUIT  
	. . FOR FART="P","D","M" SET FELD="" FOR  SET FELD=$ORDER(^WWW127(0,FORM,FART,FELD)) QUIT:FELD=""  DO
	. . . SET TEXT=$PIECE($GET(^WWW127(0,FORM,FART,FELD,SPRACHE,1)),Y,1,3)  ;TYBD;3,11,2003;durch alles;24526;
	. . . QUIT:TEXT=""
	. . . SET TEXT1=""
	. . . SET LFN1=FELD
	. . . SET LFN1=$ORDER(^WWW122s(0,5,$$^WWWUMLAU(FORM,1),FELD,FORM,""))
	. . . IF FART="D" IF LFN1="" QUIT  ;NICHT VORHANDEN TYBD 03.07.2002 ;Not on hand 
	. . . IF LFN1'="" IF FART="D" SET TEXT1=$PIECE($GET(^WWW122(0,FORM,LFN1,1)),Y,12)
	. . . IF FART="M" SET TEXT1=$PIECE($GET(^WWW122(0,FORM,FELD,1)),Y,12)
	. . . ;
	. . . ;
	. . . FOR I=1:1 QUIT:$PIECE(VORG(1)," ",I,999)=""  SET SUCH=$PIECE(VORG(1)," ",I) IF SUCH'="" IF $FIND($$^WWWUMLAU(TEXT_TEXT1,1),$$^WWWUMLAU(SUCH,1)) DO ANZ QUIT
	. . . QUIT
	. . QUIT
	. QUIT
	IF ANZM=0 DO
	. WRITE "<TR>"
	. SET YDDSATZ=YDDSATZ+1
	. IF $F(","_YBEDBER_",",",1,") DO  ;NUR WENN SYSADMIN ;only when 
	. . WRITE "<TD NOWRAP VALIGN=TOP"
	. . IF YDDSATZ#2=1 WRITE " BGCOLOR="_YWHITE
	. . IF YDDSATZ#2=0 WRITE " BGCOLOR="_YGRAY
	. . WRITE ">"
	. . WRITE "<FONT SIZE=2>"
	. . WRITE "&nbsp;"
	. . WRITE "</TD>"
	. . Q
	. ;
	. WRITE YCR
	. WRITE "<TD NOWRAP VALIGN=TOP"
	. IF YDDSATZ#2=1 WRITE " BGCOLOR="_YWHITE
	. IF YDDSATZ#2=0 WRITE " BGCOLOR="_YGRAY
	. WRITE ">"
	. WRITE "<FONT SIZE=2>"
	. WRITE "&nbsp;"
	. WRITE "</TD>"
	. ;
	. WRITE YCR
	. WRITE "<TD NOWRAP VALIGN=TOP"
	. IF YDDSATZ#2=1 WRITE " BGCOLOR="_YWHITE
	. IF YDDSATZ#2=0 WRITE " BGCOLOR="_YGRAY
	. WRITE ">"
	. WRITE "<FONT SIZE=2>"
	. WRITE "&nbsp;"
	. WRITE "</TD>"
	. ;
	. WRITE YCR
	. WRITE "<TD NOWRAP VALIGN=TOP"
	. IF YDDSATZ#2=1 WRITE " BGCOLOR="_YWHITE
	. IF YDDSATZ#2=0 WRITE " BGCOLOR="_YGRAY
	. WRITE ">"
	. WRITE "<FONT SIZE=2>"
	. WRITE "&nbsp;"
	. WRITE "</TD>"
	. ;
	. WRITE YCR
	. WRITE "</TR>"
	. QUIT
	DO ^WWWFRAME(1)   ;TABLE AUS ;out of 
	QUIT
	
ANZ ;
	;anzeige suchergebnis
	SET ANZM=ANZM+1
	WRITE "<TR>"
	WRITE YCR
	SET YDDSATZ=YDDSATZ+1
	;FORM ;shape 
	IF $F(","_YBEDBER_",",",1,") DO   ;NUR WENN SYSADMIN ;only when 
	. WRITE "<TD NOWRAP VALIGN=TOP"
	. IF YDDSATZ#2=1 WRITE " BGCOLOR="_YWHITE
	. IF YDDSATZ#2=0 WRITE " BGCOLOR="_YGRAY
	. WRITE ">"
	. WRITE "<FONT SIZE=2>"
	. WRITE "<A"
	. DO
	. . NEW TITLE
	. . SET TITLE=$$^WWWTEXT(93)
	. . IF FORM'="" SET TITLE(1)=$ORDER(^WWW004s(0,2,$$^WWWUMLAU(FORM,1),"")) IF TITLE(1)'="" DO
	. . . SET TITLE(2)=$ORDER(^WWW004s(0,2,$$^WWWUMLAU(FORM,1),TITLE(1),""))
	. . . IF TITLE(2)'="" IF $GET(^WWW0041(0,TITLE(1),TITLE(2),SPRACHE,1))'="" SET TITLE=TITLE(1)_" "_TITLE(2)_" "_$PIECE($GET(^WWW0041(0,TITLE(1),TITLE(2),SPRACHE,1)),Y,1) QUIT
	. . . IF TITLE(2)'="" SET TITLE=TITLE(1)_" "_TITLE(2)_" "_$PIECE($GET(^WWW004(0,TITLE(1),TITLE(2),1)),Y,1)
	. . . QUIT
	. . WRITE " TITLE="_""""_$TRANSLATE(TITLE,"_"," ")_""""   ;
	. . QUIT
	. WRITE " HREF="
	. WRITE YAKTION_"EP=WWWFORM&amp;YFORM="_FORM_"&amp;YKEY="
	. SET YBACK="WWWHELPS,"
	. DO ^WWWCGI
	. WRITE ">"
	. WRITE FORM
	. WRITE "</A>"
	. WRITE "<BR>"
	. WRITE "&nbsp;"
	. WRITE "</TD>"
	. WRITE YCR
	. Q
	;FORMname
	WRITE "<TD VALIGN=TOP"
	IF YDDSATZ#2=1 WRITE " BGCOLOR="_YWHITE
	IF YDDSATZ#2=0 WRITE " BGCOLOR="_YGRAY
	WRITE ">"
	WRITE "<FONT SIZE=2>"
	DO
	. NEW TITLE
	. SET TITLE=$$^WWWTEXT(93)
	. IF FORM'="" SET TITLE(1)=$ORDER(^WWW004s(0,2,$$^WWWUMLAU(FORM,1),"")) IF TITLE(1)'="" DO
	. . SET TITLE(2)=$ORDER(^WWW004s(0,2,$$^WWWUMLAU(FORM,1),TITLE(1),""))
	. . IF TITLE(2)'="" IF $GET(^WWW0041(0,TITLE(1),TITLE(2),SPRACHE,1))'="" SET TITLE=TITLE(1)_" "_TITLE(2)_" "_$PIECE($GET(^WWW0041(0,TITLE(1),TITLE(2),SPRACHE,1)),Y,1) QUIT
	. . IF TITLE(2)'="" SET TITLE=TITLE(1)_" "_TITLE(2)_" "_$PIECE($GET(^WWW004(0,TITLE(1),TITLE(2),1)),Y,1)
	. . QUIT
	. WRITE "<A"
	. WRITE " TITLE="_""""_TITLE_""""   ;AUFTRAG ERFASSEN ;order Edit 
	. WRITE " HREF="
	. WRITE YAKTION_"EP=WWWFORM&amp;YFORM="_FORM_"&amp;YKEY="
	. SET YBACK="WWWHELPS,"
	. DO ^WWWCGI
	. WRITE ">"
	. QUIT
	IF $DATA(^WWW1201(0,FORM,SPRACHE,1)) WRITE $PIECE($GET(^WWW1201(0,FORM,SPRACHE,1)),Y,1)
	IF '$DATA(^WWW1201(0,FORM,SPRACHE,1)) WRITE $PIECE($GET(^WWW120(0,FORM,1)),Y,1)
	WRITE "&nbsp;"
	DO
	. WRITE "</A>"
	. QUIT
	WRITE "</TD>"
	WRITE YCR
	;DATENFELD ;data item 
	SET YDATEI=$PIECE($GET(^WWW120(0,FORM,1)),Y,11)
	WRITE "<TD VALIGN=TOP"
	IF YDDSATZ#2=1 WRITE " BGCOLOR="_YWHITE
	IF YDDSATZ#2=0 WRITE " BGCOLOR="_YGRAY
	WRITE ">"
	WRITE "<FONT SIZE=2>"
	;IF YDATEI'="" IF FART="P" WRITE $PIECE($GET(^WWW002(0,YDATEI,FELD,1)),Y,2)
	;IF FART'="P" WRITE $PIECE($GET(^WWW122(0,FORM,FELD,1)),Y,12)
	IF FORM'="" IF FART'="" WRITE $$^WWWFELDNAME(FORM,FART,FELD) 
	WRITE "&nbsp;"
	WRITE "</TD>"
	WRITE YCR
	;TEXT
	WRITE "<TD VALIGN=TOP"
	IF YDDSATZ#2=1 WRITE " BGCOLOR="_YWHITE
	IF YDDSATZ#2=0 WRITE " BGCOLOR="_YGRAY
	WRITE ">"
	WRITE "<FONT SIZE=2>"
	;WRITE $TR(TEXT,"|"," ")
	
	FOR YI1=1:1 QUIT:$PIECE(TEXT,"|",YI1,999)=""  DO
	. NEW YINHALT
	. SET YINHALT=$PIECE(TEXT,"|",YI1)
	. IF YINHALT'="" IF '$FIND(YINHALT," ") IF $FIND(YINHALT,".GIF")!($FIND(YINHALT,".gif")) DO  QUIT
	. . WRITE "<CENTER><IMG SRC="_""""_YGIF_YINHALT_""""_" TITLE="_""""_$PIECE(YINHALT,".",1)_""""_"></CENTER>"
	. . QUIT
	. IF YINHALT'="" IF '$FIND(YINHALT," ") IF $FIND(YINHALT,".AVI")!($FIND(YINHALT,".avi")) DO  QUIT
	. . WRITE "<CENTER><IMG DYNSRC="_""""_YGIF_YINHALT_""""_" START=mouseover"_"></CENTER>"
	. . QUIT
	. IF YINHALT'="" IF '$FIND(YINHALT," ") IF $FIND(YINHALT,".WAV")!($FIND(YINHALT,".WAV")) DO  QUIT
	. . WRITE "<SOUND SRC="_""""_YGIF_YINHALT_""""_""_">"
	. . QUIT
	. WRITE $$^WWWUML($PIECE(TEXT,"|",YI1),1),"<BR>",YCR
	. QUIT
	WRITE "&nbsp;"
	WRITE "</TD>"
	WRITE YCR
	WRITE YCR
	WRITE "</TR>"
	QUIT
]]></Routine>
</Export>