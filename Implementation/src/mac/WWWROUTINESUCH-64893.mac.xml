<?xml version="1.0" encoding="UTF-8"?>
<Export generator="Cache" version="22" zv="CACHE" ts="2001-01-01 00:00:00">
<Routine name="WWWROUTINESUCH" type="MAC" languagemode="0" timestamp="58440,0"><![CDATA[
WWWROUTINESUCH ;WWWROUTINESUCH;FAN;Drucken Aufrufen Routine Liste;01.02.2002
	;
	;/------------------------------------------------------------------\
	;| Description of Function :
	;|		Drucken Aufrufen Routine Liste
	;|
	;| Inputs : 
	;|
	;|
	;| ByRef :
	;|
	;|
	;| Returns :
	;|
	;|
	;| History :
	;| 30-May-2005		RobertW		SR12056: Attempt at Performance Increase
	;| FAN	01.02.2002
	;|
	;\------------------------------------------------------------------/
	;
	NEW INHALT,FORM,FORM1,FELDNR,FELD1,BUTTON,BUTTON1
	SET VORG(1)=$GET(VORG(1))  ;
	IF VORG(1)="" DO ^WWWINFO($$^WWWTEXT(32292))  QUIT       ;
	KILL ^WWWSOR(YUSER)  ;LÖSCHEN ZWISCHENDATEI ;Delete 
	DO SORT
	DO DRUCK   ;WERTE DRUCKEN ;print 
	DO STOP^WWWTAB  ;ENDE TABELLE ;termination tabulation 
	QUIT
	
SORT   ;VORSORTIERUNG
	;BEARBEITEN ÜBERSCHRIFT ;superscription 
	SET UES(1)=""
	DO
	. IF $DATA(^WWW0021(0,"WWW120",1,SPRACHE,1)) SET $PIECE(UES(1),Y,1)=$PIECE(^(1),Y,1) QUIT    ;FORMULAR ;form 
	. SET $PIECE(UES(1),Y,1)=$PIECE($GET(^WWW002(0,"WWW120",1,1)),Y,1)
	. QUIT
	DO
	. IF $DATA(^WWW1221(0,"WWW122",1,SPRACHE,1)) SET $PIECE(UES(1),Y,1)=$PIECE(^(1),Y,1) QUIT    ;DATENFELD ;data item 
	. SET $PIECE(UES(1),Y,2)=$PIECE($GET(^WWW122(0,"WWW122",1,1)),Y,12)
	. QUIT
	DO
	. IF $DATA(^WWW1221(0,"WWW124",1,SPRACHE,1)) SET $PIECE(UES(1),Y,1)=$PIECE(^(1),Y,1) QUIT    ;BUTTON
	. SET $PIECE(UES(1),Y,3)=$PIECE($GET(^WWW122(0,"WWW124",1,1)),Y,12)
	. QUIT
	DO
	. SET $PIECE(UES(1),Y,4)=" "
	. QUIT
	QUIT
	
DRUCK   ;AUSWERTUNG DRUCKEN ;print 
	DO ^WWWBACK
	SET YDDSATZ=0
	;DRUCKEN TABELLE ;print tabulation 
	DO UPUEB  ;DRUCKEN ÜBERSCHRIFT ;print superscription 
	SET FORM="" FOR  SET FORM=$ORDER(^WWW120(0,FORM)) QUIT:FORM=""  DO
	. SET FORM1=$GET(^WWW120(0,FORM,1))
	. ;QUIT:'$FIND(FORM1,VORG(1))
	. ;QUIT:'$FIND($$^WWWUPER(FORM1),$$^WWWUPER(VORG(1)))
	. QUIT:'$FIND($zconvert(FORM1,"U"),$zconvert(VORG(1),"U"))
	. FOR YI=1,11,14,15,16,17,24,40,42,44,46,57,60,18,93,59,89,86,58,87 DO
	. . ;QUIT:'$FIND($PIECE(FORM1,Y,YI),VORG(1))
	. . ;QUIT:'$FIND($$^WWWUPER($PIECE(FORM1,Y,YI)),$$^WWWUPER(VORG(1)))
	. . QUIT:'$FIND($zconvert($PIECE(FORM1,Y,YI),"U"),$zconvert(VORG(1),"U"))
	. . DO
	. . . SET INHALT=""
	. . . IF $DATA(^WWW0031(0,"WWW120",YI,SPRACHE,1)) SET YI=$PIECE(^(1),Y,1)_": "_$PIECE(FORM1,Y,YI) QUIT    
	. . . SET YI=$PIECE($GET(^WWW003(0,"WWW120",YI,1)),Y,1)_": "_$PIECE(FORM1,Y,YI)
	. . . SET INHALT=INHALT_YI_"<BR>"
	. . . QUIT
	. . SET FELDNR=""
	. . SET BUTTON=""
	. . DO ANZ
	. . QUIT
	. QUIT
	SET FORM="" FOR  SET FORM=$ORDER(^WWW122(0,FORM)) QUIT:FORM=""  DO
	. SET FELDNR="" FOR  SET FELDNR=$ORDER(^WWW122(0,FORM,FELDNR)) QUIT:FELDNR=""  DO
	. . SET FELD1=$GET(^WWW122(0,FORM,FELDNR,1))
	. . ;QUIT:'$FIND(FELD1,VORG(1))
	. . ;QUIT:'$FIND($$^WWWUPER(FELD1),$$^WWWUPER(VORG(1)))
	. . QUIT:'$FIND($zconvert(FELD1,"U"),$zconvert(VORG(1),"U"))
	. . FOR YI=12,15,16,17,21,24,32,33,39,25,26,27,28,32,92  DO
	. . . ;QUIT:'$FIND($PIECE(FELD1,Y,YI),VORG(1))
	. . . ;QUIT:'$FIND($$^WWWUPER($PIECE(FELD1,Y,YI)),$$^WWWUPER(VORG(1)))
	. . . QUIT:'$FIND($zconvert($PIECE(FELD1,Y,YI),"U"),$zconvert(VORG(1),"U"))
	. . . DO
	. . . . SET INHALT=""
	. . . . IF $DATA(^WWW0031(0,"WWW122",YI,SPRACHE,1)) SET YI=$PIECE(^(1),Y,1)_": "_$PIECE(FELD1,Y,YI) QUIT    
	. . . . SET YI=$PIECE($GET(^WWW003(0,"WWW122",YI,1)),Y,1)_": "_$PIECE(FELD1,Y,YI)
	. . . . QUIT
	. . . SET INHALT=INHALT_YI_"<BR>"
	. . . QUIT
	. . SET BUTTON=""
	. . DO ANZ
	. . QUIT
	. QUIT 
	SET FORM="" FOR  SET FORM=$ORDER(^WWW124(0,FORM)) QUIT:FORM=""  DO
	. SET BUTTON="" FOR  SET BUTTON=$ORDER(^WWW124(0,FORM,SPRACHE,BUTTON)) QUIT:BUTTON=""  DO
	. . SET BUTTON1=$GET(^WWW124(0,FORM,SPRACHE,BUTTON,1))
	. . ;QUIT:'$FIND(BUTTON1,VORG(1))
	. . ;QUIT:'$FIND($$^WWWUPER(BUTTON1),$$^WWWUPER(VORG(1)))
	. . QUIT:'$FIND($zconvert(BUTTON1,"U"),$zconvert(VORG(1),"U"))
	. . FOR YI=6,7,14  DO
	. . . ;QUIT:'$FIND($PIECE(BUTTON1,Y,YI),VORG(1))
	. . . ;QUIT:'$FIND($$^WWWUPER($PIECE(BUTTON1,Y,YI)),$$^WWWUPER(VORG(1)))
	. . . QUIT:'$FIND($zconvert($PIECE(BUTTON1,Y,YI),"U"),$zconvert(VORG(1),"U"))
	. . . DO
	. . . . SET INHALT=""
	. . . . IF $DATA(^WWW0031(0,"WWW124",YI,SPRACHE,1)) SET YI=$PIECE(^(1),Y,1)_": "_$PIECE(BUTTON1,Y,YI) QUIT    
	. . . . SET YI=$PIECE($GET(^WWW003(0,"WWW124",YI,1)),Y,1)_": "_$PIECE(BUTTON1,Y,YI)
	. . . . SET INHALT=INHALT_YI_"<BR>"
	. . . . QUIT
	. . . QUIT
	. . DO ANZ
	. . QUIT
	. QUIT 
	QUIT
	
ANZ      ;
	WRITE !
	WRITE YCR
	DO NL^WWWTAB
	DO NF^WWWTAB
	DO
	. NEW YBACK,YKEY,YFORM
	. WRITE "<A"
	. WRITE " TITLE="_""""_$$^WWWTEXT(374)_""""   ;
	. WRITE " HREF="
	. WRITE YAKTION_"EP=WWWFORM&amp;YFORM=WWW120&amp;YKEY="_FORM  ;
	. SET YBACK=""
	. DO ^WWWCGI
	. WRITE ">"
	. QUIT
	IF FORM'="" WRITE "("_FORM_") <BR>"_$P($GET(^WWW120(0,FORM,1)),Y,1) 
	WRITE "&nbsp;"
	DO ZWL^WWWTAB
	;IF FELDNR'="" DO
	. NEW YBACK,YKEY,YFORM
	. SET YKEY=FORM_","_FELDNR
	. WRITE "<A"
	. WRITE " TITLE="_""""_$$^WWWTEXT(374)_""""   ;
	. WRITE " HREF="
	. WRITE YAKTION_"EP=WWWFORM&amp;YFORM=WWW122&amp;YKEY="_YKEY  ;
	. SET YBACK=""
	. DO ^WWWCGI
	. WRITE ">"
	. QUIT
	IF FELDNR'="" WRITE "("_FELDNR_") "_$PIECE($GET(^WWW122(0,FORM,FELDNR,1)),Y,12)
	WRITE "&nbsp;"
	DO ZWL^WWWTAB
	;IF BUTTON'="" DO
	. NEW YBACK,YKEY,YFORM
	. SET YKEY=FORM_","_SPRACHE_","_BUTTON
	. WRITE "<A"
	. WRITE " TITLE="_""""_$$^WWWTEXT(374)_""""     ;
	. WRITE " HREF="
	. WRITE YAKTION_"EP=WWWFORM&amp;YFORM=WWW124&amp;YKEY="_YKEY    ;
	. SET YBACK=""
	. DO ^WWWCGI
	. WRITE ">"
	. QUIT
	IF BUTTON'="" WRITE "("_BUTTON_") "_$PIECE($GET(BUTTON1),Y,1)
	WRITE "&nbsp;"
	DO ZWL^WWWTAB
	IF $G(INHALT)'="" WRITE INHALT
	WRITE "&nbsp;"
	DO EF^WWWTAB
	DO EL^WWWTAB
	QUIT
	
UPUEB ;ÜBERSCHRIFT ;superscription 
	WRITE "<CENTER>"
	DO START00^WWWTAB
	DO NL^WWWTAB
	DO NHWO^WWWTAB
	WRITE YCR,"<FONT SIZE=3>"
	WRITE YCR,"<B>"
	WRITE YCR,"<NOBR>"
	WRITE YCR,YKOPF
	WRITE YCR,"</NOBR>"
	WRITE YCR,"</B></FONT>"
	WRITE YCR,"<BR>"
	DO
	. IF $DATA(^WWW1221(0,"WWWROUTINESUCH",1,SPRACHE,1)) WRITE YCR,$PIECE(^(1),Y,1)_": "_VORG(1) QUIT    ;DATENFELD ;data item 
	. WRITE YCR,$PIECE($GET(^WWW122(0,"WWWROUTINESUCH",1,1)),Y,12)_": "_VORG(1)
	. QUIT
	DO EH^WWWTAB
	DO EL^WWWTAB
	DO STOP^WWWTAB
	WRITE "<BR>"
	WRITE "</CENTER>"
	DO START100^WWWTAB  ;STARTEN DER ÜBERSCHRIFT ;launching the superscription 
	WRITE "<THEAD>" 
	DO NL^WWWTAB
	FOR I=1:1 QUIT:$PIECE(UES(1),Y,I,99)=""  DO NHW^WWWTAB WRITE $PIECE(UES(1),Y,I),"&nbsp;" DO EH^WWWTAB
	DO EL^WWWTAB
	WRITE "</THEAD>"
	QUIT
]]></Routine>
</Export>