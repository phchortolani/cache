<?xml version="1.0" encoding="UTF-8"?>
<Export generator="Cache" version="22" zv="CACHE" ts="2001-01-01 00:00:00">
<Routine name="WWWAMWINDOW" type="MAC" languagemode="0" timestamp="58440,0"><![CDATA[
WWWAMWINDOW(YAMPAGE,YAMPARA,YAMWINPARA,YAMTYP,YTOP) ;WWWAMWINDOW;FIS;OPEN NEW WINDOW;20.11.2002
 ;
 ;/------------------------------------------------------------------\
 ; Description of Function :
 ;		OPEN NEW WINDOW
 ;
 ; Inputs : 
 ;
 ;
 ; ByRef :
 ;
 ;
 ; Returns :
 ;
 ;
 ; History :
 ;
 ; FIS	20.11.2002
 ;
 ;\------------------------------------------------------------------/
 ;
 ;
 NEW PAGE1,WIDTH,HEIGHT,URL,TYP,RESIZE,FRAME,FULLSCREEN
 ;
 SET RETVAL=""
 ;SET RETVAL="YAMPAGE="_YAMPAGE_"--------YAMPARA"_YAMPARA
 ;QUIT RETVAL
 SET YAMPAGE=$GET(YAMPAGE)
 IF $GET(YTOP)=1 IF $GET(YAMAPPLIC)'="" IF $PIECE($GET(^WWWAMDEFSYS(0,YAMAPPLIC,1)),Y,7)=1 SET YTOP=""  ;INNERHALB FRAME GESTARTET:FIS:12.01.05
 SET FRAME=""
 DO
 .;IF YAMPAGE="" SET TYP=2 SET YAMUSER="" SET YAMPARA="" SET YAMWINPARA="" QUIT  ;RELOAD WITH NEW USER NUMBER !
 .IF YAMPAGE="" SET TYP=2 SET YAMUSER="" QUIT  ;RELOAD WITH NEW USER NUMBER !
 .SET PAGE1=$GET(^WWWAMDEFPAGE(0,YAMPAGE,1))
 .SET TYP=+$PIECE(PAGE1,Y,5)
 .SET WIDTH=+$PIECE(PAGE1,Y,7)
 .IF WIDTH=0 SET WIDTH=500
 .SET HEIGHT=+$PIECE(PAGE1,Y,6)
 .IF HEIGHT=0 SET HEIGHT=300
 .SET RESIZE="no"
 .IF $PIECE(PAGE1,Y,8)=1 SET RESIZE="yes"
 .SET FRAME=$PIECE(PAGE1,Y,9)
 .IF TYP=3 IF FRAME="" SET TYP=2  ;CURRENT FRAME
 .SET FULLSCREEN=$P(PAGE1,Y,12)  ;100% FENSTERGRÖSSE
 .QUIT
 ;
 IF $GET(YAMTYP)'="" SET TYP=YAMTYP
 IF TYP=3 IF FRAME="" DO
 .IF YAMPAGE'="" SET FRAME=$PIECE($GET(^WWWAMDEFPAGE(YM,YAMPAGE,1)),Y,9)
 .IF YAMPAGE="" IF YAMAPPLIC'="" IF $PIECE($GET(^WWWAMDEFSYS(0,YAMAPPLIC,1)),Y,2)'="" SET FRAME=$PIECE($GET(^WWWAMDEFPAGE(YM,$PIECE($GET(^WWWAMDEFSYS(0,YAMAPPLIC,1)),Y,2),1)),Y,9)
 .IF FRAME="" IF $GET(YAMFRAME)="" SET TYP=2
 .QUIT
 IF $GET(YAMFRAME)'="" SET FRAME=YAMFRAME
 SET URL=YAMURL_"YAMPAGE="_YAMPAGE  ;GO IN PAGE ;within page 
 SET URL=URL_$$^WWWAMCGI()  ;DFLT. VARIABLES
 ;
 IF TYP=0 DO  ;MODAL WINDOW
 .SET RETVAL=RETVAL_"var jetzt=new Date().getSeconds(); var result = window.showModalDialog("_""""_URL
 .;SET RETVAL=RETVAL_"&YAMSEC="_""""_"+ jetzt ,"_""""_"Parameter"_""""_","_""""
 .SET RETVAL=RETVAL_"&YRANDOM="_$RANDOM(90000)_"&YSEC="_""""_"+ jetzt ,"_""""_$GET(YAMPARA)_""""_","_""""
 .IF WIDTH'=0 SET RETVAL=RETVAL_"DialogWidth: "_WIDTH_"px; "
 .IF HEIGHT'=0 SET RETVAL=RETVAL_"DialogHeight: "_HEIGHT_"px; "
 .;SET RETVAL=RETVAL_"DialogLeft:0px; "
 .;SET RETVAL=RETVAL_"DialogTop:0px; "
 .SET RETVAL=RETVAL_"resizable: "_RESIZE_"; status: no;"_""""_");"
 .;SET RETVAL=RETVAL_"if (result != null) { eval(result); }"
 .QUIT
 ;
 IF TYP=1 DO  ;NEW BROWSER WINDOW
 .IF $GET(YAMPARA)'="" SET URL=URL_"&YAMPARA="_YAMPARA
 .SET RETVAL=RETVAL_"window.open("_""""_URL_""""_","_""""_YAMPAGE_""""_","_""""_"width="_WIDTH_", "_"height="_HEIGHT_", scrollbars=yes, resizable="_RESIZE
 .IF $G(FULLSCREEN)=1 SET RETVAL=RETVAL_", left=0, top=0, fullscreen=yes"
 .SET RETVAL=RETVAL_""""_");"
 .QUIT
 ;
 IF TYP=2 DO  ;CURRENT FRAME
 .SET RETVAL=RETVAL_"window.location="_""""
 .SET RETVAL=RETVAL_URL
 .IF $GET(YAMPARA)'="" SET RETVAL=RETVAL_"&YAMPARA="_YAMPARA
 .SET RETVAL=RETVAL_""""
 .QUIT
 ;
 IF TYP=3 DO  ;SPECIFIC FRAME
 .IF $GET(YTOP)'=1 SET RETVAL=RETVAL_"parent."_FRAME_".location.href="_""""
 .IF $GET(YTOP)=1 SET RETVAL=RETVAL_"top."_FRAME_".location.href="_""""
 .SET RETVAL=RETVAL_URL
 .IF $GET(YAMPARA)'="" SET RETVAL=RETVAL_"&YAMPARA="_YAMPARA
 .SET RETVAL=RETVAL_""""
 .QUIT
 ;
 IF TYP=4 DO  ;NEW BROWSER WINDOW WITH PARAMETERS ;DISC 06.03.03
 .IF $GET(YAMWINPARA,"")'="" DO
 ..SET URL=URL_"&WINPARA=""+"_$GET(YAMWINPARA,"""")
 ..QUIT
 .IF $GET(YAMWINPARA,"")="" DO
 ..IF $GET(YAMPARA)'="" SET URL=URL_"&YAMPARA="_YAMPARA  ;FIS;20.06.05;ZUSÄTZLICH ÜBERGEBEN
 ..SET URL=URL_""""
 ..QUIT
 .SET RETVAL=RETVAL_"window.open("_""""_URL_","_""""_$GET(YAMPARA)_""""_","_""""_"width="_WIDTH_", "_"height="_HEIGHT_", scrollbars=yes, resizable="_RESIZE_""""_");"
 .QUIT
 ;
 IF TYP=5 DO  ;SOURCE PATH
 .SET RETVAL=RETVAL_URL
 .IF $GET(YAMPARA)'="" SET RETVAL=RETVAL_"&YAMPARA="_YAMPARA
 .QUIT
 ;
 IF TYP=6 DO  ;WITHOUT WINDOW LOACTION
 .;SET RETVAL=RETVAL_"window.location="_""""
 .SET RETVAL=RETVAL_URL
 .IF $GET(YAMPARA)'="" SET RETVAL=RETVAL_"&YAMPARA="_YAMPARA
 .SET RETVAL=RETVAL_""""
 .QUIT
 ;
 QUIT RETVAL
 ;
]]></Routine>
</Export>