<?xml version="1.0" encoding="UTF-8"?>
<Export generator="Cache" version="22" zv="CACHE" ts="2001-01-01 00:00:00">
<Routine name="WWWBAR" type="MAC" languagemode="0" timestamp="58440,0"><![CDATA[
WWWBAR(BARCODE,FILE,SIZE,NOLINK,BARCODETYP,BARCODETXT,DEHNFAC) ;WWWBAR;DT;BARCODE DRUCKEN;15.12.1999
	;
	;/------------------------------------------------------------------\
	;| Description of Function :
	;|		BARCODE DRUCKEN
	;|
	;| Inputs : 
	;|
	;|
	;| ByRef :
	;|
	;|
	;| Returns :
	;|
	;|
	;| History :
	;| 04-Jul-2006	  	FIS			new parameter for borcode size
	;| 05-May-2005		Paul K		Normalised Directory
	;| DT	15.12.1999
	;|
	;\------------------------------------------------------------------/
	;
	;BARCODE=BARCODE NUMMER ;numeral 
	;FILE=DATEINAME FÜR DAS BILD ;to who portrait 
	;SIZE=BREITE DES BARCODES "" = 60
	;BARCODETYP SPEZIELLER BARCODETYP
	;BARCODETEXT 0 :NO TEXT, "ANYTEXT" : ANYTEXT IN THE BARCODE
	;NOLINK=1  KEIN LINK DRUCKEN NUR QUIT
	NEW GIF,BARCODE1,TYPE,TYPE1
	QUIT:$GET(BARCODE)=""
	SET BARCODE1=""
	SET SIZE=+$GET(SIZE)
	IF SIZE=0 SET SIZE=60  ;breite ;breadth 
	IF SIZE>30 SET BARCODE1=BARCODE
	I $G(BARCODETXT)'="" SET BARCODE1=BARCODETXT
	IF $G(BARCODETXT)=0 SET BARCODE1=""
	SET FILE=$GET(FILE)
	SET FILE=$PIECE(FILE,".",1)
	IF FILE="" SET GIF="gif"_BARCODE_".gif"  ;DATEI ;data file 
	IF FILE'="" SET GIF=FILE_".gif"
	SET TYPE="C39"
	SET TYPE1=$GET(BARCODETYP)    ;BEC;03.11.05;SPEZIELLER BARCODETYP 
	IF TYPE1="" SET TYPE1=$PIECE($GET(^INVORG(YM,YM,1)),Y,158)
	IF TYPE1'="" DO
	. IF TYPE1=1 SET TYPE="B25"
	. IF TYPE1=2 SET TYPE="B25A"
	. ;IF TYPE1=3 SET TYPE="B25I"    ;BEC;24816;12.12.03;DIESER BARODE KANN NOCH NICHT VOLLSTÄNDIG WERDEN
	. IF TYPE1=3 SET TYPE="B25I"     ;BEC;25646;28.06.04;BARCODE FUNKTIONIERT
	. IF TYPE1=4 SET TYPE="B25M"
	. IF TYPE1=5 SET TYPE="B25D"
	. IF TYPE1=6 SET TYPE="BCB"
	. IF TYPE1=7 SET TYPE="C39"
	. ;IF TYPE1=8 SET TYPE="EAN13"    ;WEM;24554;25.11.2003;DIESER BARODE KANN NOCH NICHT GENERIERT WERDEN
	. IF TYPE1=8 SET TYPE="EAN13"     ;BEC;25646;28.06.04;BARCODE FUNKTIONIERT
	. IF TYPE1=9 SET TYPE="ITF14"     ;BEC;28.06.04;NEU HINZUGEFÜGT ;recent 
	. QUIT
	IF TYPE="" SET TYPE="C39"
	;D ^WWWBARC(FILE,BARCODETYPE[B25,B25A,B25I,B25M,B25D,BCB,C39,EAN13],BARCODE,PRUEFSUMMEBILDEN[0,1],LÄNGEDESBARCODES[20],DEHNUNGSFAKTOR[1],KLARSCHRIFTTEXT,HORIZONTALODERVERTIKAL[H,V])
	DO ^WWWBARC(##Class(%File).NormalizeDirectory($PIECE($GET(^WWW012(0,YM,1)),Y,49))_GIF,TYPE,BARCODE,0,SIZE,$GET(DEHNFAC,1),BARCODE1,"H")   ;WEM;24544;25.11.2003;GEÄNDERT "C39" IN TYPE
	IF $GET(NOLINK)=1 QUIT  ;KEIN DRUCK NUR SAVE DES BILDES ;no printing only 
	WRITE YCR
	WRITE "<IMG SRC="_""""_YGIF_GIF_""""_">"  ;BILD ANZEIGEN ;portrait display 
	QUIT
]]></Routine>
</Export>