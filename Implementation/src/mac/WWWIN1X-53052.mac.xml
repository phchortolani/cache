<?xml version="1.0" encoding="UTF-8"?>
<Export generator="Cache" version="22" zv="CACHE" ts="2001-01-01 00:00:00">
<Routine name="WWWIN1X" type="MAC" languagemode="0" timestamp="58440,0"><![CDATA[
WWWIN1X ;WWIN1X;DT;KORREKTURPROGRAMM WWW125 UND WWW122;24.09.1999
	;
	;/------------------------------------------------------------------\
	;| Description of Function :
	;|		KORREKTURPROGRAMM WWW125 UND WWW122
	;|
	;| Inputs : 
	;|
	;|
	;| ByRef :
	;|
	;|
	;| Returns :
	;|
	;|
	;| History :
	;|
	;| DT	24.09.1999
	;|
	;\------------------------------------------------------------------/
	;
	NEW VORG,YFORM,YLFN,YLFN,YSATZ,WSATZ
	IF '$DATA(YUSER) SET YUSER=99999999
	QUIT:'$DATA(^WWW125(0))
	DO W122
	DO W125
	DO SORT
	SET VORG(1)=1
	SET VORG(2)=1 
	QUIT
	
W122 ;MASKEN BERICHTIGUNG ;correction 
	DO ^WWWVAR
	IF YUSER="" SET YUSER=99999999
	KILL ^WWWSOR(YUSER)
	SET YFORM="" FOR  SET YFORM=$ORDER(^WWW122(0,YFORM)) QUIT:YFORM=""  DO
	. KILL ^WWWSOR(YUSER,1)
	. SET WLFN="" FOR  SET WLFN=$ORDER(^WWW122(0,YFORM,WLFN)) QUIT:WLFN=""  DO
	. . SET YSATZ=$GET(^WWW122(0,YFORM,WLFN,1))
	. . SET YLFDNR=$PIECE(YSATZ,Y,1)
	. . IF YLFDNR="" SET YLFDNR="9999999"
	. . SET ^WWWSOR(YUSER,1,YLFDNR,WLFN)=YSATZ
	. . QUIT
	. SET LLL=0
	. SET YLFDNR="" FOR  SET YLFDNR=$ORDER(^WWWSOR(YUSER,1,YLFDNR)) QUIT:YLFDNR=""  DO
	. . SET WLFN="" FOR  SET WLFN=$ORDER(^WWWSOR(YUSER,1,YLFDNR,WLFN)) QUIT:WLFN=""  DO
	. . . SET WSATZ=$GET(^WWW122(0,YFORM,WLFN,1))
	. . . SET YSATZ=WSATZ
	. . . SET LLL=LLL+1
	. . . SET YLFN=LLL
	. . . SET $PIECE(YSATZ,Y,1)=WLFN
	. . . SET $PIECE(YSATZ,Y,42)=""
	. . . IF +$PIECE(YSATZ,Y,60)=0 SET $PIECE(YSATZ,Y,60)=1
	. . . IF $PIECE(YSATZ,Y,4)="" SET $PIECE(YSATZ,Y,4)=1
	. . . FOR  QUIT:'$DATA(^WWWSOR(YUSER,0,YFORM,YLFN,1))  SET YLFN=YLFN+1
	. . . IF +$PIECE(YSATZ,Y,3)=0 SET $PIECE(YSATZ,Y,3)=YLFN
	. . . SET ^WWWSOR(YUSER,0,YFORM,YLFN,1)=YSATZ
	. . . QUIT
	. . QUIT
	. QUIT
	KILL ^WWW122(0)
	MERGE ^WWW122(0)=^WWWSOR(YUSER,0)
	QUIT
	
W125 ;MANUELLE
	DO ^WWWVAR
	IF YUSER="" SET YUSER=99999999
	KILL ^WWWSOR(YUSER)
	MERGE ^WWWSOR(YUSER,0)=^WWW122(0)
	SET YFORM="" FOR  SET YFORM=$ORDER(^WWW125(0,YFORM)) QUIT:YFORM=""  DO
	. SET LLL=0
	. SET WLFN="" FOR  SET WLFN=$ORDER(^WWW125(0,YFORM,WLFN)) QUIT:WLFN=""  DO
	. . SET WSATZ=""
	. . SET YSATZ=$GET(^WWW125(0,YFORM,WLFN,1))
	. . SET WSATZ=YSATZ
	. . SET $PIECE(WSATZ,Y,35)=$PIECE(WSATZ,Y,53)
	. . SET $PIECE(WSATZ,Y,12)=$PIECE(WSATZ,Y,1)
	. . SET $PIECE(WSATZ,Y,1)=""
	. . IF +$PIECE(WSATZ,Y,60)=0 SET $PIECE(WSATZ,Y,60)=1
	. . IF $PIECE(WSATZ,Y,4)="" SET $PIECE(WSATZ,Y,4)=1
	. . SET LLL=LLL+1
	. . SET YLFN=LLL
	. . FOR  QUIT:'$DATA(^WWWSOR(YUSER,0,YFORM,YLFN,1))  SET YLFN=YLFN+1
	. . IF +$PIECE(WSATZ,Y,3)=0 SET $PIECE(WSATZ,Y,3)=YLFN
	. . SET ^WWWSOR(YUSER,0,YFORM,YLFN,1)=WSATZ
	. . MERGE ^WWW1221(0,YFORM,YLFN)=^WWW1252(0,YFORM,WLFN)
	. . QUIT
	. . QUIT
	. QUIT
	KILL ^WWW122(0)
	MERGE ^WWW122(0)=^WWWSOR(YUSER,0)
	KILL ^WWW125
	KILL ^WWW125S
	QUIT
	
SORT ;NEUE SORTIERSCHLÃœSSEL
	DO ^WWWVAR
	IF YUSER="" SET YUSER=99999999
	KILL VORG(1)
	SET YQ=1
	SET VORG(1)="WWW120,WWW122,WWW124" DO ^WWWSORT
	QUIT
]]></Routine>
</Export>