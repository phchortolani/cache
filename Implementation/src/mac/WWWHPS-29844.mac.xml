<?xml version="1.0" encoding="UTF-8"?>
<Export generator="Cache" version="22" zv="CACHE" ts="2001-01-01 00:00:00">
<Routine name="WWWHPS" type="MAC" languagemode="0" timestamp="58440,0"><![CDATA[
WWWHPS
	
#include COMSYS
	
	;-------------------------------------------------------------------------------
	; Description of Function :
	;		DRUCKEN DER SCHULUNGSUNTERLAGEN
	;
	; Inputs : 
	;
	;
	; ByRef :
	;
	;
	; Returns :
	;
	;
	; History :
    ; 18-Sep-2008	shobby	BR014966: Support language texts for customisation help text.
	; 07-May-2007	GRF		SR15511: Doco; quits; naked references
	; 30-May-2005	RobertW	SR12056: Attempt at Performance Increase
	; 08.04.2002	FAN
	;-------------------------------------------------------------------------------
	;WRITE "</PRE>"
	NEW LYFORM
	
	SET YVOR=$GET(^WWW012(0,YM,1))   ; FIXME : YVOR normally from WWW120 (sometimes WWW012/WWW013), YVOR1 always from WWW012?
	SET $PIECE(YVOR,Y,9)   = $PIECE($GET(^WWW012(0,YM,1)),Y,9)   ; $$$WWW012FontFace()
	SET $PIECE(YVOR,Y,5)   = $PIECE($GET(^WWW012(0,YM,1)),Y,5)   ; $$$WWW012BackgroundColor()
	SET $PIECE(YVOR,Y,5)   = 137                                                             ;HINTERGRUND WEISS ;foil
	; FIXME : ^^^ Reset <GRF>
	SET $PIECE(YVOR,Y,77)  = 137                                 ; $$$WWW012FrameBodyColor() ;INNENFARBE WEISS
	SET $PIECE(YVOR1,Y,77) = 137                                                             ;INNENFARBE WEISS
	; FIXME : ^^^ YVOR1 see note above
	SET $PIECE(YVOR,Y,13)  = $$$NO                               ; $$$WWW012FormsFramed()    ;KEIN RAHMEN ;no framework 
	
	SET KOPF1 = $$^WWWUML($PIECE($GET(^WWW120(0,YFORM,1)),Y,1))
	IF $DATA(^WWW1201(0,YFORM,SPRACHE,1)) SET KOPF1 = $$^WWWUML($PIECE($GET(^WWW1201(0,YFORM,SPRACHE,1)),Y,1))
	SET KOPF = $$^WWWTEXT(20)_": "_KOPF1     ; "Help"
	DO ^WWWSTART(KOPF)
	
	DO ^WWWBODY(4,"NOPRINT")
	;DO ^WWWBACK
	IF '$DATA(YQ) SET YQ = 0
	SET VORG(1) =  $TRANSLATE($GET(VORG(1)),",",";")
	SET SEITE   =  $GET(SEITE)    ;YSEITE
	SET SH      = +$GET(SH)     ;SCHULUNG
	SET FH      = +$GET(FH)     ;FORMULAR HILFER ;form 
	SET DH      = +$GET(DH)     ;DATENFELD HILFER ;data item 
	
	IF YBED'="" SET SPRACHE = $$^WWWLANGU(YBED)
	IF VORG(1)'="" DO  ;NUR AUSWAHL ;only Selection 
	. SET LYFORM = 1
	. IF $DATA(^WWWSOR(YUSER,"WWW042SP")) DO
	. . WRITE YCR,"<TABLE CELLSPACING=0 BORDER=0 WIDTH=100%>"
	. . WRITE YCR,"<TR>"
	. . WRITE "<TD WIDTH=7%>&nbsp;</TD><TD WIDTH=55%>"
	. . WRITE "<FONT SIZE=4 FACE=ARIAL><B>"
	. . WRITE "INTRAPREND"_"</B>"
	. . WRITE "</TD><TD WIDTH=38%>&nbsp;</TD>"
	. . WRITE "</TR>"
	. . WRITE YCR,"<TR>"
	. . WRITE "<TD WIDTH=7%>&nbsp;</TD><TD WIDTH=55%>"
	. . WRITE "<FONT SIZE=4 FACE=ARIAL><B>"
	. . WRITE $TRANSLATE($$^WWWUML($GET(YPARA)),"_"," ")_"</B>"
	. . WRITE "</TD><TD WIDTH=38%>&nbsp;</TD>"
	. . WRITE "</TR>"
	. . WRITE YCR,"</TABLE><br><br>",YCR
	. ;
	. FOR YI=1:1 QUIT:$PIECE(VORG(1),";",YI)=""  DO
	. . SET YFORM = $PIECE(VORG(1),";",YI)
	. . IF $DATA(^WWWSOR(YUSER,"WWW042SP")) DO   ; SEITENUMBRÜCHE NACH JEDEM HAUPTMENÜPUNKT WENN AUFRUF ÜBER SAVESP^WWWHPS
	. . . IF LYFORM=0 IF $FIND(YFORM,"|") DO FF^WWWW() SET LYFORM=1 QUIT
	. . . IF LYFORM=1 IF $FIND(YFORM,"|")                           QUIT
	. . . SET LYFORM = 0
	. . . DO FORM
	. . . DO  ;TYBD; BUTTON AUF DER SCHULUNGSUNTERLAGE
	. . . . QUIT:$GET(VORG(13))'=1   ;KEINE BUTTON ;no 
	. . . . NEW XVOR,URL1,YI,YMAXTEXT
	. . . . SET XVOR(10) = $GET(VORG(10))
	. . . . SET XVOR(3)  = $GET(VORG(13))
	. . . . SET XVOR(6)  = $GET(VORG(14))
	. . . . SET URL1     = YURL 
	. . . . NEW VORG
	. . . . MERGE VORG = XVOR
	. . . . SET YMAXTEXT = 1  ;ALLES DRUCKEN ;whatsoever print 
	. . . . DO BUTTON^WWW0042
	. . ;
	. . IF '$DATA(^WWWSOR(YUSER,"WWW042SP")) DO   ; SEITENUMBRÜCHE NACH JEDER SEITE WENN AUFRUF NICHT ÜBER SAVESP^WWWHPS
	. . . DO:YI'=1 FF^WWWW()
	. . . DO FORM
	
	QUIT
	
	
FORM ;DRUCKEN BEDIENUNGSANLEITUNG ;print operating manual 
	;-------------------------------------------------------------------------------
	; 25-May-2011	shobby	SR16925.2: IndividualTrainingText -> CustomTrainingText
	;-------------------------------------------------------------------------------
	NEW VORG,YI,PROG,NUMM,YBED,YBU,YYYFORM,FILE2,YQ,YTEXT
	
	SET YBED     = "DEMO"         ;BEDIENEN ;serve 
	SET YYYFORM  = "WWWHPR"
	SET YBEARB   = 0
	SET YADMIN   = 0
	SET %(YQUERY,"YFORM") = YFORM
	DO ^WWWFORMX  ;VORGABEN AUS WWW120/012     YVOR1=$GET(^WWW012(0,YM,1)) ; YVOR=$GET(^WWW120(0,YFORM,1))  ;FORMULARDATEN
	SET $PIECE(YVOR,Y,9)    = $PIECE($GET(^WWW012(0,YM,1)),Y,9)
	SET $PIECE(YVOR,Y,5)    = $PIECE($GET(^WWW012(0,YM,1)),Y,5)
	SET $PIECE(YVOR,Y,5)    = 137   ;HINTERGRUND WEISS ;foil         ; FIXME : reset <GRF>
	SET $PIECE(YVOR,Y,77)   = 137   ;INNENFARBE WEISS
	;SET $PIECE(YVOR1,Y,77) = 137   ;INNENFARBE WEISS
	SET $PIECE(YVOR,Y,13)   = $$$NO ;KEIN RAHMEN ;no framework 
	SET YFOART = $PIECE(YVOR,Y,2)    ;FORMULAR ART ;form Type 
	IF YFOART="" SET YFOART = 2
	SET YDATEI = $PIECE($GET(^WWW120(0,YFORM,1)),Y,11)               ;Class
	SET KOPF1  = $$^WWWUML($PIECE($GET(^WWW120(0,YFORM,1)),Y,1))     ;Heading
	IF $DATA(^WWW1201(0,YFORM,SPRACHE,1)) SET KOPF1 = $$^WWWUML($PIECE($GET(^WWW1201(0,YFORM,SPRACHE,1)),Y,1))
	;SET KOPF=$$^WWWTEXT(20)_" "_KOPF1  ; "Help"
	SET KOPF   = KOPF1
	SET YKOPF  = KOPF1
	SET YADMIN = 1
	WRITE YCR
	WRITE "<FONT"
	IF $PIECE(YVOR,Y,9)'="" WRITE " FACE="_""""_$PIECE($GET(^WWW100(0,"SCHRIFTART",SPRACHE,$PIECE(YVOR,Y,9),1)),Y,1)_""""
	IF $PIECE(YVOR,Y,7)'="" WRITE " SIZE="_""""_$PIECE(YVOR,Y,7)_""""
	
	; FIXME : Length = 6 obsolete use of hex codes (e.g. #FF00FF) rather than relation <GRF>
	IF $PIECE(YVOR,Y,6)'=""  DO
	. IF $LENGTH($PIECE(YVOR,Y,6))=6  WRITE " COLOR="_""""_"#"_$PIECE(YVOR,Y,6)_""""
	. IF $LENGTH($PIECE(YVOR,Y,6))'=6 WRITE " COLOR="_""""_$PIECE($GET(^WWW100(0,"FARBE",SPRACHE,$PIECE(YVOR,Y,6),1)),Y,1)_""""
	
	WRITE ">"       
	;W "<BR><HR><BR>"
	;S YNOFOOT=1
	SET %("VAR","YNOFOOT") = 1 
	SET %("VAR","YFORM")   = YFORM
	SET %("VAR","YRICHT1") = "FIRST"
	WRITE YCR,"<TABLE BORDER=0 CELLSPACING=0 WIDTH=100%>"
	DO
	. IF $DATA(^WWWSOR(YUSER,"WWW042SP")) WRITE YCR,"<TR><TD WIDTH=7%>&nbsp;</TD><TD WIDTH=93%>" QUIT
	. WRITE YCR,"<TR><TD>"
	
	SET YQ=1
	IF SH=0 IF DH=0 IF FH=0 DO   ;WEM;25226;01.03.2004;ANZEIGEN DES MENÜPUNKTES WENN NUR BILDER GEZEIGT WERDEN SOLLEN
	. SET YQ=0
	. WRITE "<BR><H3>"_YKOPF_"</H3>"
	. WRITE "</TD>"
	. WRITE YCR,"</TR>"
	. WRITE YCR,"</TABLE>"
	
	IF SH=1 DO   ;WEM;25226;02.03.2004;SCHULUNGSHILFETEXTÜBERSCHRIFT
	. WRITE YCR
	. WRITE "<HR COLOR="_YBLUE_">"
	. WRITE "<H2>"
	. ;------------------------------------------------------------------------
	. new strKOPF1
	. set strKOPF1 = $zconvert(KOPF1,"U")
	. ;IF $FIND($$^WWWUPER(KOPF1),".GIF") SET KOPF1=""
	. ;IF $FIND($$^WWWUPER(KOPF1),".JPG") SET KOPF1=""
	. IF $FIND(strKOPF1,".GIF") SET KOPF1 = ""
	. IF $FIND(strKOPF1,".JPG") SET KOPF1 = ""
	. WRITE $$^WWWTEXT(32975)_" "_KOPF1         ; "Training Help" ;SCHULUNGS - HILFETEXT
	. WRITE "</H2>"
	. WRITE "<HR COLOR="_YBLUE_">"
	. WRITE "</TD>"
	. WRITE YCR,"</TR>"
	. WRITE YCR,"</TABLE>",YCR
	
	IF (SH=1) || (YQ=0) DO
	. WRITE YCR,"<TABLE BORDER=0 CELLSPACING=0 WIDTH=100%>"
	. IF $DATA(^WWWSOR(YUSER,"WWW042SP")) WRITE YCR,"<TR><TD WIDTH=7%>&nbsp;</TD><TD WIDTH=93%>" QUIT
	. WRITE YCR,"<TR><TD>"
	
	IF SEITE'="" IF $DATA(^WWW1203(0,YFORM,SPRACHE,SEITE)) DO
	. SET YSEITE=SEITE
	. DO
	. . SET %("VAR","YSEITE")=YSEITE 
	. . ;SET FILE2=$$^WWWLOW("FORM_"_YFORM_"_"_SPRACHE_"_"_YSEITE_".HTM")  ;HTML
	. . SET FILE2=$zconvert("FORM_"_YFORM_"_"_SPRACHE_"_"_YSEITE_".HTM","L")  ;HTML
	. . WRITE YCR,"<CENTER><BR><IMG SRC="_""""_YGIF_$PIECE(FILE2,".",1)_".jpg"_""""_" BORDER=1></CENTER>"  ;BILD ANZEIGEN ;portrait display 
	. . ;DO ^WWWFORM
	. . ;DO FF^WWWW()
	
	IF SEITE="" IF $DATA(^WWW1203(0,YFORM,SPRACHE)) DO
	. SET YSEITE=""
	. FOR  SET YSEITE=$ORDER(^WWW1203(0,YFORM,SPRACHE,YSEITE)) QUIT:YSEITE=""  DO
	. . SET %("VAR","YSEITE")=YSEITE 
	. . ;SET FILE2=$$^WWWLOW("FORM_"_YFORM_"_"_SPRACHE_"_"_YSEITE_".HTM")  ;HTML
	. . SET FILE2=$zconvert("FORM_"_YFORM_"_"_SPRACHE_"_"_YSEITE_".HTM","L")  ;HTML
	. . WRITE YCR,"<CENTER><BR><IMG SRC="_""""_YGIF_$PIECE(FILE2,".",1)_".jpg"_""""_" BORDER=1></CENTER>"  ;BILD ANZEIGEN ;portrait display 
	. . ;DO ^WWWFORM
	. . ;DO FF^WWWW()
	
	IF SEITE="" IF '$DATA(^WWW1203(0,YFORM,SPRACHE)) DO
	. SET YSEITE=1
	. DO
	. . SET %("VAR","YSEITE")=YSEITE 
	. . ;SET FILE2=$$^WWWLOW("FORM_"_YFORM_"_"_SPRACHE_"_"_YSEITE_".HTM")  ;HTML
	. . SET FILE2=$zconvert("FORM_"_YFORM_"_"_SPRACHE_"_"_YSEITE_".HTM","L")  ;HTML
	. . WRITE YCR,"<CENTER><BR><IMG SRC="_""""_YGIF_$PIECE(FILE2,".",1)_".jpg"_""""_" BORDER=1></CENTER>"  ;BILD ANZEIGEN ;portrait display 
	. . ;DO ^WWWFORM
	. . ;DO FF^WWWW()
	
	WRITE "</TD>"
	WRITE YCR,"</TR>"
	WRITE YCR,"</TABLE>"
	
	IF (SH'=0) || (DH'=0) || (FH'=0) DO   ;WEM;25226;01.03.2004;ANZEIGEN DES MENÜPUNKTES NACH DEM BILD
	. WRITE YCR,"<TABLE BORDER=0 CELLSPACING=0 WIDTH=100%>"
	. DO
	. . IF $DATA(^WWWSOR(YUSER,"WWW042SP")) WRITE YCR,"<TR><TD WIDTH=7%>&nbsp;</TD><TD WIDTH=93%>" QUIT
	. . WRITE YCR,"<TR><TD>"
	. ;
	. WRITE "<BR><H3>"_YKOPF_"</H3>"
	. WRITE "</TD>"
	. WRITE YCR,"</TR>"
	. WRITE YCR,"</TABLE>"
	
	IF FH=1 DO   ; MIT INFORMATIONEN ZUM GESAMTEN MENÜPUNKT ;by means of 
	. SET YTEXT=$PIECE($GET(^WWW127(0,YFORM,"M",0,SPRACHE,1)),Y,1)  ;WEM;25188;03.03.2004;WENN BUTTONTEXT UNTER LFD 0 GESPEICHERT WORDEN IST, STATT UNTER LFD 1
	. IF YTEXT="" SET YTEXT=$PIECE($GET(^WWW127(0,YFORM,"M",1,SPRACHE,1)),Y,1)
	. IF $LENGTH(YTEXT)>10 DO  ;IF $LENGTH(TEXT)<200 DO
	. . IF $FIND(YTEXT,"Assistance Text") QUIT 
	. . IF $FIND(YTEXT,"Help Text")       QUIT
	. . WRITE YCR,"<TABLE BORDER=0 CELLSPACING=0 WIDTH=100%>"
	. . WRITE YCR,"<TR>"
	. . DO
	. . . IF $DATA(^WWWSOR(YUSER,"WWW042SP")) WRITE YCR,"<TD WIDTH=7%>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD><TD WIDTH=92%>" QUIT   ;WEM;25131;19.02.2004;ANDERES LAYOUT WENN AUFRUF ÜBER WWW0042SP
	. . . WRITE YCR,"<TD NOWRAP>"
	. . ;
	. . IF $PIECE(YVOR,Y,9)'="" WRITE "<FONT FACE="_""""_$PIECE($GET(^WWW100(0,"SCHRIFTART",SPRACHE,$PIECE(YVOR,Y,9),1)),Y,1)_"""" WRITE " SIZE=2>"
	. . WRITE YCR
	. . SET YEDITOR=1
	. . DO TEXT^WWWHELP() // BR014099
	. . WRITE YCR,"</TD></TR>" DO ^WWWFRAME(1)
	. . WRITE YCR,"<br><br>"
	
	IF SH=1 DO   ; TIPPS FÜR TRAINING UND SCHULUNG ;to training And 
	. IF ($PIECE($GET(^WWW127(0,YFORM,"M",0,SPRACHE,1)),Y,3)'="") || ($PIECE($GET(^WWW127(0,YFORM,"M",1,SPRACHE,1)),Y,3)'="") DO
	. . SET YTEXT=$GET(^WWW127(0,YFORM,"M",0,SPRACHE,1))            ;WEM;25188;03.03.2004;WENN BUTTONTEXT UNTER LFD 0 GESPEICHERT WORDEN IST, STATT UNTER LFD 1
	. . IF YTEXT="" SET YTEXT=$GET(^WWW127(0,YFORM,"M",1,SPRACHE,1))
	. . SET YQ=0
	. . IF $DATA(^WWWSOR(YUSER,"WWW042SP")) DO   ; NUR PRÜFUNG BEI LABEL SAVESP ;only quiz next to 
	. . . IF $PIECE(YTEXT,Y,4)'="" DO  QUIT
	. . . . SET YQ=$$CHECKSP^WWWHPS($GET(^WWWSOR(YUSER,"VORG10")),$PIECE(YTEXT,Y,4))
	. . . ;
	. . . ;IF $PIECE(YTEXT,Y,4)="" SET YQ=1   ; NICHT DRUCKEN TIPPS WENN KEIN SP EINGEGEBEN
	. . ;
	. . QUIT:YQ=1
	. . SET YTEXT=$PIECE(YTEXT,Y,3)
	. . NEW POCT,CT  ;WEM;25601;28.04.2004;INDIVIDUELLE SCHULUNGSHILFETEXTE IN PROGRAMMTEXT ANZEIGEN
	. . SET POCT=+$PIECE($GET(^WWW121D(0,YFORM,0,YM,1)),Y,121)   ; PRINT ONLY CUSTOMIZED TEXT
	. . ;SET CT=$PIECE($GET(^WWW121D(0,YFORM,0,YM,1)),Y,120)      ; CUSTOMIZED TEXT
	. . SET CT=$$CustomTrainingText^WWW121D($GET(^WWW121D(0,YFORM,0,YM,1)))      ; CUSTOMIZED TEXT ;SR16925.2
	. . IF POCT=1 IF CT'="" SET YTEXT="" SET YTEXT=CT
	. . IF POCT=0 IF CT'="" SET YTEXT=YTEXT_"||"_CT
	. . QUIT:$TRANSLATE(YTEXT,"|","")=""
	. . WRITE YCR,"<TABLE BORDER=0 CELLSPACING=0 WIDTH=100%>"
	. . IF '$DATA(^WWWSOR(YUSER,"WWW042SP")) WRITE YCR,"<TR><TD>"
	. . IF $DATA(^WWWSOR(YUSER,"WWW042SP"))  WRITE YCR,"<TR><TD WIDTH=7%>&nbsp;</TD><TD WIDTH=93%>"   ;WEM;25131;19.02.2004;ANDERES LAYOUT WENN AUFRUF ÜBER WWW0042SP
	. . IF $PIECE(YVOR,Y,9)'="" WRITE "<FONT FACE="_""""_$PIECE($GET(^WWW100(0,"SCHRIFTART",SPRACHE,$PIECE(YVOR,Y,9),1)),Y,1)_"""" WRITE " SIZE=2>"
	. . WRITE YCR
	. . SET YEDITOR=1
	. . DO TEXT^WWWHELP() // BR014099
	. . WRITE YCR,"</TD></TR>" DO ^WWWFRAME(1)
	. . WRITE YCR,"<br><br>"
	
	IF DH=1 DO   ; DATENFELDHILFE
	. WRITE YCR,"<TABLE BORDER=0 CELLSPACING=0 WIDTH=100%>"
	. IF '$DATA(^WWWSOR(YUSER,"WWW042SP")) WRITE YCR,"<TR><TD>"
	. IF $DATA(^WWWSOR(YUSER,"WWW042SP"))  WRITE YCR,"<TR><TD WIDTH=7%>&nbsp;</TD><TD>"   ;WEM;25131;19.02.2004;ANDERES LAYOUT WENN AUFRUF ÜBER WWW0042SP
	. IF $PIECE(YVOR,Y,9)'="" WRITE "<FONT FACE="_""""_$PIECE($GET(^WWW100(0,"SCHRIFTART",SPRACHE,$PIECE(YVOR,Y,9),1)),Y,1)_"""" WRITE " SIZE=2>"
	. WRITE YCR
	. SET YEDITOR=1
	. DO HELFTEXT
	. WRITE YCR,"</TD></TR>" DO ^WWWFRAME(1)
	. WRITE YCR,"<br><br>"
	
	QUIT
	
KEY    ;EINSPRUNG VON WWW0042S NACH LINK ;within 
	SET KEY     = $GET(%(YQUERY,"YPARA"))
	SET VORG(1) = $PIECE(KEY,",",1)
	QUIT:VORG(1)=""
	
	SET SEITE = $PIECE(KEY,",",2)     ;YSEITE
	SET SH    = $PIECE(KEY,",",3)     ;SCHULUNG
	SET FH    = $PIECE(KEY,",",4)     ;FORMULAR HILFER ;form 
	SET DH    = $PIECE(KEY,",",5)     ;DATENFELD HILFER ;data item 
	DO WWWHPS
	QUIT
	
SAVE       ;EINSPRUNG VON WWW0042S NACH SPEICHERN ;within Save 
	NEW SH,FH,DH,MENU,YAPP,YPROG,FORMULAR,YI
	
	KILL ^WWWSOR(YUSER)
	SET SH=$GET(%(YQUERY,"VORG6"))
	SET FH=$GET(%(YQUERY,"VORG7"))
	SET DH=$GET(%(YQUERY,"VORG8"))
	
	SET MENU=""
	FOR YI(1)=1:1 SET MENU=$ORDER(^WWWDATEN(YM,+$HOROLOG,YUSER,"WWW0042S","V",MENU)) QUIT:MENU=""  DO             ;
	. ;WRITE MENU_"-------------"_$GET(^WWWDATEN(YM,+$H,YUSER,"WWW0042S","V",MENU,1))_"<BR>"
	. QUIT:$GET(^WWWDATEN(YM,+$HOROLOG,YUSER,"WWW0042S","V",MENU,1))'=1
	. SET YAPP=$PIECE($PIECE(MENU,"|",1),"YMENU",2)
	. SET YPROG=$TRANSLATE($PIECE(MENU,"|",2),"&",".")
	. SET FORMULAR=$PIECE(MENU,"|",3)
	. ;W YAPP_" "_YPROG_" "_FORMULAR_"<BR>"
	. QUIT:FORMULAR=""
	. SET ^WWWSOR(YUSER,1,YI(1))=FORMULAR
	
	SET VORG(1)=""
	SET YI(3)=""
	FOR  SET YI(3)=$ORDER(^WWWSOR(YUSER,1,YI(3)),-1) QUIT:YI(3)=""  DO
	. ;WRITE "^WWWSOR(YUSER,1,"_YI(3)_") "_"="_^WWWSOR(YUSER,1,YI(3))_"<BR>"
	. SET VORG(1)=$GET(^WWWSOR(YUSER,1,YI(3)))_";"_VORG(1)
	
	DO WWWHPS
	KILL ^WWWSOR(YUSER)
	QUIT
	
SAVESP   ; EINSPRUNG VON WWW0042SP   ;WEM;25131;18.02.2004;ERSTELLUNG DER TIPPS FÜR SCHULUNG UND TRAINING NACH SCHULUNGSPARAMETER
	NEW SH,FH,DH,YAPP,YPROG,YA,CHART,SATZ,YQ,TEMP
	
	KILL ^WWWSOR(YUSER)
	SET SH       =  $GET(VORG(6))          ; TIPPS FÜR TRAINING UND SCHULUNG ;to training And 
	SET FH       =  $GET(VORG(7))          ; MIT KURZINFO ZUM GESAMTEN MENÜPUNKT ;by means of 
	SET DH       =  $GET(VORG(8))          ; MIT AUSFÜHRLICHER DATENFELDHILFE ;by means of 
	SET VORG(10) =  $GET(VORG(10))         ; SCHULUNGSTHEMA
	SET VORG(11) = +$GET(VORG(11))         ; MIT VORANGESTELLTEN INFO ZU DEN SCHULUNGEN ;by means of within 
	SET VORG(12) = +$GET(VORG(12))         ; MIT ANZEIGE DER ÜBERSICHTSCHARTS ;by means of Show the 
	SET VORG(13) = +$GET(VORG(13))         ; MIT BUTTONS/UNTERFORMULARE ;by means of 
	SET VORG(14) = +$GET(VORG(14))         ; MIT ANZEIGE EINER KURZINFO ZUM BUTTON/UNTERFORMULAR ;by means of Show unit 
	SET ^WWWSOR(YUSER,"WWW042SP")=""       ; MERKER FÜR ANDERES LAYOUT ;to 
	SET ^WWWSOR(YUSER,"VORG10")=VORG(10)
	IF VORG(10)'="" SET YNOFOOT=1
	IF VORG(11)=1 DO
	. DO LISTSP^WWW0042   ; DRUCKEN DER SCHULUNGSPARAMETERDATEN ;print the 
	
	SET VORG(1) = ""
	SET YA      = ""
	SET YQ(1)   = 0
	SET YAPP    = ""
	FOR  SET YAPP = $ORDER(^WWW004(0,YAPP)) QUIT:YAPP=""  DO
	. IF $GET(YPARA)'="" QUIT:$GET(YPARA)'=YAPP
	. QUIT:((YAPP="Demo") || (YAPP="Menue_Manager"))
	. ;
	. SET YPROG = ""
	. FOR  SET YPROG = $ORDER(^WWW004(0,YAPP,YPROG)) QUIT:YPROG=""  DO
	. . SET YA = $GET(^WWW004(0,YAPP,YPROG,1))
	. . IF $PIECE(YA,Y,7)'="" IF $zconvert($PIECE(YA,Y,7),"U")="NOSHOW" IF $PIECE(YA,Y,26)="" QUIT   ;WEM;25188;02.03.2004;KEINE ANZEIGE VON NOSHOW-FORMULAREN WENN KEIN SCHULUNGSPARAMETER VORHANDEN IST
	. . ;
	. . IF $LENGTH(YPROG,".")=2 SET VORG(1)=$GET(VORG(1))_";|"   ; MERKER FÜR SEITENUMBRUCH NACH NEUEM HAUPTMENÜPUNKT
	. . SET YQ(1)=0
	. . SET YQ(1)=$$^WWW0042SSP(YAPP,YPROG,VORG(10),$PIECE(YA,Y,26))   ; PRÜFUNG OB PROGRAMM ODER DESSEN MENÜPUNKT (BZW. HAUPTMENÜPUNKT) DEN SP ENTHALTEN ;quiz whether programme Or whose include 
	. . ;IF YAPP="WWS_/_PPS_Manager" IF YPROG="05." W VORG(10)_" "_YQ(1)
	. . QUIT:YQ(1)=1
	. . QUIT:$PIECE(YA,Y,2)=""
	. . QUIT:$DATA(^WWWSOR(YUSER,"SP","FORM",$PIECE(YA,Y,2)))   ; VERMEIDUNG VON DOPPELDRUCKEN WENN FORMULAR IN MEHREREN MENÜPUNKTEN ;avoidance when form within 
	. . DO
	. . . IF $GET(VORG(1))="" SET VORG(1)=$PIECE(YA,Y,2) QUIT
	. . . SET VORG(1)=$GET(VORG(1))_";"_$PIECE(YA,Y,2)
	. . ;
	. . SET ^WWWSOR(YUSER,"SP","FORM",$PIECE(YA,Y,2))=""
	. . IF VORG(12)=1 DO   ; CHARTS ZWISCHENSPEICHERN WENN VORHANDEN ;when on hand 
	. . . QUIT:$PIECE(YA,Y,21)=""
	. . . SET CHART=""
	. . . DO
	. . . . IF SPRACHE="DE" SET CHART=$PIECE($PIECE(YA,Y,21),",",1) QUIT       ; CHART IN DE ;within 
	. . . . SET CHART=$PIECE($PIECE(YA,Y,21),",",2)                            ; ANSONSTEN CHART IN EN ;within 
	. . . ;
	. . . IF CHART'="" DO
	. . . . IF SPRACHE'=""       SET $PIECE(YA,Y,1)=$PIECE($GET(^WWW0041(0,YAPP,YPROG,SPRACHE,1)),Y,1)
	. . . . IF $PIECE(YA,Y,1)="" SET $PIECE(YA,Y,1)=$PIECE($GET(^WWW004(0,YAPP,YPROG,1)),Y,1)
	. . . . SET ^WWWSOR(YUSER,YAPP,YPROG)=$PIECE(YA,Y,1)_Y_CHART               ; SPEICHERN PROGRAMMNAME UND CHART ;Save And 
	
	SET VORG(1)=$EXTRACT(VORG(1),$LENGTH($PIECE(VORG(1),";",1))+2,$LENGTH(VORG(1)))   ; ERSTEN PIECE LÖSCHEN
	DO WWWHPS 
	IF VORG(12)=1 DO   ; ANZEIGE DER ÜBERSICHTSCHARTS AM ENDE ;Show the to the termination 
	. SET SATZ=""
	. WRITE YCR,"<br><br>"
	. WRITE YCR,"<hr color="_YBLUE_" width=100%>"
	. WRITE YCR,"<P style="_""""_"page-break-before:always;"_""""_">"
	. SET YAPP=""
	. FOR  SET YAPP=$ORDER(^WWWSOR(YUSER,YAPP),-1) QUIT:YAPP=""  DO
	. . SET YPROG=""
	. . FOR  SET YPROG=$ORDER(^WWWSOR(YUSER,YAPP,YPROG),-1) QUIT:YPROG=""  DO
	. . . SET SATZ=$GET(^WWWSOR(YUSER,YAPP,YPROG))
	. . . QUIT:$PIECE(SATZ,Y,2)=""
	. . . WRITE YCR,"<br>"
	. . . WRITE YCR,"<TABLE CELLSPACING=0 BORDER=0 WIDTH=100%>"
	. . . WRITE YCR,"<TR><TD WIDTH=7%>&nbsp;</TD><TD WIDTH=93%>"
	. . . WRITE "<FONT SIZE=3><B>"
	. . . WRITE $PIECE(SATZ,Y,1)
	. . . WRITE "</B></FONT>"
	. . . WRITE "</TD></TR>"
	. . . WRITE YCR,"</TABLE>"
	. . . ;
	. . . WRITE YCR,"<TABLE CELLSPACING=0 BORDER=0 WIDTH=100%>"
	. . . WRITE YCR,"<TR><TD WIDTH=7%>&nbsp;</TD><TD WIDTH=93%>&nbsp;</TD></TR>"
	. . . WRITE YCR,"<TR><TD WIDTH=7%>&nbsp;</TD><TD WIDTH=93% ALIGN=CENTER>"
	. . . WRITE "<IMG SRC="_YGIF
	. . . WRITE $PIECE(SATZ,Y,2)
	. . . WRITE " border=0>"
	. . . WRITE "</TD></TR>"_YCR
	. . . WRITE "</TABLE>"
	. . . ;
	. . . WRITE YCR,"<P style="_""""_"page-break-before:always;"_""""_">"
	. . . WRITE YCR
	
	KILL ^WWWSOR(YUSER)
	QUIT
	
SCHULUNG ; EINSPRUNG VON AUSSEN MIT YADMIN UND YFORM ;by means of And 
	;------------------------------------------------------------------------
	;IF YBEDBER=1 WRITE YCR,YCR,"<!-- ************************* ANZEIGEN SCHULUNG HILFETEXTE (SCHULUNG^WWWHPS)************************* -->",YCR,YCR
	;WRITE "<TR>"
	;WRITE "<TD>"
	WRITE "<HR COLOR="_YBLUE_">"
	WRITE "<H2>"
	;------------------------------------------------------------------------
	new strKOPF1
	set strKOPF1=$zconvert(KOPF1,"U")
	
	;IF $FIND($$^WWWUPER(KOPF1),".GIF") SET KOPF1=""
	;IF $FIND($$^WWWUPER(KOPF1),".JPG") SET KOPF1=""
	IF $FIND(strKOPF1,".GIF") SET KOPF1=""
	IF $FIND(strKOPF1,".JPG") SET KOPF1=""
	
	WRITE $$^WWWTEXT(32975)_" "_KOPF1         ; "Training Help" ;SCHULUNGS - HILFETEXT
	WRITE "</H3>"
	WRITE "<HR COLOR="_YBLUE_">"
	IF $PIECE($GET(^WWW127(0,YFORM,"M",1,SPRACHE,1)),Y,3)'="" DO
	. SET YTEXT=$PIECE($GET(^WWW127(0,YFORM,"M",1,SPRACHE,1)),Y,3)
	. ;W YTEXT_"<BR>"
	. DO TEXT^WWWHELP() // BR014099
	
	;WRITE YCR,"</TD>"
	;WRITE YCR,"</TR>"
	;WRITE YCR,"</TABLE>"
	;WRITE YCR,"<BR><BR>"
	SET Q=0
	QUIT
	
HELFTEXT ; EINSPRUNG 
	;-------------------------------------------------------------------------------
	;
	;
	; Inputs:
	;
	; Returns:
	;
	; History:
    ; 25-May-2011	shobby	SR16925.2: IndividualHelpText->CustomHelpText
 	; 07-Jun-2010	GRF		SR17146: call "DD.MM.YYYY" wrapper for WWWDATE (IntToDMY)
 	; 							[but this is in disabled block] 
	; 18-Sep-2008	shobby	BR014966: Support language texts for customisation help text.
	;-------------------------------------------------------------------------------
 
	SET Q=0
	;------------------------------------------------------------------------
	;MANUELLE, PRIMAER, LISTENFELDER
	FOR YI="M" DO
	. IF YSEITE=1 IF YI="P" IF $DATA(^WWW1203(0,YFORM,SPRACHE,1)) SET YSEI=1 DO  ;SEITENREITER FÜR START ;to take-off 
	. . WRITE "<HR>"
	. . SET YYSEIT = $PIECE($GET(^WWW1203(0,YFORM,SPRACHE,YSEI,1)),Y,1)
	. . IF YYSEIT="" DO
	. . . IF SPRACHE="DE"  SET YYSEIT = "seite"_(+YSEI)_".gif"
	. . . IF SPRACHE'="DE" SET YYSEIT = "page"_(+YSEI)_".gif"
	. . ;
	. . IF $FIND(YYSEIT,".gif")  || $FIND(YYSEIT,".GIF")  WRITE YCR,"<IMG SRC="_""""_YGIF_YYSEIT_""""_">"
	. . IF '$FIND(YYSEIT,".gif") && '$FIND(YYSEIT,".GIF") WRITE YCR,"<B><FONT SIZE=5>",YYSEIT,"</FONT></B>"
	. . WRITE "<HR>"
	. ;
	. SET YLFN = ""
	. FOR  SET YLFN = $ORDER(^WWW127(0,YFORM,YI,YLFN)) QUIT:YLFN=""  DO
	. . IF YI="P"               QUIT:$PIECE($GET(^WWW121(0,YFORM,YLFN,1)),Y,102)=15    ;UNSICHTBAR ;viewless 
	. . IF (YI="D") || (YI="M") QUIT:$PIECE($GET(^WWW122(0,YFORM,YLFN,1)),Y,2)=15      ;DATENFELD UNSICHTBAR ;data item viewless 
	. . NEW YNOPRINT
	. . SET YNOPRINT = 1                ;SOLL DER TEXT GEDRUCKT WERDEN? 1=NEIN  ;the Text 
	. . ;
	. . IF YI="D" SET YSATZ = $GET(^WWW122(0,YFORM,YLFN,1)) IF YSATZ'="" DO  IF $PIECE(YSATZ,Y,50)'="" QUIT:$PIECE(YSATZ,Y,50)'=YOPTION
	. . . SET YLFNN    = $PIECE(YSATZ,Y,1)
	. . . SET YNOPRINT = 0
	. . . IF YDATEI'="" IF YLFNN'="" IF $GET(^WWW127(0,YFORM,YI,YLFN,"DE",1))="" DO
	. . . . IF $LENGTH($PIECE($GET(^WWW003(0,YDATEI,YLFNN,1)),Y,15))>10 DO
	. . . . . SET ^WWW127(0,YFORM,YI,YLFN,"DE",1) = $PIECE($GET(^WWW003(0,YDATEI,YLFNN,1)),Y,15)  ;TEXT AUS DATENSATZDEF. ;Text out of 
	. . ;
	. . IF YI="P" DO  IF Q=1 SET Q=0 QUIT
	. . . IF YDATEI="" QUIT
	. . . IF $DATA(^WWW002(0,YDATEI,YLFN)) SET YNOPRINT=0
	. . . IF $TRANSLATE($PIECE($GET(^WWW121(0,YFORM,YLFN,1)),Y,16)," ")'="" SET Q=1 QUIT  ;FIXKEY
	. . . IF $GET(^WWW127(0,YFORM,YI,YLFN,"DE",1))="" SET ^WWW127(0,YFORM,YI,YLFN,"DE",1)=$PIECE($GET(^WWW002(0,YDATEI,YLFN,1)),Y,15)  ;TEXT AUS DATENSATZDEF. ;Text out of 
	. . . WRITE "<H3>"
	. . . IF YADMIN=1 DO
	. . . . WRITE "<A HREF="_""""_YAKTION_"EP=WWWFORM&amp;YFORM=WWW127"
	. . . . WRITE "&amp;YBED="_YBED_"&amp;YUCI="_$GET(YUCI)_"&amp;YM="_YM
	. . . . WRITE "&amp;YUSER="_YUSER
	. . . . WRITE "&amp;FORMULAR="_YFORM
	. . . . WRITE "&amp;ERFASSUNG="_YI
	. . . . WRITE "&amp;BEARBEITUNG="_YLFN
	. . . . WRITE "&amp;SPRACHE="_$$^WWWLANGU(YBED)
	. . . . WRITE "&amp;YFKEY="_YFORM_","_YI_","_YLFN_","_$$^WWWLANGU(YBED)
	. . . . WRITE "&amp;YKEY="_YFORM_","_YI_","_YLFN_","_$$^WWWLANGU(YBED)
	. . . . WRITE "&amp;YANZ="_YANZ
	. . . . WRITE """"_">"
	. . . ;
	. . . DO
	. . . . IF $DATA(^WWW0021(0,YDATEI,YLFN,SPRACHE,1)) WRITE $PIECE(^WWW0021(0,YDATEI,YLFN,SPRACHE,1),Y,1) QUIT
	. . . . WRITE $PIECE($GET(^WWW002(0,YDATEI,YLFN,1)),Y,2)
	. . . ;
	. . . IF YADMIN=1 WRITE "</A>"
	. . . WRITE "</H3>"
	. . ;
	. . IF YI="M" DO  ;MANUELLE FELDER
	. . . QUIT:'$DATA(^WWW122(0,YFORM,YLFN,1))
	. . . SET YNOPRINT=0
	. . . QUIT:$PIECE($GET(^WWW122(0,YFORM,YLFN,1)),Y,1)'=""  ;DATENFELD ;data item 
	. . . WRITE "<H3>"
	. . . IF YADMIN=1 DO
	. . . . WRITE "<A HREF="_""""_YAKTION_"EP=WWWFORM&amp;YFORM=WWW127"
	. . . . WRITE "&amp;YBED="_YBED_"&amp;YUCI="_$GET(YUCI)_"&amp;YM="_YM
	. . . . WRITE "&amp;YUSER="_YUSER
	. . . . WRITE "&amp;FORMULAR="_YFORM
	. . . . WRITE "&amp;ERFASSUNG="_YI
	. . . . WRITE "&amp;BEARBEITUNG="_YLFN
	. . . . WRITE "&amp;SPRACHE="_$$^WWWLANGU(YBED)
	. . . . WRITE "&amp;YFKEY="_YFORM_","_YI_","_YLFN_","_$$^WWWLANGU(YBED)
	. . . . WRITE "&amp;YKEY="_YFORM_","_YI_","_YLFN_","_$$^WWWLANGU(YBED)
	. . . . WRITE "&amp;YANZ="_YANZ
	. . . . WRITE """"_">"
	. . . ;
	. . . DO
	. . . . IF $GET(^WWW1221(0,YFORM,YLFN,SPRACHE,1))'="" WRITE $PIECE(^WWW1221(0,YFORM,YLFN,SPRACHE,1),Y,1) QUIT
	. . . . WRITE $PIECE($GET(^WWW122(0,YFORM,YLFN,1)),Y,12)
	. . . ;
	. . . IF YADMIN=1 WRITE "</A>"
	. . . WRITE "</H3>"
	. . ;
	. . IF $EXTRACT(YI)="L" QUIT  ;LISTENSELEKTION
	. . DO
	. . . IF SPRACHE'="" SET YTEXT=$$^WWWSETL("^WWW127(0,"_""""_YFORM_""""_","_""""_YI_""""_","_""""_YLFN_""""_","_""""_SPRACHE_""""_","_""""_1_""""_")")
	. . . IF YTEXT=""    SET YTEXT=$$^WWWSETL("^WWW127(0,"_""""_YFORM_""""_","_""""_YI_""""_","_""""_YLFN_""""_","_""""_"DE"_""""_","_""""_1_""""_")")
	. . ;
	. . IF (YLFN=0) || (YLFN=1) SET $PIECE(YTEXT,Y,1)="" ;WEM;25188;03.03.2004;KEINE ANZEIGE DER MENÜPUNKTHILFE 
	. . IF SH'=1 SET $PIECE(YTEXT,Y,3) = ""              ;WEM;25188;02.03.2004;KEIN DRUCK DER TIPPS FÜR TRAINING UND SCHULUNG
	. . SET $PIECE(YTEXT,Y,4) = ""                       ;WEM;25188;02.03.2004;KEIN DRUCK DES SCHULUNGSPARAMETERS IN DEN SCHULUNGSUNTERLAGEN
	. . IF SH=1 DO
	. . . NEW POCT,CT  ;WEM;25601;28.04.2004;INDIVIDUELLE SCHULUNGSHILFETEXTE IN PROGRAMMTEXT ANZEIGEN
	. . . SET POCT=""
	. . . SET CT=""
	. . . DO
	. . . . IF YLFN=0 SET $PIECE(YTEXT,Y,3)="" QUIT
	. . . . IF YLFN=1 IF SPRACHE'="" IF $GET(^WWW127(0,YFORM,YI,0,SPRACHE,1))="" SET $PIECE(YTEXT,Y,3)="" QUIT
	. . . . SET POCT = +$PIECE($GET(^WWW122D(0,YFORM,YLFN,YM,1)),Y,121)      ; PRINT ONLY CUSTOMIZED TEXT
	. . . . SET CT   =  $PIECE($GET(^WWW122D(0,YFORM,YLFN,YM,1)),Y,120)      ; CUSTOMIZED TEXT
	. . . ;
	. . . IF +POCT=1 IF CT'="" SET $PIECE(YTEXT,Y,3)="" SET $PIECE(YTEXT,Y,3)=CT
	. . . IF +POCT=0 IF CT'="" SET $PIECE(YTEXT,Y,3)=$PIECE(YTEXT,Y,3)_"||"_CT
	. . ;
	. . IF YADMIN=1 SET YTEXT=$PIECE(YTEXT,Y,1,3)           ;BEC;09.08.04;26232;NUR DIE ERSTEN 3 FELDER
	. . IF YADMIN=1 SET YTEXT=$TRANSLATE(YTEXT,Y,"|")       ;ANZEIGE HILFE UND SYSTEM ;Show succour And system 
	. . ;SET YTEXT=$PIECE(YTEXT,"~",1)                      ;NUR 1.TEIL ANZEIGEN    ;WEM;25601;28.04.2004;AUSKOMMENTIERT
	. . IF SH=1  SET YTEXT=$PIECE(YTEXT,Y,1)_"||"_$PIECE(YTEXT,Y,3)  ;WEM;25601;28.04.2004;MIT SCHULUNGSHILFETEXT
	. . IF SH'=1 SET YTEXT=$PIECE(YTEXT,Y,1)
	. . ;
	. . IF YI="P"               IF $DATA(^WWW121D(0,YFORM,YLFN,YM,1)) SET YTEXT=YTEXT_"|"_$$CustomHelpText^WWW121D(^WWW121D(0,YFORM,YLFN,YM,1))  ;ZUSATZHILFE ;SR16925.2
	. . IF (YI="D") || (YI="M") IF $DATA(^WWW122D(0,YFORM,YLFN,YM,1)) SET YTEXT=YTEXT_"|"_$$CustomHelpText^WWW122D(^WWW122D(0,YFORM,YLFN,YM,1))               ;SR16925.2
	. . IF YI'="M" IF YNOPRINT=0 IF YTEXT="" SET YTEXT = $$^WWWTEXT(28)  ; "No help text available"
	. . ;vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv Disabled Block
	. . ;IF SPRACHE="EN" IF YADMIN=1 DO
	. . . ;IF $PIECE($GET(^WWW012(0,YM,1)),Y,97)="" SET $PIECE(^WWW012(0,YM,1),Y,97)="http://de.altavista.com/scripts/eusearchengine.dll?aveutf8=1&aveenc=22&fish=1&bblType=urltext&lp="_$$^WWWLOW($$^WWWLANGU(YBED))_"_"_$$^WWWLOW("EN")_"&urltext="
	. . . ;SET $PIECE(^WWW012(0,YM,1),Y,97)="http://uebersetzer.web.de/ergebnis/?id=V00-"_$EXTRACT($$^WWWYEAR($H),3,4)_$EXTRACT($$^WWWDATE($H),4,5)_$EXTRACT($$^WWWDATE($H),1,2)_"-**cN0-00"_"&domain=GEN&pair=ge&text="
	. . . WRITE "<A HREF="_""""_$PIECE($GET(^WWW012(0,YM,1)),Y,97)_$$^WWWUMLAU($TRANSLATE(YTEXT,"|?><'"," !"))
	. . . WRITE """"
	. . . WRITE " TARGET=TRANSLATE"
	. . . WRITE ">"
	. . . WRITE "<img SRC="_""""_YGIF_"language.gif"_""""_" "_YWIDTH_" "_YHEIGHT_" TITLE=translate BORDER=0"
	. . . WRITE ">"
	. . . WRITE "</A>"
	. . . WRITE "<BR>"
	. . ;^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
	. . DO TEXT^WWWHELP()
	
	;------------------------------------------------------------------------
	;PRIMAER, LISTENFELDER
	FOR YI="P","LP","LD" DO
	. IF YSEITE=1 IF YI="P" IF $DATA(^WWW1203(0,YFORM,SPRACHE,1)) SET YSEI=1 DO  ;SEITENREITER FÜR START ;to take-off 
	. . WRITE "<HR>"
	. . SET YYSEIT=$PIECE($GET(^WWW1203(0,YFORM,SPRACHE,YSEI,1)),Y,1)
	. . IF YYSEIT="" DO
	. . . IF SPRACHE="DE"  SET YYSEIT="seite"_(+YSEI)_".gif"
	. . . IF SPRACHE'="DE" SET YYSEIT="page"_(+YSEI)_".gif"
	. . ;
	. . IF $FIND(YYSEIT,".gif")||$FIND(YYSEIT,".GIF")     WRITE YCR,"<IMG SRC="_""""_YGIF_YYSEIT_""""_">"
	. . IF '$FIND(YYSEIT,".gif") IF '$FIND(YYSEIT,".GIF") WRITE YCR,"<B><FONT SIZE=5>",YYSEIT,"</FONT></B>"
	. . WRITE "<HR>"
	. ;
	. SET YLFN = ""
	. FOR  SET YLFN = $ORDER(^WWW127(0,YFORM,YI,YLFN)) QUIT:YLFN=""  DO
	. . IF YI="P"               QUIT:$PIECE($GET(^WWW121(0,YFORM,YLFN,1)),Y,102)=15  ;UNSICHTBAR ;viewless 
	. . IF (YI="D") || (YI="M") QUIT:$PIECE($GET(^WWW122(0,YFORM,YLFN,1)),Y,2)=15    ;DATENFELD UNSICHTBAR ;data item viewless 
	. . NEW YNOPRINT
	. . SET YNOPRINT = 1  ;SOLL DER TEXT GEDRUCKT WERDEN? 1=NEIN  ;the Text
	. . ;
	. . ; FIXME : Should be WWW122 <GRF> ? where?
	. . ; 
	. . IF YI="D" SET YSATZ = $GET(^WWW122(0,YFORM,YLFN,1)) IF YSATZ'="" DO  IF $PIECE(YSATZ,Y,50)'="" QUIT:$PIECE(YSATZ,Y,50)'=YOPTION
	. . . SET YLFNN    = $PIECE(YSATZ,Y,1)
	. . . SET YNOPRINT = 0
	. . . IF YDATEI'="" IF YLFNN'="" IF $GET(^WWW127(0,YFORM,YI,YLFN,"DE",1))="" IF $LENGTH($PIECE($GET(^WWW003(0,YDATEI,YLFNN,1)),Y,15))>10 SET ^WWW127(0,YFORM,YI,YLFN,"DE",1)=$PIECE($GET(^WWW003(0,YDATEI,YLFNN,1)),Y,15)  ;TEXT AUS DATENSATZDEF. ;Text out of 
	. . ;
	. . IF YI="P" DO  IF Q=1 SET Q=0 QUIT
	. . . IF YDATEI="" QUIT
	. . . IF $DATA(^WWW002(0,YDATEI,YLFN)) SET YNOPRINT=0
	. . . IF $TRANSLATE($PIECE($GET(^WWW121(0,YFORM,YLFN,1)),Y,16)," ")'="" SET Q=1 QUIT  ;FIXKEY
	. . . IF $GET(^WWW127(0,YFORM,YI,YLFN,"DE",1))="" SET ^WWW127(0,YFORM,YI,YLFN,"DE",1)=$PIECE($GET(^WWW002(0,YDATEI,YLFN,1)),Y,15)  ;TEXT AUS DATENSATZDEF. ;Text out of 
	. . . WRITE "<H3>"
	. . . IF YADMIN=1 DO
	. . . . WRITE "<A HREF="_""""_YAKTION_"EP=WWWFORM&amp;YFORM=WWW127"
	. . . . WRITE "&amp;YBED="_YBED_"&amp;YUCI="_$GET(YUCI)_"&amp;YM="_YM
	. . . . WRITE "&amp;YUSER="_YUSER
	. . . . WRITE "&amp;FORMULAR="_YFORM
	. . . . WRITE "&amp;ERFASSUNG="_YI
	. . . . WRITE "&amp;BEARBEITUNG="_YLFN
	. . . . WRITE "&amp;SPRACHE="_$$^WWWLANGU(YBED)
	. . . . WRITE "&amp;YFKEY="_YFORM_","_YI_","_YLFN_","_$$^WWWLANGU(YBED)
	. . . . WRITE "&amp;YKEY="_YFORM_","_YI_","_YLFN_","_$$^WWWLANGU(YBED)
	. . . . WRITE "&amp;YANZ="_YANZ
	. . . . WRITE """"_">"
	. . . ;
	. . . DO
	. . . . IF $DATA(^WWW0021(0,YDATEI,YLFN,SPRACHE,1)) WRITE $PIECE(^WWW0021(0,YDATEI,YLFN,SPRACHE,1),Y,1) QUIT
	. . . . WRITE $PIECE($GET(^WWW002(0,YDATEI,YLFN,1)),Y,2)
	. . . ;
	. . . IF YADMIN=1 WRITE "</A>"
	. . . WRITE "</H3>"
	. . ;
	. . IF YI="M" DO  ;MANUELLE FELDER
	. . . QUIT:'$DATA(^WWW122(0,YFORM,YLFN,1))
	. . . SET YNOPRINT=0
	. . . QUIT:$PIECE($GET(^WWW122(0,YFORM,YLFN,1)),Y,1)'=""  ;DATENFELD ;data item 
	. . . IF YADMIN=1 DO
	. . . . WRITE "<A HREF="_""""_YAKTION_"EP=WWWFORM&amp;YFORM=WWW127"
	. . . . WRITE "&amp;YBED="_YBED_"&amp;YUCI="_$GET(YUCI)_"&amp;YM="_YM
	. . . . WRITE "&amp;YUSER="_YUSER
	. . . . WRITE "&amp;FORMULAR="_YFORM
	. . . . WRITE "&amp;ERFASSUNG="_YI
	. . . . WRITE "&amp;BEARBEITUNG="_YLFN
	. . . . WRITE "&amp;SPRACHE="_$$^WWWLANGU(YBED)
	. . . . WRITE "&amp;YFKEY="_YFORM_","_YI_","_YLFN_","_$$^WWWLANGU(YBED)
	. . . . WRITE "&amp;YKEY="_YFORM_","_YI_","_YLFN_","_$$^WWWLANGU(YBED)
	. . . . WRITE "&amp;YANZ="_YANZ
	. . . . WRITE """"_">"
	. . . ;
	. . . DO
	. . . . IF $GET(^WWW1221(0,YFORM,YLFN,SPRACHE,1))'="" WRITE $PIECE(^WWW1221(0,YFORM,YLFN,SPRACHE,1),Y,1) QUIT
	. . . . WRITE $PIECE($GET(^WWW122(0,YFORM,YLFN,1)),Y,12)
	. . . ;
	. . . IF YADMIN=1 WRITE "</A>"
	. . . WRITE "</H3>"
	. . ;
	. . IF $EXTRACT(YI)="L" QUIT  ;LISTENSELEKTION
	. . DO
	. . . ;SET YTEXT=$$^WWWSETL("^WWW127(0,"_""""_YFORM_""""_","_""""_YI_""""_","_""""_YLFN_""""_","_""""_$$^WWWLANGU(YBED)_""""_","_""""_1_""""_")")   ;WEM;25138;20.02.2004;GEÄNDERT, DA WWWLANGU(YBED) AUCH DE ZURÜCKGEGEBEN HAT, WENN EIN ENGLISCHSPRACHIGER BENUTZER ANGEMELDET WAR.
	. . . ;IF YTEXT=""   SET YTEXT=$$^WWWSETL("^WWW127(0,"_""""_YFORM_""""_","_""""_YI_""""_","_""""_YLFN_""""_","_""""_"DE"_""""_","_""""_1_""""_")")
	. . . IF SPRACHE'="" SET YTEXT=$$^WWWSETL("^WWW127(0,"_""""_YFORM_""""_","_""""_YI_""""_","_""""_YLFN_""""_","_""""_SPRACHE_""""_","_""""_1_""""_")")
	. . . IF YTEXT=""    SET YTEXT=$$^WWWSETL("^WWW127(0,"_""""_YFORM_""""_","_""""_YI_""""_","_""""_YLFN_""""_","_""""_"DE"_""""_","_""""_1_""""_")")
	. . ;
	. . IF SH'=1 SET $PIECE(YTEXT,Y,3)=""  ;WEM;25188;02.03.2004;KEIN DRUCK DER TIPPS FÜR TRAINING UND SCHULUNG
	. . SET $PIECE(YTEXT,Y,4)=""           ;WEM;25188;02.03.2004;KEIN DRUCK DES SCHULUNGSPARAMETERS IN DEN SCHULUNGSUNTERLAGEN
	. . ;
	. . IF SH=1 DO
	. . . NEW POCT,CT  ;WEM;25601;28.04.2004;INDIVIDUELLE SCHULUNGSHILFETEXTE FÜR PRIMÄRSCHLÜSSEL UND LISTENFELDER ANZEIGEN
	. . . IF YI="P" DO
	. . . . SET POCT = +$PIECE($GET(^WWW121D(0,YFORM,YLFN,YM,1)),Y,121)      ; PRINT ONLY CUSTOMIZED TEXT
	. . . . ;SET CT   =  $PIECE($GET(^WWW121D(0,YFORM,YLFN,YM,1)),Y,120)      ; CUSTOMIZED TEXT
	. . . . SET CT   =  $$CustomTrainingText^WWW121D($GET(^WWW121D(0,YFORM,YLFN,YM,1)))      ; CUSTOMIZED TEXT ;BR014966  ;SR16925.2
	. . . ;
	. . . IF YI'="P" DO
	. . . . SET POCT = +$PIECE($GET(^WWW122D(0,YFORM,YLFN,YM,1)),Y,121)      ; PRINT ONLY CUSTOMIZED TEXT
	. . . ]]><![CDATA[. ;SET CT   =  $PIECE($GET(^WWW122D(0,YFORM,YLFN,YM,1)),Y,120)      ; CUSTOMIZED TEXT
	. . . . SET CT   =  $$CustomTrainingText^WWW122D($GET(^WWW122D(0,YFORM,YLFN,YM,1)))      ; CUSTOMIZED TEXT ;BR014966 ;SR16925.2
	. . . ;
	. . . IF POCT=1 IF CT'="" SET $PIECE(YTEXT,Y,3)="" SET $PIECE(YTEXT,Y,3)=CT
	. . . IF POCT=0 IF CT'="" SET $PIECE(YTEXT,Y,3)=$PIECE(YTEXT,Y,3)_"||"_CT
	. . ;
	. . IF YADMIN=1 SET YTEXT=$TRANSLATE(YTEXT,Y,"|")               ;ANZEIGE HILFE UND SYSTEM ;Show succour And system 
	. . ;SET YTEXT=$PIECE(YTEXT,"~",1)                              ;NUR 1.TEIL ANZEIGEN    ;WEM;25601;28.04.2004;AUSKOMMENTIERT
	. . IF SH=1  SET YTEXT=$PIECE(YTEXT,Y,1)_"||"_$PIECE(YTEXT,Y,3) ;WEM;25601;28.04.2004;MIT SCHULUNGSHILFETEXT
	. . IF SH'=1 SET YTEXT=$PIECE(YTEXT,Y,1)
	. . ;
	. . IF YI="P"               IF $DATA(^WWW121D(0,YFORM,YLFN,YM,1)) SET YTEXT=YTEXT_"|"_$PIECE(^WWW121D(0,YFORM,YLFN,YM,1),Y,5)  ;ZUSATZHILFE
	. . IF (YI="D") || (YI="M") IF $DATA(^WWW122D(0,YFORM,YLFN,YM,1)) SET YTEXT=YTEXT_"|"_$$CustomHelpText^WWW122D(^WWW122D(0,YFORM,YLFN,YM,1)) ;SR16925.2
	. . IF YI'="M" IF YNOPRINT=0 IF YTEXT="" SET YTEXT = $$^WWWTEXT(28)  ; "No help text available"
	. . ;vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv DISABLED BLOCK
	. . ;IF SPRACHE="EN" IF YADMIN=1 DO
	. . . ;IF $PIECE($GET(^WWW012(0,YM,1)),Y,97)="" SET $PIECE(^WWW012(0,YM,1),Y,97)="http://de.altavista.com/scripts/eusearchengine.dll?aveutf8=1&aveenc=22&fish=1&bblType=urltext&lp="_$$^WWWLOW($$^WWWLANGU(YBED))_"_"_$$^WWWLOW("EN")_"&urltext="
	. . . ;SET $PIECE(^WWW012(0,YM,1),Y,97)="http://uebersetzer.web.de/ergebnis/?id=V00-"_$EXTRACT($$^WWWYEAR($H),3,4)_$EXTRACT($$^WWWDATE($H),4,5)_$EXTRACT($$^WWWDATE($H),1,2)_"-**cN0-00"_"&domain=GEN&pair=ge&text="
	. . . WRITE "<A HREF="_""""_$PIECE($GET(^WWW012(0,YM,1)),Y,97)_$$^WWWUMLAU($TRANSLATE(YTEXT,"|?><'"," !"))
	. . . WRITE """"
	. . . WRITE " TARGET=TRANSLATE"
	. . . WRITE ">"
	. . . WRITE "<img SRC="_""""_YGIF_"language.gif"_""""_" "_YWIDTH_" "_YHEIGHT_" TITLE=translate BORDER=0"
	. . . WRITE ">"
	. . . WRITE "</A>"
	. . . WRITE "<BR>"
	. . ;^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
	. . DO TEXT^WWWHELP()
	
	;------------------------------------------------------------------------
	;DATENFELDER
	SET YI="D" DO
	. SET YSEI=""
	. FOR  SET YSEI=$ORDER(^WWW122s(0,3,$$^WWWUMLAU(YFORM,1),YSEI)) QUIT:YSEI=""  DO
	. . IF YSEITE'=1 QUIT:YSEI'=YSEITE   ;NUR WENN AUF DER SEITE ;only when upon the side 
	. . IF YSEI'=1 DO  
	. . . WRITE "<BR><HR>"
	. . . SET YYSEIT=$PIECE($GET(^WWW1203(0,YFORM,SPRACHE,YSEI,1)),Y,1)
	. . . IF YYSEIT="" IF +YSEI<11 DO
	. . . . IF SPRACHE="DE"  SET YYSEIT="seite"_(+YSEI)_".gif"
	. . . . IF SPRACHE'="DE" SET YYSEIT="page"_(+YSEI)_".gif"
	. . . ;
	. . . IF $FIND(YYSEIT,".gif") || $FIND(YYSEIT,".GIF")   WRITE YCR,"<IMG SRC="_""""_YGIF_YYSEIT_""""_">"
	. . . IF '$FIND(YYSEIT,".gif") IF '$FIND(YYSEIT,".GIF") WRITE YCR,"<B><FONT SIZE=5>",YYSEIT,"</FONT></B>"
	. . . WRITE "<HR>"
	. . ;
	. . SET YZEILE=""
	. . FOR  SET YZEILE=$ORDER(^WWW122s(0,3,$$^WWWUMLAU(YFORM,1),YSEI,YZEILE)) QUIT:YZEILE=""  DO
	. . . SET YSPL=""
	. . . FOR  SET YSPL=$ORDER(^WWW122s(0,3,$$^WWWUMLAU(YFORM,1),YSEI,YZEILE,YSPL)) QUIT:YSPL=""  DO
	. . . . SET YLFN=""
	. . . . FOR  SET YLFN=$ORDER(^WWW122s(0,3,$$^WWWUMLAU(YFORM,1),YSEI,YZEILE,YSPL,YFORM,YLFN)) QUIT:YLFN=""  DO
	. . . . . SET YSATZ=$GET(^WWW122(0,YFORM,YLFN,1))
	. . . . . SET YLFNN=$PIECE(YSATZ,Y,1)
	. . . . . IF YADMIN'=1 IF $PIECE(YLFNN,Y,2)=15 QUIT  ;NUR HIDDEN FELD NICHT ANZEIGEN ;TYBD;1.11.01 ;only field Not display 
	. . . . . QUIT:YLFNN=""
	. . . . . IF YDATEI="" QUIT
	. . . . . IF YLFNN'="" IF $GET(^WWW127(0,YFORM,YI,YLFNN,"DE",1))="" SET ^WWW127(0,YFORM,YI,YLFNN,"DE",1)=$PIECE($GET(^WWW003(0,YDATEI,YLFNN,1)),Y,15)  ;TEXT AUS DATENSATZDEF. ;Text out of 
	. . . . . WRITE "<H3>"
	. . . . . IF YADMIN=1 DO
	. . . . . . WRITE "<A HREF="_""""_YAKTION_"EP=WWWFORM&amp;YFORM=WWW127"
	. . . . . . WRITE "&amp;YBED="_YBED_"&amp;YUCI="_$GET(YUCI)_"&amp;YM="_YM
	. . . . . . WRITE "&amp;YUSER="_YUSER
	. . . . . . WRITE "&amp;FORMULAR="_YFORM
	. . . . . . WRITE "&amp;ERFASSUNG="_YI
	. . . . . . WRITE "&amp;BEARBEITUNG="_YLFNN
	. . . . . . WRITE "&amp;SPRACHE="_$$^WWWLANGU(YBED)
	. . . . . . WRITE "&amp;YFKEY="_YFORM_","_YI_","_YLFNN_","_$$^WWWLANGU(YBED)
	. . . . . . WRITE "&amp;YKEY="_YFORM_","_YI_","_YLFNN_","_$$^WWWLANGU(YBED)
	. . . . . . WRITE "&amp;YANZ="_YANZ
	. . . . . . WRITE """"_">"
	. . . . . ;
	. . . . . IF YLFNN'="" DO
	. . . . . . IF $GET(^WWW0031(0,YDATEI,YLFNN,SPRACHE,1))'="" WRITE $PIECE(^WWW0031(0,YDATEI,YLFNN,SPRACHE,1),Y,1) QUIT
	. . . . . . WRITE $PIECE($GET(^WWW003(0,YDATEI,YLFNN,1)),Y,2)
	. . . . . . IF '$DATA(^WWW003(0,YDATEI,YLFNN,1)) KILL ^WWW127(0,YFORM,YI,YLFNN)
	. . . . . ;
	. . . . . IF YADMIN=1 WRITE "</A>"
	. . . . . WRITE "</H3>"
	. . . . . IF YADMIN=1 IF $PIECE($GET(^WWW003(0,YDATEI,YLFNN,1)),Y,8)'="" DO  ;ANZEIGE PARAMETER ;Show parameter 
	. . . . . . WRITE "Relation: "
	. . . . . . WRITE "^"_$PIECE($GET(^WWW003(0,YDATEI,YLFNN,1)),Y,8)
	. . . . . . IF $PIECE($GET(^WWW003(0,YDATEI,YLFNN,1)),Y,9)'="" DO
	. . . . . . . WRITE " Parameter: "_$PIECE($GET(^WWW003(0,YDATEI,YLFNN,1)),Y,9)
	. . . . . ;
	. . . . . DO
	. . . . . . IF SPRACHE'="" SET YTEXT = $$^WWWSETL("^WWW127(0,"_""""_YFORM_""""_","_""""_YI_""""_","_""""_YLFN_""""_","_""""_SPRACHE_""""_","_""""_1_""""_")")
	. . . . . . IF YTEXT=""    SET YTEXT = $$^WWWSETL("^WWW127(0,"_""""_YFORM_""""_","_""""_YI_""""_","_""""_YLFN_""""_","_""""_"DE"_""""_","_""""_1_""""_")")
	. . . . . ;
	. . . . . IF SH'=1 SET $PIECE(YTEXT,Y,3)=""  ;WEM;25188;02.03.2004;KEIN DRUCK DER TIPPS FÜR TRAINING UND SCHULUNG
	. . . . . SET $PIECE(YTEXT,Y,4)=""           ;WEM;25188;02.03.2004;KEIN DRUCK DES SCHULUNGSPARAMETERS IN DEN SCHULUNGSUNTERLAGEN
	. . . . . ;
	. . . . . IF SH=1 DO
	. . . . . . NEW POCT,CT  ;WEM;25601;28.04.2004;INDIVIDUELLE SCHULUNGSHILFETEXTE IN FÜR DATENFELDER ANZEIGEN
	. . . . . . SET POCT = +$PIECE($GET(^WWW122D(0,YFORM,YLFN,YM,1)),Y,121)      ; PRINT ONLY CUSTOMIZED TEXT
	. . . . . . SET CT   =  $PIECE($GET(^WWW122D(0,YFORM,YLFN,YM,1)),Y,120)      ; CUSTOMIZED TEXT
	. . . . . . IF POCT=1 IF CT'="" SET $PIECE(YTEXT,Y,3)="" SET $PIECE(YTEXT,Y,3)=CT
	. . . . . . IF POCT=0 IF CT'="" SET $PIECE(YTEXT,Y,3)=$PIECE(YTEXT,Y,3)_"||"_CT
	. . . . . ;
	. . . . . IF YADMIN=1 SET YTEXT=$TRANSLATE(YTEXT,"~","|")                 ;ANZEIGE HILFE UND SYSTEM ;Show succour And system 
	. . . . . ;SET YTEXT=$PIECE(YTEXT,"~",1)                                  ;NUR 1.TEIL ANZEIGEN    ;WEM;25601;28.04.2004;AUSKOMMENTIERT
	. . . . . IF SH=1     SET YTEXT=$PIECE(YTEXT,Y,1)_"||"_$PIECE(YTEXT,Y,3)  ;WEM;25601;28.04.2004;MIT SCHULUNGSHILFETEXT
	. . . . . IF SH'=1    SET YTEXT=$PIECE(YTEXT,Y,1)
	. . . . . ;
	. . . . . IF YI="P"               IF $DATA(^WWW121D(0,YFORM,YLFN,YM,1)) SET YTEXT=YTEXT_"|"_$$CustomHelpText^WWW121D(^WWW121D(0,YFORM,YLFN,YM,1))  ;ZUSATZHILFE  ; SR16925.2
	. . . . . IF (YI="D") || (YI="M") IF $DATA(^WWW122D(0,YFORM,YLFN,YM,1)) SET YTEXT=YTEXT_"|"_$$CustomHelpText^WWW122D(^WWW122D(0,YFORM,YLFN,YM,1))  ;SR16925.2
	. . . . . IF YI'="M" IF YTEXT="" SET YTEXT = $$^WWWTEXT(28)  ; "No help text available"
	. . . . . ; vvvvvvvvvvvvvvvvvvvvvvvvvvvv DISABLED BLOCK
	. . . . . ;IF SPRACHE="EN" IF YADMIN=1 DO
	. . . . . . ;IF $PIECE($GET(^WWW012(0,YM,1)),Y,97)="" SET $PIECE(^WWW012(0,YM,1),Y,97)="http://de.altavista.com/scripts/eusearchengine.dll?aveutf8=1&aveenc=22&fish=1&bblType=urltext&lp="_$$^WWWLOW($$^WWWLANGU(YBED))_"_"_$$^WWWLOW("EN")_"&urltext="
	. . . . . .; SR17146
	. . . . . .;SET $PIECE(^WWW012(0,YM,1),Y,97)="http://uebersetzer.web.de/ergebnis/?id=V00-"_$EXTRACT($$^WWWYEAR($HOROLOG),3,4)_$EXTRACT($$^WWWDATE($HOROLOG),4,5)_$EXTRACT($$^WWWDATE($HOROLOG),1,2)_"-**cN0-00"_"&domain=GEN&pair=ge&text="
	. . . . . . set strDMYDate = $$IntToDMY^WWWDATE($horolog)                                                 ; as DD.MM.YYYY
	. . . . . . set strYMDDate = $extract(strDMYDate,9,10)_$extract(strDMYDate,4,5)_$extract(strDMYDate,1,2)  ;as YYMMDD
	. . . . . . SET $PIECE(^WWW012(0,YM,1),Y,97)="http://uebersetzer.web.de/ergebnis/?id=V00-"_strYMDDate_"-**cN0-00"_"&domain=GEN&pair=ge&text="
	. . . . . . WRITE "<A HREF="_""""_$PIECE($GET(^WWW012(0,YM,1)),Y,97)_$$^WWWUMLAU($TRANSLATE(YTEXT,"|?><'"," !"))
	. . . . . . WRITE """"
	. . . . . . WRITE " TARGET=TRANSLATE"
	. . . . . . WRITE ">"
	. . . . . . WRITE "<img SRC="_""""_YGIF_"language.gif"_""""_" "_YWIDTH_" "_YHEIGHT_" TITLE=translate BORDER=0"
	. . . . . . WRITE ">"
	. . . . . . WRITE "</A>"
	. . . . . . WRITE "<BR>"
	. . . . . ; ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
	. . . . . DO TEXT^WWWHELP()
	
	;------------------------------------------------------------------------
	WRITE "</FONT>"
	WRITE YCR
	QUIT
	
KEY1         ;EINSPRUNG VON WWW0042S NACH LINK VON OBERER MUNÜ ;within upper 
	quit
	; vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv DISABLED BLOCK
	set KEY=$get(%(YQUERY,"YPARA"))
	write KEY
	set YAPP    = $piece(KEY,",",1)     ;MENU P1
	set YPROG   = $piece(KEY,",",2)     ;MENU P2
	set VORG(5) = $piece(KEY,",",3)     ;MODUL ;module 
	set SH      = $piece(KEY,",",4)     ;SCHULUNG
	set FH      = $piece(KEY,",",5)     ;FORMULAR HILFER ;form 
	set DH      = $piece(KEY,",",6)     ;DATENFELD HILFER ;data item 
	do WWWHPS
	quit
	;^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
	
	
CHECKSP(SPS,SPDF)   ;WEM;25188;03.03.2004;PRÜFT OB DER SP DES DATENFELDS MIT DER VORGABE ÜBEREINSTIMMT
	set SPS  = $get(SPS)                        ; VORGABE AUS FORMULAR ;default out of form 
	set SPDF = $translate($get(SPDF),";",",")   ; SP DES DATENFELDES
	set YQ=1
	if SPS=""  quit YQ
	if SPDF="" quit YQ
	for YI=1:1 quit:$piece(SPDF,",",YI)=""  quit:YQ=0  do
	. if $find(","_SPS_",",$piece(SPDF,",",YI)) set YQ=0
	
	quit YQ
	
]]></Routine>
</Export>