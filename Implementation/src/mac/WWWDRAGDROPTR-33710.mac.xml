<?xml version="1.0" encoding="UTF-8"?>
<Export generator="Cache" version="22" zv="CACHE" ts="2001-01-01 00:00:00">
<Routine name="WWWDRAGDROPTR" type="MAC" languagemode="0" timestamp="58440,0"><![CDATA[
WWWDRAGDROPTR(SATZ,YFELD)   ;WWWDRAGDROPTR;FIS/BEC;DRAGDROP FELDINHALT AUFBAUEN;18.10.2003  ; Compiled January 7, 2005 15:30:10
	;
	;/------------------------------------------------------------------\
	;| Description of Function :
	;|		FIS/BEC
	;|
	;| Inputs : 
	;|
	;|
	;| ByRef :
	;|
	;|
	;| Returns :
	;|
	;|
	;| History :
	;|
	;| 	DRAGDROP FELDINHALT AUFBAUEN
	;|
	;\------------------------------------------------------------------/
	;
	SET HEADER=""
	SET YFELD=$GET(YFELD)
	SET SATZ=$GET(SATZ)
	IF YFELD'="" DO
	. IF $PIECE(YFELD,Y,19)'="" DO  ;EXECUTE VOR ANZEIGE FELDINHALT ;EXECUTE pre- Show 
	. . NEW YINHALT,YEXEC
	. . SET YEXEC=$PIECE(YFELD,Y,19)
	. . SET YINHALT=$PIECE(SATZ,Y,YNUM)
	. . DO
	. . . NEW (YEXEC,YINHALT,SPRACHE,LANGUAGE,Y,YUCI,YM,YBED,YUSER,YFORM,YDATEI,YLOCATION)
	. . . XECUTE YEXEC
	. . . QUIT
	. . SET $PIECE(SATZ,Y,YNUM)=YINHALT
	. . QUIT
	. SET HEADER=""
	. IF $PIECE(SATZ,Y,YNUM)="" SET $PIECE(SATZ,Y,YNUM)=" "
	. IF $PIECE(YFELD,Y,9)="" SET HEADER=$$^WWWTR(0,+$PIECE(YFELD,Y,2),$PIECE(SATZ,Y,YNUM))
	. IF $PIECE(YFELD,Y,9)'="" DO  ;RELATIONSDATEI VORHANDEN ;on hand 
	. . NEW RELK,RELF,YI,YDATEI,YDATEI1,YINHALT
	. . SET YDATEI=$PIECE(YFELD,Y,9)
	. . SET RELK=$PIECE(YFELD,Y,10)  ;RELATIONS PRIMÄRSCHLÜSSEL
	. . IF RELK'="" FOR YI=1:1  QUIT:$PIECE(RELK,",",YI)=""  IF '$FIND($PIECE(RELK,",",YI),"""") SET $PIECE(RELK,",",YI)=""""_@$PIECE(RELK,",",YI)_""""
	. . SET RELF=+$PIECE(YFELD,Y,11)  ;ANZEIGE FELD ;Show field 
	. . IF RELF=0 SET RELF=1
	. . IF $PIECE(SATZ,Y,YNUM)'="" DO
	. . . SET YDATEI1="^"_YDATEI_"("_""""_$$^WWWYM(YDATEI)_""""
	. . . IF RELK'="" FOR YI=1:1  QUIT:$PIECE(RELK,",",YI)=""  SET YDATEI1=YDATEI1_","_""""_$TRANSLATE($PIECE(RELK,",",YI),"""")_""""
	. . . IF $PIECE(YFELD,Y,14)'=1 SET YDATEI1=YDATEI1_","_""""_$TRANSLATE($PIECE(SATZ,Y,YNUM),"""")_""""
	. . . IF $PIECE(YFELD,Y,14)=1 DO
	. . . . NEW TRENN
	. . . . SET TRENN=$PIECE(YFELD,Y,15)
	. . . . IF TRENN="" SET TRENN=","
	. . . . FOR YI=1:1  QUIT:$PIECE($PIECE(SATZ,Y,YNUM),TRENN,YI)=""  SET YDATEI1=YDATEI1_","_""""_$TRANSLATE($PIECE($PIECE(SATZ,Y,YNUM),TRENN,YI),"""")_""""
	. . . . QUIT
	. . . SET YDATEI1=YDATEI1_",1)"
	. . . IF YDATEI="INAUFPT" IF +$PIECE($PIECE(SATZ,Y,YNUM),"-",3)=0 DO  ;!!! SONDERFALL PRODUKTIONSPLANUNG
	. . . . SET YDATEI1="^INAUFP("_""""_YM_""""_","_""""_$PIECE($PIECE(SATZ,Y,YNUM),"-",1)_""""_","_$PIECE($PIECE(SATZ,Y,YNUM),"-",2)_",1)"
	. . . . ;;SET $PIECE(SATZ,Y,YNUM)=$PIECE($PIECE(SATZ,Y,YNUM),"-",1)_"-"_$PIECE($PIECE(SATZ,Y,YNUM),"-",2)
	. . . . QUIT
	. . . IF '$DATA(@YDATEI1) QUIT
	. . . SET HEADER=$PIECE(@YDATEI1,Y,RELF)  ;EINSETZEN RELATIONSWERT ;stow 
	. . . IF YDATEI="INPARA"!(YDATEI="WWW101") DO
	. . . . IF +$PIECE((@YDATEI1),Y,2)'=0 SET DESCCOLOR=$PIECE($GET(^WWW100(0,"FARBE",SPRACHE,$PIECE((@YDATEI1),Y,2),1)),Y,1)
	. . . . QUIT
	. . . QUIT
	. . IF HEADER="" SET HEADER=$PIECE(SATZ,Y,YNUM)
	. . QUIT
	. QUIT
	QUIT HEADER
]]></Routine>
</Export>