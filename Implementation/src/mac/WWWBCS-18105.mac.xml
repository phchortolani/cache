<?xml version="1.0" encoding="UTF-8"?>
<Export generator="Cache" version="22" zv="CACHE" ts="2001-01-01 00:00:00">
<Routine name="WWWBCS" type="MAC" languagemode="0" timestamp="58440,0"><![CDATA[
WWWBCS ;WWWBCS;DT;SCHWARZES BRETT;19.11.1998
 
	;/------------------------------------------------------------------\
	;| Description of Function :
	;|		SCHWARZES BRETT
	;|
	;| Inputs : 
	;|
	;|
	;| ByRef :
	;|
	;|
	;| Returns :
	;|
	;|
	;| History :
	;| DT	19.11.1998
	;|
	;\------------------------------------------------------------------/
	;
	QUIT:YOPTION=""
	WRITE YCR,"<TABLE CELLSPACING=0 BORDER=1 NOWRAP>"
	WRITE YCR
	WRITE "<TR>"
	WRITE "<TH>"
	WRITE "<FONT SIZE=2>"
	WRITE "&nbsp;Q&nbsp;"
	WRITE YCR,"</TH>"
	WRITE "<TH>"
	WRITE "<FONT SIZE=2>"
	WRITE "&nbsp;A&nbsp;"
	WRITE YCR,"</TH>"
	WRITE "<TH ALIGN=LEFT>"
	WRITE "<FONT SIZE=2>"
	WRITE $$^WWWTEXT(292)
	WRITE YCR,"</TH>"
	WRITE "<TH ALIGN=LEFT>"
	WRITE "<FONT SIZE=2>"
	WRITE $$^WWWTEXT(68)  
	WRITE YCR,"</TH>"
	WRITE "<TH ALIGN=LEFT>"
	WRITE "<FONT SIZE=2>"
	WRITE $$^WWWTEXT(124)
	WRITE YCR,"</TH>"
	WRITE "<TH ALIGN=LEFT>"
	WRITE "<FONT SIZE=2>"
	WRITE $$^WWWTEXT(166)
	WRITE YCR,"</TH>"
	WRITE YCR,"</TD>"
	SET MAIL=0
	SET ANZAHL=0
	SET YSCH1="" FOR  SET YSCH1=$ORDER(^WWWBCS(0,YOPTION,YSCH1),-1) QUIT:YSCH1=""  QUIT:ANZAHL>200  DO
	. SET YSCH2="" FOR  SET YSCH2=$ORDER(^WWWBCS(0,YOPTION,YSCH1,YSCH2),-1) QUIT:YSCH2=""  QUIT:ANZAHL>200  DO
	. . SET Q=1
	. . SET YSCH3="" FOR  SET YSCH3=$ORDER(^WWWBCS(0,YOPTION,YSCH1,YSCH2,YSCH3)) QUIT:YSCH3=""  QUIT:ANZAHL>200  DO
	. . . SET YSCH4="" FOR  SET YSCH4=$ORDER(^WWWBCS(0,YOPTION,YSCH1,YSCH2,YSCH3,YSCH4)) QUIT:YSCH4=""  QUIT:ANZAHL>200  DO
	. . . . SET KEY="^WWWBCS(0,"_""""_YOPTION_""""_","_""""_YSCH1_""""_","_""""_YSCH2_""""_","_""""_YSCH3_""""_","_""""_YSCH4_""""_","_"1)"
	. . . . SET TEXT=$$^WWWSETL(KEY)
	. . . . DO ANZEIGE
	. . . . QUIT
	. . . QUIT
	. . QUIT
	. QUIT
	WRITE YCR,"</TABLE>"
	QUIT
	
ANZEIGE ;
	SET ANZAHL=ANZAHL+1
	SET MAIL=1
	WRITE YCR
	WRITE "<TR>"
	WRITE "<TD>"
	WRITE "<FONT SIZE=2>"
	WRITE "&nbsp;"
	IF Q=1 DO
	. WRITE "<A HREF="_""""_YAKTION_"EP=WWWFORM&amp;YFORM=WWWBCS1"
	. WRITE "&amp;YPARA="_YSCH1_","_YSCH2_","_YSCH3_","_YSCH4
	. WRITE "&amp;YBED="_YBED_"&amp;YUCI="_$GET(YUCI)_"&amp;YM="_YM
	. WRITE "&amp;YBACK="_YBACK_"WWWBCS,"
	. WRITE "&amp;YUSER="_YUSER
	. WRITE "&amp;YOPTION="_YOPTION
	. WRITE "&amp;YNAME="_""
	. WRITE """"_">"
	. WRITE "Q"
	. WRITE "</A>"
	. QUIT
	WRITE "&nbsp;"
	WRITE YCR,"</TD>"
	WRITE "<TD NOWRAP>"
	WRITE "<FONT SIZE=2>"
	WRITE "&nbsp;"
	IF Q=0 DO
	. WRITE "<A HREF="_""""_YAKTION_"EP=WWWFORM&amp;YFORM=WWWBCS1"
	. WRITE "&amp;YPARA="_YSCH1_","_YSCH2_","_YSCH3_","_YSCH4
	. WRITE "&amp;YBED="_YBED_"&amp;YUCI="_$GET(YUCI)_"&amp;YM="_YM
	. WRITE "&amp;YBACK="_YBACK_"WWWBCS,"
	. WRITE "&amp;YUSER="_YUSER
	. WRITE "&amp;YOPTION="_YOPTION
	. WRITE "&amp;YNAME="_""
	. WRITE """"_">"
	. WRITE "A"
	. WRITE "</A>"
	. QUIT
	WRITE "&nbsp;"
	WRITE YCR,"</TD>"
	WRITE "<TD NOWRAP>"
	WRITE "<FONT SIZE=2>"
	WRITE "<A HREF="_""""_YAKTION_"EP=WWWFORM&amp;YFORM=WWWBCS1"
	WRITE "&amp;YPARA="_YSCH1_","_YSCH2_","_YSCH3_","_YSCH4
	WRITE "&amp;YBED="_YBED_"&amp;YUCI="_$GET(YUCI)_"&amp;YM="_YM
	WRITE "&amp;YBACK="_YBACK_"WWWBCS,"
	WRITE "&amp;YUSER="_YUSER
	WRITE "&amp;YOPTION="_YOPTION
	WRITE "&amp;YNAME="_""
	WRITE """"_">"
	IF Q=0 WRITE "&nbsp;&nbsp;"
	IF Q=1 WRITE $$^WWWUML($PIECE(TEXT,Y,1))
	WRITE "&nbsp;"
	WRITE "</A>"
	WRITE YCR,"</TD>"
	WRITE "<TD NOWRAP>"
	WRITE "<FONT SIZE=2>"
	WRITE "<A HREF="_""""_YAKTION_"EP=WWWFORM&amp;YFORM=WWWBCS1"
	WRITE "&amp;YPARA="_YSCH1_","_YSCH2_","_YSCH3_","_YSCH4
	WRITE "&amp;YBED="_YBED_"&amp;YUCI="_$GET(YUCI)_"&amp;YM="_YM
	WRITE "&amp;YBACK="_YBACK_"WWWBCS,"
	WRITE "&amp;YUSER="_YUSER
	WRITE "&amp;YOPTION="_YOPTION
	WRITE "&amp;YNAME="_""
	WRITE """"_">"
	SET VONBE=$PIECE(TEXT,Y,2)
	IF VONBE="" SET VONBE=$PIECE(TEXT,Y,2)
	WRITE " ",VONBE
	IF VONBE'="" IF $DATA(^WWW013(0,VONBE)) WRITE " (",$$^WWWUML($PIECE($GET(^WWW013(0,VONBE,1)),Y,1))_")"
	WRITE "&nbsp;"
	WRITE "</A>"
	WRITE YCR,"</TD>"
	WRITE "<TD NOWRAP>"
	WRITE "<FONT SIZE=2>"
	SET DATUM=YSCH3
	SET UHRZE=YSCH4
	WRITE " ",$$^WWWDATE(DATUM)," ",$$^WWWTIME(UHRZE)
	WRITE "&nbsp;"
	WRITE YCR,"</TD>"
	WRITE "<TD NOWRAP>"
	WRITE "<FONT SIZE=2>"
	WRITE $EXTRACT($TRANSLATE($$^WWWUML($PIECE(TEXT,Y,3)),"|"," "),1,30)_"..."
	WRITE "&nbsp;"
	WRITE YCR,"</TD>"
	WRITE YCR,"</TR>"
	IF Q=1 SET Q=0
	QUIT
	
SAVE ;SPEICHERN
	IF VORG(1)="" IF VORG(2)="" SET YOPTION="" KILL %(YQUERY,"YOPTION"),YMFELD SET YFORM="WWWBCS" DO ^WWWFORM QUIT
	QUIT:'$DATA(VORG(1))
	QUIT:VORG(1)=""
	SET VORG(2)=$TRANSLATE(VORG(2),$CHAR(13,10),"|")
	SET KEY="^WWWBCS(0,"_""""_YOPTION_""""_","_""""_+$HOROLOG_""""_","_""""_$PIECE($HOROLOG,",",2)_""""_","_""""_+$HOROLOG_""""_","_""""_$PIECE($HOROLOG,",",2)_""""_","_"1)"
	SET SATZ=VORG(1)_Y_YBED_Y_VORG(2)
	SET OK=$$^WWWSETS(KEY,SATZ)
	;S ^WWWBCS(0,YOPTION,+$H,$P($H,",",2),+$H,$P($H,",",2),1)=VORG(1)_Y_YBED_Y_VORG(2)
	;S VORG(1)=""
	SET VORG(2)=""
	KILL YMFELD
	SET YFORM="WWWBCS"
	DO ^WWWFORM
	QUIT
]]></Routine>
</Export>