<?xml version="1.0" encoding="UTF-8"?>
<Export generator="Cache" version="22" zv="CACHE" ts="2001-01-01 00:00:00">
<Routine name="INANGKILL" type="MAC" languagemode="0" timestamp="58440,0"><![CDATA[
INANGKILL(YKEY) ;INANGKILL;DT;LOESCHEN ANGEBOTE;07.08.2000
	;
	;/------------------------------------------------------------------\
	;| Description of Function :
	;|		LOESCHEN ANGEBOTE
	;|
	;| Inputs : 
	;|
	;|
	;| ByRef :
	;|
	;|
	;| Returns :
	;|
	;|
	;| History :
	;|
	;| DT	07.08.2000
	;|
	;\------------------------------------------------------------------/
	;
	;AUCH EINSPRUNG AUS INANGANZ ;too out of 
	;YKEY: $P(YKEY,Y,1) = ANGEBOTSNUMMER
	;      $P(YKEY,Y,2) = ANGEBOTSPOSITION
	NEW YFORM,YVORG,YVOR,YANGEBOT,YPOS,YFELD,YDATEI
	QUIT:$GET(YKEY)=""
	SET YANGEBOT=$PIECE(YKEY,",",1)
	SET YPOS=$PIECE(YKEY,",",2)
	;YANGEBOT=ANGEBOT
	;YPOS=POSITION
	;WENN KEINE POSITON, DANN ALLE POSITIONEN LÖSCHEN
	QUIT:$GET(YANGEBOT)=""  ;KEIN ANGEBOT ;no proposition 
	IF YPOS'="" DO POSITION SET Q=0 QUIT  ;NUR POS LÖSCHEN ;only Delete 
	;ANGEBOTSKOPF
	IF YPOS="" DO
	. SET YFELD=""
	. DO ^WWWSKILL("INANG",YANGEBOT)  ;LÖSCHEN ;Delete 
	. ;
	. DO ^WWWSKILL("INANGA",YANGEBOT)  ;LÖSCHEN ;Delete 
	. ;
	. ;OFFENE ANGEBOTE
	. SET YFELD=""
	. DO ^WWWSKILL("INANG1",YANGEBOT)  ;LÖSCHEN ;Delete 
	. ;
	. DO ^WWWSKILL("INANGPZ",YANGEBOT)  ;LÖSCHEN ;Delete 
	. ;
	. DO ^WWWSKILL("INANGPARA",YANGEBOT)  ;LÖSCHEN POSITIONSGRUPPEN ;Delete 
	. ;
	. FOR  SET YPOS=$ORDER(^INANGP(YM,YANGEBOT,YPOS)) QUIT:YPOS=""  DO POSITION
	. QUIT
	SET Q=0
	QUIT
	
POSITION        ;LÖSCHEN POSITIONEN ;Delete 
	NEW ART,REST
	SET ART=$PIECE($GET(^INANGP(YM,YANGEBOT,YPOS,1)),Y,4)   ;ARTIKEL ;item 
	SET REST=$PIECE($GET(^INANGP(YM,YANGEBOT,YPOS,1)),Y,5)  ;MENGE ;quantum 
	DO
	. SET YFELD=""
	. DO ^WWWSKILL("INANGP",YANGEBOT_","_YPOS)  ;LÖSCHEN ;Delete 
	. DO  ;IF $DATA(^INANGGOEP(YM,YANGEBOT)) DO  ;ALTERNATIVE ANGEBOTSVERWALTUNG GÖBEL
	. . DO ^WWWSKILL("INANGGOEP",YANGEBOT_","_YPOS)  ;LÖSCHEN ;Delete 
	. . DO ^WWWSKILL("INANGGOEPT",YANGEBOT_","_YPOS)  ;LÖSCHEN ;Delete 
	. . DO ^WWWSKILL("INANGGOEPWKZG",YANGEBOT_","_YPOS)  ;LÖSCHEN ;Delete 
	. . DO ^WWWSKILL("INANGGOEPVORR",YANGEBOT_","_YPOS)  ;LÖSCHEN ;Delete 
	. . DO ^WWWSKILL("INANGGOEPPREIS",YANGEBOT_","_YPOS)  ;LÖSCHEN ;Delete 
	. . QUIT
	. DO ^WWWSKILL("INANGPA",YANGEBOT_","_YPOS)  ;LÖSCHEN ;Delete 
	. DO ^WWWSKILL("INANGPK",YANGEBOT_","_YPOS)  ;LÖSCHEN ;Delete 
	. DO ^WWWSKILL("INWEANG",YANGEBOT_","_YPOS)  ;LÖSCHEN ;Delete 
	. DO ^WWWSKILL("INWEANGS",YANGEBOT_","_YPOS)  ;LÖSCHEN ;Delete 
	. DO ^WWWSKILL("INERECH1",YANGEBOT_","_YPOS)  ;LÖSCHEN ;Delete 
	. DO ^WWWSKILL("INANGSP",YANGEBOT_","_YPOS)  ;LÖSCHEN ;Delete 
	. KILL ^INANGPXL(YM,YANGEBOT,YPOS)  ;TEILE
	. DO ^WWWSKILL("INANGPT",YANGEBOT_","_YPOS)  ;LÖSCHEN ;Delete 
	. KILL ^INANGPT(YM,YANGEBOT,YPOS)  ;TEILE
	. QUIT
	QUIT
]]></Routine>
</Export>