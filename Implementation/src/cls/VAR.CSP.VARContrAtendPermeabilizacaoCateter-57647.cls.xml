<?xml version="1.0" encoding="UTF-8"?>
<Export generator="Cache" version="22" zv="Cache" ts="2001-01-01 00:00:00">
<Class name="VAR.CSP.VARContrAtendPermeabilizacaoCateter">
<ClassType/>
<IncludeCode>MEDConst,VARConst</IncludeCode>
<ProcedureBlock>1</ProcedureBlock>
<Super>%CSP.Page</Super>

<Method name="OnPage">
<ClassMethod>1</ClassMethod>
<ReturnType>%Status</ReturnType>
<Implementation><![CDATA[	do ^WWWVAR
	;	
	set method = $get(%request.Data("method",1))
	xecute "do .."_method_"()"
	quit $$$OK]]></Implementation>
</Method>

<Method name="GetProntuario">
<ClassMethod>1</ClassMethod>
<Implementation><![CDATA[	$$$VAR
	set YM 	= 0
	set Y 	= "~"

	set listRetorno = {}
	
	set pCodProntuario 	= $get(%request.Data("pCodProntuario",1))
	set objProntuario 	= $get(^VARProntuarioEletronico(YM, pCodProntuario, 1))	
	if (objProntuario '= "") {
		set codPaciente 		= $$$VARProntuarioEletronicoPaciente(objProntuario)
		set criadoEm				= $$$VARProntuarioEletronicoCriadoEm(objProntuario)
		set numAdmissao			= $$$VARProntuarioEletronicoNumeroAdmisao(objProntuario)
		;
		set objMEDAdmission	= $get(^MEDAdmission(YM, numAdmissao, 1))
		;
		If ($$$MEDAdmissionPatient(objMEDAdmission) '= codPaciente) {
			set codPaciente		= $$$MEDAdmissionPatient(objMEDAdmission)
		}
		;
		Set numProntuario 	= $$SQLGetPatientProntuario^VARSQL(codPaciente)
		;
		Set objMEDPatient = $Get(^MEDPatient(0, codPaciente, 1))
		;
		set nomePaciente		= $$SQLGetPatientName^VARSQL(codPaciente)
		set dataNascimento	= $$SQLGetPatientDataNascimento^VARSQL(codPaciente)
		set qtdeAnos				= $$SQLGetPatientAge^VARSQL(dataNascimento)
		set qtdeMeses				= $$SQLGetPatientMonth^VARSQL(dataNascimento)
		set sexo						= $$SQLGetSexoPaciente^VARSQL(codPaciente)
		;
		set objMEDAdmission	= $get(^MEDAdmission(YM, numAdmissao, 1))
		set codSala					= $$$MEDAdmissionRoom(objMEDAdmission)			
		set codLeito				= $$$MEDAdmissionBed(objMEDAdmission)
		;
		set (descSala, dataSourceLeito) = ""
		If (codSala '= "") {
			set objSala					= $get(^VARSalasAtendimentos(YM,codSala,1))
			set descSala 				= $$$VARSalasAtendimentosNome(objSala)
			;
			set dataSourceLeito = ##Class(VAR.CSP.VARContrAtendQuimioterapico).GetLeitos(codSala, codLeito)
		}
		;
		set objPEPPermeabilizacaoCateter = $get(^VARPEPPermeabilizacaoCateter(YM, pCodProntuario, 1))
		;
		set listRetorno.dataHora = $zdatetime(criadoEm,4,2)
		set listRetorno.codPaciente = numProntuario
		set listRetorno.paciente = nomePaciente
		set listRetorno.dataNascimento = $zdate(dataNascimento,4,,4)
		set listRetorno.idade = qtdeAnos
		set listRetorno.sexo = sexo
		set listRetorno.codSala = descSala
		set listRetorno.dSLeito = dataSourceLeito
		set listRetorno.codLeito = codLeito
		;
		set diagnostico = $$$VARPEPPermeabilizacaoCateterDiagnostico(objPEPPermeabilizacaoCateter)
		set arrayDiagnostico = []
		for i=1:1:$length(diagnostico,";") {
			if ($piece(diagnostico,";",i)="") continue
			do arrayDiagnostico.%Push($piece(diagnostico,";",i))
		}
		;
		set dataHoraAssinatura 	= $$$VARPEPPermeabilizacaoCateterDataHoraAssinatura(objPEPPermeabilizacaoCateter)
		set assinatura					= $$$VARPEPPermeabilizacaoCateterUsuarioAssinatura(objPEPPermeabilizacaoCateter)
		set medicoExterno 			= $$$VARPEPPermeabilizacaoCateterMedicoExterno(objPEPPermeabilizacaoCateter)
		;
		set listRetorno.diagnostico = arrayDiagnostico
		set listRetorno.medicoExterno = medicoExterno
		Set listRetorno.portaCath = $$$VARPEPPermeabilizacaoCateterPortaCath(objPEPPermeabilizacaoCateter)
		Set listRetorno.pICC = $$$VARPEPPermeabilizacaoCateterPICC(objPEPPermeabilizacaoCateter)
		Set listRetorno.hickman = $$$VARPEPPermeabilizacaoCateterHickman(objPEPPermeabilizacaoCateter)
		Set listRetorno.hickmanOutros = $$$VARPEPPermeabilizacaoCateterHickmanOutros(objPEPPermeabilizacaoCateter)
		Set listRetorno.outros = $$$VARPEPPermeabilizacaoCateterOutros(objPEPPermeabilizacaoCateter)
		Set listRetorno.puncaoAgulha20Gx10 = +$$$VARPEPPermeabilizacaoCateterPuncaoAgulha20Gx10(objPEPPermeabilizacaoCateter)
		Set listRetorno.puncaoAgulha20Gx075 = +$$$VARPEPPermeabilizacaoCateterPuncaoAgulha20Gx075(objPEPPermeabilizacaoCateter)
		Set listRetorno.puncaoRefluxoPositivo = +$$$VARPEPPermeabilizacaoCateterPuncaoRefluxoPositivo(objPEPPermeabilizacaoCateter)
		Set listRetorno.puncaoRefluxoNegativo = +$$$VARPEPPermeabilizacaoCateterPuncaoRefluxoNegativo(objPEPPermeabilizacaoCateter)
		Set listRetorno.puncaoOutros = +$$$VARPEPPermeabilizacaoCateterPuncaoOutros(objPEPPermeabilizacaoCateter)
		Set listRetorno.puncaoDescricaoOutros = $$$VARPEPPermeabilizacaoCateterPuncaoDescricaoOutros(objPEPPermeabilizacaoCateter)
		Set listRetorno.infusao20mlSF09 = +$$$VARPEPPermeabilizacaoCateterInfusao20mlSF09(objPEPPermeabilizacaoCateter)
		Set listRetorno.infusao40mlSF09 = +$$$VARPEPPermeabilizacaoCateterInfusao40mlSF09(objPEPPermeabilizacaoCateter)
		Set listRetorno.infusaoSeringaHeparina = +$$$VARPEPPermeabilizacaoCateterInfusaoSeringaHeparina(objPEPPermeabilizacaoCateter)
		Set listRetorno.boaInfusaoeFluxoLivre = +$$$VARPEPPermeabilizacaoCateterBoaInfusaoeFluxoLivre(objPEPPermeabilizacaoCateter)
		Set listRetorno.infusaoObstruido = +$$$VARPEPPermeabilizacaoCateterInfusaoObstruido(objPEPPermeabilizacaoCateter)
		Set listRetorno.pele = $$$VARPEPPermeabilizacaoCateterPele(objPEPPermeabilizacaoCateter)
		Set listRetorno.peleOutros = $$$VARPEPPermeabilizacaoCateterPeleOutros(objPEPPermeabilizacaoCateter)
		Set listRetorno.liberacao = $$$VARPEPPermeabilizacaoCateterLiberacao(objPEPPermeabilizacaoCateter)
		Set listRetorno.liberacaoOutros = $$$VARPEPPermeabilizacaoCateterLiberacaoOutros(objPEPPermeabilizacaoCateter)
		If ($$$MEDPatientAlergia(objMEDPatient) '= "") {
			Set listRetorno.alergia			= $$$MEDPatientAlergia(objMEDPatient)
			Set listRetorno.alergiaAQue	= $$$MEDPatientAllergies(objMEDPatient)
		}Else{
			If ($$$MEDPatientAllergies(objMEDPatient) = "") Set listRetorno.alergia = 0
			Else  Set listRetorno.alergia = "1"
			Set listRetorno.alergiaAQue	= $$$MEDPatientAllergies(objMEDPatient)
		}
		;set listRetorno.alergia = $$$VARPEPPermeabilizacaoCateterAlergia(objPEPPermeabilizacaoCateter)
		set listRetorno.dataHoraAssinatura	= $Select(dataHoraAssinatura="":"",1:$ZdateTime(dataHoraAssinatura,4,2))
		set listRetorno.assinatura					= $Select(assinatura="":"",1:$$SQLGetUserName^VARSQL(assinatura))
		//	
		;;;
		set reacaoSinSintPulso = $$$VARPEPPermeabilizacaoCateterReacaoSinSintPulso(objPEPPermeabilizacaoCateter)
		set reacaoSinSintPA = $$$VARPEPPermeabilizacaoCateterReacaoSinSintPA(objPEPPermeabilizacaoCateter)
		set reacaoSinSintFebre = $$$VARPEPPermeabilizacaoCateterReacaoSinSintFebre(objPEPPermeabilizacaoCateter)
		set reacaoSinSintCalafrios = $$$VARPEPPermeabilizacaoCateterReacaoSinSintCalafrios(objPEPPermeabilizacaoCateter)
		set reacaoSinSintDispneia = $$$VARPEPPermeabilizacaoCateterReacaoSinSintDispneia(objPEPPermeabilizacaoCateter)
		set reacaoSinSintTremor = $$$VARPEPPermeabilizacaoCateterReacaoSinSintTremor(objPEPPermeabilizacaoCateter)
		set reacaoSinSintVomito = $$$VARPEPPermeabilizacaoCateterReacaoSinSintVomito(objPEPPermeabilizacaoCateter)
		set reacaoSinSintCianose = $$$VARPEPPermeabilizacaoCateterReacaoSinSintCianose(objPEPPermeabilizacaoCateter)
		set reacaoSinSintDorLombar = $$$VARPEPPermeabilizacaoCateterReacaoSinSintDorLombar(objPEPPermeabilizacaoCateter)
		set reacaoSinSintDordeCabeca = $$$VARPEPPermeabilizacaoCateterReacaoSinSintDordeCabeca(objPEPPermeabilizacaoCateter)
		set reacaoSinSintDornoTorax = $$$VARPEPPermeabilizacaoCateterReacaoSinSintDornoTorax(objPEPPermeabilizacaoCateter)
		set reacaoSinSintUrticaria = $$$VARPEPPermeabilizacaoCateterReacaoSinSintUrticaria(objPEPPermeabilizacaoCateter)
		set reacaoSinSintEritema = $$$VARPEPPermeabilizacaoCateterReacaoSinSintEritema(objPEPPermeabilizacaoCateter)
		set reacaoSinSintPrurido = $$$VARPEPPermeabilizacaoCateterReacaoSinSintPrurido(objPEPPermeabilizacaoCateter)
		set reacaoSinSintSangramentos = $$$VARPEPPermeabilizacaoCateterReacaoSinSintSangramentos(objPEPPermeabilizacaoCateter)
		set reacaoSinSintUrinaEscura = $$$VARPEPPermeabilizacaoCateterReacaoSinSintUrinaEscura(objPEPPermeabilizacaoCateter)
		set reacaoSinSintMenosVolUrinario = $$$VARPEPPermeabilizacaoCateterReacaoSinSintMenosVolUrinario(objPEPPermeabilizacaoCateter)
		set reacaoSinSintOutros = $$$VARPEPPermeabilizacaoCateterReacaoSinSintOutros(objPEPPermeabilizacaoCateter)
		set reacaoSinSintOutrosDescricao = $$$VARPEPPermeabilizacaoCateterReacaoSinSintOutrosDescricao(objPEPPermeabilizacaoCateter)
		;
		set sSIncidenteNomomentodaf = $$$VARPEPPermeabilizacaoCateterSSIncidenteNomomentodaf(objPEPPermeabilizacaoCateter)
		set sSIncidentePosteriormen = $$$VARPEPPermeabilizacaoCateterSSIncidentePosteriormen(objPEPPermeabilizacaoCateter)
		set sSIncidentePostData = $$$VARPEPPermeabilizacaoCateterSSIncidentePostData(objPEPPermeabilizacaoCateter)
		set sSIncidenteHematoma = $$$VARPEPPermeabilizacaoCateterSSIncidenteHematoma(objPEPPermeabilizacaoCateter)
		set sSIncidenteDorexcepSSiva = $$$VARPEPPermeabilizacaoCateterSSIncidenteDorexcessiva(objPEPPermeabilizacaoCateter)
		set sSIncDorOutLocBra = $$$VARPEPPermeabilizacaoCateterSSIncDorOutLocBra(objPEPPermeabilizacaoCateter)
		set sSIncDorOutLocBraDesc = $$$VARPEPPermeabilizacaoCateterSSIncDorOutLocBraDesc(objPEPPermeabilizacaoCateter)
		set sSIncidenteAdormeciment = $$$VARPEPPermeabilizacaoCateterSSIncidenteAdormeciment(objPEPPermeabilizacaoCateter)
		set sSIncidenteChoques = $$$VARPEPPermeabilizacaoCateterSSIncidenteChoques(objPEPPermeabilizacaoCateter)
		set sSIncidenteHiperemia = $$$VARPEPPermeabilizacaoCateterSSIncidenteHiperemia(objPEPPermeabilizacaoCateter)
		set sSIncidenteHiperemiaDes = $$$VARPEPPermeabilizacaoCateterSSIncidenteHiperemiaDes(objPEPPermeabilizacaoCateter)
		set sSIncidentePopSSivelpunc = $$$VARPEPPermeabilizacaoCateterSSIncidentePossivelpunc(objPEPPermeabilizacaoCateter)
		set sSIncidenteInfiltracao = $$$VARPEPPermeabilizacaoCateterSSIncidenteInfiltracao(objPEPPermeabilizacaoCateter)
		set sSIncidenteQueda = $$$VARPEPPermeabilizacaoCateterSSIncidenteQueda(objPEPPermeabilizacaoCateter)
		set sSIncidenteNenhumalesao = $$$VARPEPPermeabilizacaoCateterSSIncidenteNenhumalesao(objPEPPermeabilizacaoCateter)
		set sSIncPopSSivelLesao = $$$VARPEPPermeabilizacaoCateterSSIncPossivelLesao(objPEPPermeabilizacaoCateter)
		set sSIncPopSSivelLesaoDesc = $$$VARPEPPermeabilizacaoCateterSSIncPossivelLesaoDesc(objPEPPermeabilizacaoCateter)
		set sSConclusao = $$$VARPEPPermeabilizacaoCateterSSConclusao(objPEPPermeabilizacaoCateter)
		set sSIncidenteInfiltracaoD = $$$VARPEPPermeabilizacaoCateterSSIncidenteInfiltracaoD(objPEPPermeabilizacaoCateter)
		set sSIncidenteHematomaDesc = $$$VARPEPPermeabilizacaoCateterSSIncidenteHematomaDesc(objPEPPermeabilizacaoCateter)
		;
		set sSDescricaoIncidente = $$$VARPEPPermeabilizacaoCateterSSDescricaodoIncidente(objPEPPermeabilizacaoCateter)
		set sSConduta	= $$$VARPEPPermeabilizacaoCateterSSConduta(objPEPPermeabilizacaoCateter)
		Do listRetorno.%Set("rTSinSintMaisPulso",reacaoSinSintPulso)
		Do listRetorno.%Set("rTSinSintMaisPA",reacaoSinSintPA)
		Do listRetorno.%Set("rTSinSintFebre",reacaoSinSintFebre, "number")
		Do listRetorno.%Set("rTSinSintCalafrios",reacaoSinSintCalafrios, "number")
		Do listRetorno.%Set("rTSinSintDispneia",reacaoSinSintDispneia, "number")
		Do listRetorno.%Set("rTSinSintTremor",reacaoSinSintTremor, "number")
		Do listRetorno.%Set("rTSinSintVomito",reacaoSinSintVomito, "number")
		Do listRetorno.%Set("rTSinSintCianose",reacaoSinSintCianose, "number")
		Do listRetorno.%Set("rTSinSintDorLombar",reacaoSinSintDorLombar, "number")
		Do listRetorno.%Set("rTSinSintDordeCabeca",reacaoSinSintDordeCabeca, "number")
		Do listRetorno.%Set("rTSinSintDornoTorax",reacaoSinSintDornoTorax, "number")
		Do listRetorno.%Set("rTSinSintUrticaria",reacaoSinSintUrticaria, "number")
		Do listRetorno.%Set("rTSinSintEritema",reacaoSinSintEritema, "number")
		Do listRetorno.%Set("rTSinSintPrurido",reacaoSinSintPrurido, "number")
		Do listRetorno.%Set("rTSinSintSangramentos",reacaoSinSintSangramentos, "number")
		Do listRetorno.%Set("rTSinSintUrinaEscura",reacaoSinSintUrinaEscura, "number")
		Do listRetorno.%Set("rTSinSintMenosVolUrinario",reacaoSinSintMenosVolUrinario, "number")
		Do listRetorno.%Set("rTSinSintOutros",reacaoSinSintOutros, "number")
		set listRetorno.rTSinSintOutrosDescrica = reacaoSinSintOutrosDescricao
		;
		Do listRetorno.%Set("sSIncidenteNomomentodaf",sSIncidenteNomomentodaf, "number")
		Do listRetorno.%Set("sSIncidentePosteriormen",sSIncidentePosteriormen, "number")
		set listRetorno.sSIncidentePostData = $Select(sSIncidentePostData="":"",1:$zdate(sSIncidentePostData,3))
		Do listRetorno.%Set("sSIncidenteHematoma",sSIncidenteHematoma, "number")
		Do listRetorno.%Set("sSIncidenteDorexcepSSiva",sSIncidenteDorexcepSSiva, "number")
		Do listRetorno.%Set("sSIncDorOutLocBra",sSIncDorOutLocBra, "number")
		set listRetorno.sSIncDorOutLocBraDesc = sSIncDorOutLocBraDesc
		Do listRetorno.%Set("sSIncidenteAdormeciment",sSIncidenteAdormeciment, "number")
		Do listRetorno.%Set("sSIncidenteChoques",sSIncidenteChoques, "number")
		Do listRetorno.%Set("sSIncidenteHiperemia",sSIncidenteHiperemia, "number")
		set listRetorno.sSIncidenteHiperemiaDes = sSIncidenteHiperemiaDes
		Do listRetorno.%Set("sSIncidentePopSSivelpunc",sSIncidentePopSSivelpunc, "number")
		Do listRetorno.%Set("sSIncidenteInfiltracao",sSIncidenteInfiltracao, "number")
		Do listRetorno.%Set("sSIncidenteQueda",sSIncidenteQueda, "number")
		Do listRetorno.%Set("sSIncidenteNenhumalesao",sSIncidenteNenhumalesao, "number")
		Do listRetorno.%Set("sSIncPopSSivelLesao",sSIncPopSSivelLesao, "number")
		set listRetorno.sSIncPopSSivelLesaoDesc = sSIncPopSSivelLesaoDesc
		set listRetorno.sSConclusao = sSConclusao
		set listRetorno.sSIncidenteInfiltracaoD = sSIncidenteInfiltracaoD
		set listRetorno.sSIncidenteHematomaDesc = sSIncidenteHematomaDesc		
		;;
		set listRetorno.sSDescricaoIncidente = sSDescricaoIncidente
		set listRetorno.sSConduta = sSConduta
		;;;
	}
	
	do listRetorno.%ToJSON()
	
	quit $$$OK]]></Implementation>
</Method>

<Method name="ArmProntuario">
<ClassMethod>1</ClassMethod>
<Implementation><![CDATA[	$$$VAR
	set YM 	= 0
	set Y 	= "~"

	tstart
	set strStatus	=	""
	set erro			=	0
	try{

		set YBED = $get(%request.Data("YBED",1))
		set pCodProntuario = $get(%request.Data("pCodProntuario",1))
		set pAdmissao = $get(%request.Data("pAdmissao",1))
		;
		set objMEDAdmission	= $get(^MEDAdmission(YM, pAdmissao, 1))
		Set codPaciente = $$$MEDAdmissionPatient(objMEDAdmission)
		if $$$MEDAdmissionDateDischarged(objMEDAdmission) 	'= ""{
			if ($get(%request.Data("pAssinar",1)) '= 1) {
				set erro = 1
				set strStatus = "Passagem já finalizada!"
				quit
		
			}
		}
		;
		set pDiagnostico = $get(%request.Data("pDiagnostico",1))
		set pPortCath = $get(%request.Data("pPortCath",1))
		set pPICC = $get(%request.Data("pPICC",1))
		set pHickman = $get(%request.Data("pHickman",1))
		set pHickmanOutros = $get(%request.Data("pHickmanOutros",1))
		set pOutros = $get(%request.Data("pOutros",1))
		set pPuncaoAgulha20Gx10 = $get(%request.Data("pPuncaoAgulha20Gx10",1))
		set pPuncaoAgulha20Gx075 = $get(%request.Data("pPuncaoAgulha20Gx075",1))
		set pPuncaoRefluxoPositivo = $get(%request.Data("pPuncaoRefluxoPositivo",1))
		set pPuncaoRefluxoNegativo = $get(%request.Data("pPuncaoRefluxoNegativo",1))
		set pPuncaoOutros = $get(%request.Data("pPuncaoOutros",1))
		set pPuncaoDescricaoOutros = $get(%request.Data("pPuncaoDescricaoOutros",1))
		set pInfusao20mlSF09 = $get(%request.Data("pInfusao20mlSF09",1))
		set pInfusao40mlSF09 = $get(%request.Data("pInfusao40mlSF09",1))
		set pInfusaoSeringaHeparina = $get(%request.Data("pInfusaoSeringaHeparina",1))
		set pInfusaoBoaInfusao = $get(%request.Data("pInfusaoBoaInfusao",1))
		set pInfusaoObstruido = $get(%request.Data("pInfusaoObstruido",1))
		set pPele = $get(%request.Data("pPele",1))
		set pPeleOutros = $get(%request.Data("pPeleOutros",1))
		set pLiberacao = $get(%request.Data("pLiberacao",1))
		set pLiberacaoOutros = $get(%request.Data("pLiberacaoOutros",1))
		set pAlergia = $get(%request.Data("pAlergia",1))
		set pSelAlergia	= $get(%request.Data("pSelAlergia",1))
		;		
		if (pDiagnostico '= "") set pDiagnostico = $replace(pDiagnostico,",",";")
		if (pPuncaoAgulha20Gx10 '= "") set pPuncaoAgulha20Gx10 = $select(pPuncaoAgulha20Gx10="true"||(pPuncaoAgulha20Gx10=1):1,1:0)
		if (pPuncaoAgulha20Gx075 '= "") set pPuncaoAgulha20Gx075 = $select(pPuncaoAgulha20Gx075="true"||(pPuncaoAgulha20Gx075=1):1,1:0)
		if (pPuncaoRefluxoPositivo '= "") set pPuncaoRefluxoPositivo = $select(pPuncaoRefluxoPositivo="true"||(pPuncaoRefluxoPositivo=1):1,1:0)
		if (pPuncaoRefluxoNegativo '= "") set pPuncaoRefluxoNegativo = $select(pPuncaoRefluxoNegativo="true"||(pPuncaoRefluxoNegativo=1):1,1:0)
		if (pPuncaoOutros '= "") set pPuncaoOutros = $select(pPuncaoOutros="true"||(pPuncaoOutros=1):1,1:0)
		if (pInfusao20mlSF09 '= "") set pInfusao20mlSF09 = $select(pInfusao20mlSF09="true"||(pInfusao20mlSF09=1):1,1:0)
		if (pInfusao40mlSF09 '= "") set pInfusao40mlSF09 = $select(pInfusao40mlSF09="true"||(pInfusao40mlSF09=1):1,1:0)
		if (pInfusaoSeringaHeparina '= "") set pInfusaoSeringaHeparina = $select(pInfusaoSeringaHeparina="true"||(pInfusaoSeringaHeparina=1):1,1:0)
		if (pInfusaoBoaInfusao '= "") set pInfusaoBoaInfusao = $select(pInfusaoBoaInfusao="true"||(pInfusaoBoaInfusao=1):1,1:0)
		if (pInfusaoObstruido '= "") set pInfusaoObstruido = $select(pInfusaoObstruido="true"||(pInfusaoObstruido=1):1,1:0)
		;
		set objPEPPermeabilizacaoCateter = $get(^VARPEPPermeabilizacaoCateter(YM, pCodProntuario, 1))
		set $$$VARPEPPermeabilizacaoCateterDiagnostico(objPEPPermeabilizacaoCateter) = pDiagnostico
		set $$$VARPEPPermeabilizacaoCateterPortaCath(objPEPPermeabilizacaoCateter) = pPortCath
		set $$$VARPEPPermeabilizacaoCateterPICC(objPEPPermeabilizacaoCateter) = pPICC
		set $$$VARPEPPermeabilizacaoCateterHickman(objPEPPermeabilizacaoCateter) = pHickman
		set $$$VARPEPPermeabilizacaoCateterHickmanOutros(objPEPPermeabilizacaoCateter) = pHickmanOutros
		set $$$VARPEPPermeabilizacaoCateterOutros(objPEPPermeabilizacaoCateter) = pOutros
		set $$$VARPEPPermeabilizacaoCateterPuncaoAgulha20Gx10(objPEPPermeabilizacaoCateter) = pPuncaoAgulha20Gx10
		set $$$VARPEPPermeabilizacaoCateterPuncaoAgulha20Gx075(objPEPPermeabilizacaoCateter) = pPuncaoAgulha20Gx075
		set $$$VARPEPPermeabilizacaoCateterPuncaoRefluxoPositivo(objPEPPermeabilizacaoCateter) = pPuncaoRefluxoPositivo
		set $$$VARPEPPermeabilizacaoCateterPuncaoRefluxoNegativo(objPEPPermeabilizacaoCateter) = pPuncaoRefluxoNegativo
		set $$$VARPEPPermeabilizacaoCateterPuncaoOutros(objPEPPermeabilizacaoCateter) = pPuncaoOutros
		set $$$VARPEPPermeabilizacaoCateterPuncaoDescricaoOutros(objPEPPermeabilizacaoCateter) = pPuncaoDescricaoOutros
		set $$$VARPEPPermeabilizacaoCateterInfusao20mlSF09(objPEPPermeabilizacaoCateter) = pInfusao20mlSF09
		set $$$VARPEPPermeabilizacaoCateterInfusao40mlSF09(objPEPPermeabilizacaoCateter) = pInfusao40mlSF09
		set $$$VARPEPPermeabilizacaoCateterInfusaoSeringaHeparina(objPEPPermeabilizacaoCateter) = pInfusaoSeringaHeparina
		set $$$VARPEPPermeabilizacaoCateterBoaInfusaoeFluxoLivre(objPEPPermeabilizacaoCateter) = pInfusaoBoaInfusao
		set $$$VARPEPPermeabilizacaoCateterInfusaoObstruido(objPEPPermeabilizacaoCateter) = pInfusaoObstruido
		set $$$VARPEPPermeabilizacaoCateterPele(objPEPPermeabilizacaoCateter) = pPele
		set $$$VARPEPPermeabilizacaoCateterPeleOutros(objPEPPermeabilizacaoCateter) = pPeleOutros
		set $$$VARPEPPermeabilizacaoCateterLiberacao(objPEPPermeabilizacaoCateter) = pLiberacao
		set $$$VARPEPPermeabilizacaoCateterLiberacaoOutros(objPEPPermeabilizacaoCateter) = pLiberacaoOutros
		set $$$VARPEPPermeabilizacaoCateterAlergia(objPEPPermeabilizacaoCateter) = pAlergia
		Set $$$VARPEPPermeabilizacaoCateterMedicoExterno(objPEPPermeabilizacaoCateter) = $Get(%request.Data("pMedicoExterno",1))
		;
		if ($get(%request.Data("pAssinar",1)) = 1) {
			set $$$VARPEPPermeabilizacaoCateterDataHoraAssinatura(objPEPPermeabilizacaoCateter) = $Horolog
			set $$$VARPEPPermeabilizacaoCateterUsuarioAssinatura(objPEPPermeabilizacaoCateter) 	= YBED
		}else{
			If ($$$VARPEPPermeabilizacaoCateterUsuarioAssinatura(objPEPPermeabilizacaoCateter) '= YBED) {
				set $$$VARPEPPermeabilizacaoCateterDataHoraAssinatura(objPEPPermeabilizacaoCateter) = ""
				set $$$VARPEPPermeabilizacaoCateterUsuarioAssinatura(objPEPPermeabilizacaoCateter) 	= ""
			}else{
				set $$$VARPEPPermeabilizacaoCateterDataHoraAssinatura(objPEPPermeabilizacaoCateter) = $Horolog
			}
		}
		;
		set pSSIncidenteNomomentodaf = $Get(%request.Data("pSSIncidenteNomomentodaf",1))
		set pSSIncidentePosteriormen = $Get(%request.Data("pSSIncidentePosteriormen",1))
		set pSSIncidentePostData = $Get(%request.Data("pSSIncidentePostData",1))
		set pSSIncidenteHematoma = $Get(%request.Data("pSSIncidenteHematoma",1))
		set pSSIncidenteDorexcepSSiva = $Get(%request.Data("pSSIncidenteDorexcepSSiva",1))
		set pSSIncDorOutLocBra = $Get(%request.Data("pSSIncDorOutLocBra",1))
		set pSSIncDorOutLocBraDesc = $Get(%request.Data("pSSIncDorOutLocBraDesc",1))
		set pSSIncidenteAdormeciment = $Get(%request.Data("pSSIncidenteAdormeciment",1))
		set pSSIncidenteChoques = $Get(%request.Data("pSSIncidenteChoques",1))
		set pSSIncidenteHiperemia = $Get(%request.Data("pSSIncidenteHiperemia",1))
		set pSSIncidenteHiperemiaDes = $Get(%request.Data("pSSIncidenteHiperemiaDes",1))
		set pSSIncidentePopSSivelpunc = $Get(%request.Data("pSSIncidentePopSSivelpunc",1))
		set pSSIncidenteInfiltracao = $Get(%request.Data("pSSIncidenteInfiltracao",1))
		set pSSIncidenteQueda = $Get(%request.Data("pSSIncidenteQueda",1))
		set pSSIncidenteNenhumalesao = $Get(%request.Data("pSSIncidenteNenhumalesao",1))
		set pSSIncPopSSivelLesao = $Get(%request.Data("pSSIncPopSSivelLesao",1))
		set pSSIncPopSSivelLesaoDesc = $Get(%request.Data("pSSIncPopSSivelLesaoDesc",1))
		set pSSDescricaoIncidente = $Get(%request.Data("pSSDescricaoIncidente",1))
		set pSSConduta = $Get(%request.Data("pSSConduta",1))
		set pSSConclusao = $Get(%request.Data("pSSConclusao",1))
		set pSSIncidenteInfiltracaoD = $Get(%request.Data("pSSIncidenteInfiltracaoD",1))
		set pSSIncidenteHematomaDesc = $Get(%request.Data("pSSIncidenteHematomaDesc",1))		
		;
		set pRTSinSintMaisPulso = $Get(%request.Data("pRTSinSintMaisPulso",1))
		set pRTSinSintMenosPulso = $Get(%request.Data("pRTSinSintMenosPulso",1))
		set pRTSinSintMaisPA = $Get(%request.Data("pRTSinSintMaisPA",1))
		set pRTSinSintMenosPA = $Get(%request.Data("pRTSinSintMenosPA",1))
		set pRTSinSintFebre = $Get(%request.Data("pRTSinSintFebre",1))
		set pRTSinSintCalafrios = $Get(%request.Data("pRTSinSintCalafrios",1))
		set pRTSinSintDispneia = $Get(%request.Data("pRTSinSintDispneia",1))
		set pRTSinSintTremor = $Get(%request.Data("pRTSinSintTremor",1))
		set pRTSinSintVomito = $Get(%request.Data("pRTSinSintVomito",1))
		set pRTSinSintCianose = $Get(%request.Data("pRTSinSintCianose",1))
		set pRTSinSintDorLombar = $Get(%request.Data("pRTSinSintDorLombar",1))
		set pRTSinSintDordeCabeca = $Get(%request.Data("pRTSinSintDordeCabeca",1))
		set pRTSinSintDornoTorax = $Get(%request.Data("pRTSinSintDornoTorax",1))
		set pRTSinSintUrticaria = $Get(%request.Data("pRTSinSintUrticaria",1))
		set pRTSinSintEritema = $Get(%request.Data("pRTSinSintEritema",1))
		set pRTSinSintPrurido = $Get(%request.Data("pRTSinSintPrurido",1))
		set pRTSinSintSangramentos = $Get(%request.Data("pRTSinSintSangramentos",1))
		set pRTSinSintUrinaEscura = $Get(%request.Data("pRTSinSintUrinaEscura",1))
		set pRTSinSintMenosVolUrinario = $Get(%request.Data("pRTSinSintMenosVolUrinario",1))
		set pRTSinSintOutros = $Get(%request.Data("pRTSinSintOutros",1))
		set pRTSinSintOutrosDescrica = $Get(%request.Data("pRTSinSintOutrosDescrica",1))
		;;if (pRTSinSintMaisPulso '= "") set pRTSinSintMaisPulso = $select(pRTSinSintMaisPulso="true"||(pRTSinSintMaisPulso=1):1,1:0)
		if (pRTSinSintMenosPulso '= "") set pRTSinSintMenosPulso = $select(pRTSinSintMenosPulso="true"||(pRTSinSintMenosPulso=1):1,1:0)
		;;if (pRTSinSintMaisPA '= "") set pRTSinSintMaisPA = $select(pRTSinSintMaisPA="true"||(pRTSinSintMaisPA=1):1,1:0)
		if (pRTSinSintMenosPA '= "") set pRTSinSintMenosPA = $select(pRTSinSintMenosPA="true"||(pRTSinSintMenosPA=1):1,1:0)
		if (pRTSinSintFebre '= "") set pRTSinSintFebre = $select(pRTSinSintFebre="true"||(pRTSinSintFebre=1):1,1:0)
		if (pRTSinSintCalafrios '= "") set pRTSinSintCalafrios = $select(pRTSinSintCalafrios="true"||(pRTSinSintCalafrios=1):1,1:0)
		if (pRTSinSintDispneia '= "") set pRTSinSintDispneia = $select(pRTSinSintDispneia="true"||(pRTSinSintDispneia=1):1,1:0)
		if (pRTSinSintTremor '= "") set pRTSinSintTremor = $select(pRTSinSintTremor="true"||(pRTSinSintTremor=1):1,1:0)
		if (pRTSinSintVomito '= "") set pRTSinSintVomito = $select(pRTSinSintVomito="true"||(pRTSinSintVomito=1):1,1:0)
		if (pRTSinSintCianose '= "") set pRTSinSintCianose = $select(pRTSinSintCianose="true"||(pRTSinSintCianose=1):1,1:0)
		if (pRTSinSintDorLombar '= "") set pRTSinSintDorLombar = $select(pRTSinSintDorLombar="true"||(pRTSinSintDorLombar=1):1,1:0)
		if (pRTSinSintDordeCabeca '= "") set pRTSinSintDordeCabeca = $select(pRTSinSintDordeCabeca="true"||(pRTSinSintDordeCabeca=1):1,1:0)
		if (pRTSinSintDornoTorax '= "") set pRTSinSintDornoTorax = $select(pRTSinSintDornoTorax="true"||(pRTSinSintDornoTorax=1):1,1:0)
		if (pRTSinSintUrticaria '= "") set pRTSinSintUrticaria = $select(pRTSinSintUrticaria="true"||(pRTSinSintUrticaria=1):1,1:0)
		if (pRTSinSintEritema '= "") set pRTSinSintEritema = $select(pRTSinSintEritema="true"||(pRTSinSintEritema=1):1,1:0)
		if (pRTSinSintPrurido '= "") set pRTSinSintPrurido = $select(pRTSinSintPrurido="true"||(pRTSinSintPrurido=1):1,1:0)
		if (pRTSinSintSangramentos '= "") set pRTSinSintSangramentos = $select(pRTSinSintSangramentos="true"||(pRTSinSintSangramentos=1):1,1:0)
		if (pRTSinSintUrinaEscura '= "") set pRTSinSintUrinaEscura = $select(pRTSinSintUrinaEscura="true"||(pRTSinSintUrinaEscura):1,1:0)
		if (pRTSinSintMenosVolUrinario '= "") set pRTSinSintMenosVolUrinario = $select(pRTSinSintMenosVolUrinario="true"||(pRTSinSintMenosVolUrinario=1):1,1:0)
		if (pRTSinSintOutros '= "") set pRTSinSintOutros = $select(pRTSinSintOutros="true"||(pRTSinSintOutros=1):1,1:0)
		;
		if (pSSIncidentePostData '= "") set pSSIncidentePostData = $zdateh(pSSIncidentePostData,4)
		if (pSSIncidenteNomomentodaf '= "") set pSSIncidenteNomomentodaf = $select(pSSIncidenteNomomentodaf="true"||(pSSIncidenteNomomentodaf=1):1,1:0)
		if (pSSIncidentePosteriormen '= "") set pSSIncidentePosteriormen = $select(pSSIncidentePosteriormen="true"||(pSSIncidentePosteriormen=1):1,1:0)
		if (pSSIncidenteHematoma '= "") set pSSIncidenteHematoma = $select(pSSIncidenteHematoma="true"||(pSSIncidenteHematoma=1):1,1:0)
		if (pSSIncidenteDorexcepSSiva '= "") set pSSIncidenteDorexcepSSiva = $select(pSSIncidenteDorexcepSSiva="true"||(pSSIncidenteDorexcepSSiva=1):1,1:0)
		if (pSSIncDorOutLocBra '= "") set pSSIncDorOutLocBra = $select(pSSIncDorOutLocBra="true"||(pSSIncDorOutLocBra=1):1,1:0)
		if (pSSIncidenteAdormeciment '= "") set pSSIncidenteAdormeciment = $select(pSSIncidenteAdormeciment="true"||(pSSIncidenteAdormeciment=1):1,1:0)
		if (pSSIncidenteChoques '= "") set pSSIncidenteChoques = $select(pSSIncidenteChoques="true"||(pSSIncidenteChoques=1):1,1:0)
		if (pSSIncidenteHiperemia '= "") set pSSIncidenteHiperemia = $select(pSSIncidenteHiperemia="true"||(pSSIncidenteHiperemia=1):1,1:0)
		if (pSSIncidentePopSSivelpunc '= "") set pSSIncidentePopSSivelpunc = $select(pSSIncidentePopSSivelpunc="true"||(pSSIncidentePopSSivelpunc=1):1,1:0)
		if (pSSIncidenteInfiltracao '= "") set pSSIncidenteInfiltracao = $select(pSSIncidenteInfiltracao="true"||(pSSIncidenteInfiltracao=1):1,1:0)
		if (pSSIncidenteQueda '= "") set pSSIncidenteQueda = $select(pSSIncidenteQueda="true"||(pSSIncidenteQueda=1):1,1:0)
		if (pSSIncidenteNenhumalesao '= "") set pSSIncidenteNenhumalesao = $select(pSSIncidenteNenhumalesao="true"||(pSSIncidenteNenhumalesao=1):1,1:0)
		if (pSSIncPopSSivelLesao '= "") set pSSIncPopSSivelLesao = $select(pSSIncPopSSivelLesao="true"||(pSSIncPopSSivelLesao=1):1,1:0)
		;;;;;
		set $$$VARPEPPermeabilizacaoCateterReacaoSinSintPulso(objPEPPermeabilizacaoCateter) = pRTSinSintMaisPulso
		set $$$VARPEPPermeabilizacaoCateterReacaoSinSintPA(objPEPPermeabilizacaoCateter) = $Replace(pRTSinSintMaisPA,"_","")
		set $$$VARPEPPermeabilizacaoCateterReacaoSinSintFebre(objPEPPermeabilizacaoCateter) = pRTSinSintFebre
		set $$$VARPEPPermeabilizacaoCateterReacaoSinSintCalafrios(objPEPPermeabilizacaoCateter) = pRTSinSintCalafrios
		set $$$VARPEPPermeabilizacaoCateterReacaoSinSintDispneia(objPEPPermeabilizacaoCateter) = pRTSinSintDispneia
		set $$$VARPEPPermeabilizacaoCateterReacaoSinSintTremor(objPEPPermeabilizacaoCateter) = pRTSinSintTremor
		set $$$VARPEPPermeabilizacaoCateterReacaoSinSintVomito(objPEPPermeabilizacaoCateter) = pRTSinSintVomito
		set $$$VARPEPPermeabilizacaoCateterReacaoSinSintCianose(objPEPPermeabilizacaoCateter) = pRTSinSintCianose
		set $$$VARPEPPermeabilizacaoCateterReacaoSinSintDorLombar(objPEPPermeabilizacaoCateter) = pRTSinSintDorLombar
		set $$$VARPEPPermeabilizacaoCateterReacaoSinSintDordeCabeca(objPEPPermeabilizacaoCateter) = pRTSinSintDordeCabeca
		set $$$VARPEPPermeabilizacaoCateterReacaoSinSintDornoTorax(objPEPPermeabilizacaoCateter) = pRTSinSintDornoTorax
		set $$$VARPEPPermeabilizacaoCateterReacaoSinSintUrticaria(objPEPPermeabilizacaoCateter) = pRTSinSintUrticaria
		set $$$VARPEPPermeabilizacaoCateterReacaoSinSintEritema(objPEPPermeabilizacaoCateter) = pRTSinSintEritema
		set $$$VARPEPPermeabilizacaoCateterReacaoSinSintPrurido(objPEPPermeabilizacaoCateter) = pRTSinSintPrurido
		set $$$VARPEPPermeabilizacaoCateterReacaoSinSintSangramentos(objPEPPermeabilizacaoCateter) = pRTSinSintSangramentos
		set $$$VARPEPPermeabilizacaoCateterReacaoSinSintUrinaEscura(objPEPPermeabilizacaoCateter) = pRTSinSintUrinaEscura
		set $$$VARPEPPermeabilizacaoCateterReacaoSinSintMenosVolUrinario(objPEPPermeabilizacaoCateter) = pRTSinSintMenosVolUrinario
		set $$$VARPEPPermeabilizacaoCateterReacaoSinSintOutros(objPEPPermeabilizacaoCateter) = pRTSinSintOutros
		set $$$VARPEPPermeabilizacaoCateterReacaoSinSintOutrosDescricao(objPEPPermeabilizacaoCateter) = pRTSinSintOutrosDescrica
		;
		set $$$VARPEPPermeabilizacaoCateterSSIncidenteNomomentodaf(objPEPPermeabilizacaoCateter) = pSSIncidenteNomomentodaf
		set $$$VARPEPPermeabilizacaoCateterSSIncidentePosteriormen(objPEPPermeabilizacaoCatet]]><![CDATA[er) = pSSIncidentePosteriormen
		set $$$VARPEPPermeabilizacaoCateterSSIncidentePostData(objPEPPermeabilizacaoCateter) = pSSIncidentePostData
		set $$$VARPEPPermeabilizacaoCateterSSIncidenteHematoma(objPEPPermeabilizacaoCateter) = pSSIncidenteHematoma
		set $$$VARPEPPermeabilizacaoCateterSSIncidenteDorexcessiva(objPEPPermeabilizacaoCateter) = pSSIncidenteDorexcepSSiva
		set $$$VARPEPPermeabilizacaoCateterSSIncDorOutLocBra(objPEPPermeabilizacaoCateter) = pSSIncDorOutLocBra
		set $$$VARPEPPermeabilizacaoCateterSSIncDorOutLocBraDesc(objPEPPermeabilizacaoCateter) = pSSIncDorOutLocBraDesc
		set $$$VARPEPPermeabilizacaoCateterSSIncidenteAdormeciment(objPEPPermeabilizacaoCateter) = pSSIncidenteAdormeciment
		set $$$VARPEPPermeabilizacaoCateterSSIncidenteChoques(objPEPPermeabilizacaoCateter) = pSSIncidenteChoques
		set $$$VARPEPPermeabilizacaoCateterSSIncidenteHiperemia(objPEPPermeabilizacaoCateter) = pSSIncidenteHiperemia
		set $$$VARPEPPermeabilizacaoCateterSSIncidenteHiperemiaDes(objPEPPermeabilizacaoCateter) = pSSIncidenteHiperemiaDes
		set $$$VARPEPPermeabilizacaoCateterSSIncidentePossivelpunc(objPEPPermeabilizacaoCateter) = pSSIncidentePopSSivelpunc
		set $$$VARPEPPermeabilizacaoCateterSSIncidenteInfiltracao(objPEPPermeabilizacaoCateter) = pSSIncidenteInfiltracao
		set $$$VARPEPPermeabilizacaoCateterSSIncidenteQueda(objPEPPermeabilizacaoCateter) = pSSIncidenteQueda
		set $$$VARPEPPermeabilizacaoCateterSSIncidenteNenhumalesao(objPEPPermeabilizacaoCateter) = pSSIncidenteNenhumalesao
		set $$$VARPEPPermeabilizacaoCateterSSIncPossivelLesao(objPEPPermeabilizacaoCateter) = pSSIncPopSSivelLesao
		set $$$VARPEPPermeabilizacaoCateterSSIncPossivelLesaoDesc(objPEPPermeabilizacaoCateter) = pSSIncPopSSivelLesaoDesc
		set $$$VARPEPPermeabilizacaoCateterSSConclusao(objPEPPermeabilizacaoCateter) = pSSConclusao
		set $$$VARPEPPermeabilizacaoCateterSSIncidenteInfiltracaoD(objPEPPermeabilizacaoCateter) = pSSIncidenteInfiltracaoD
		set $$$VARPEPPermeabilizacaoCateterSSIncidenteHematomaDesc(objPEPPermeabilizacaoCateter) = pSSIncidenteHematomaDesc
		;;
		set $$$VARPEPPermeabilizacaoCateterSSDescricaodoIncidente(objPEPPermeabilizacaoCateter) = pSSDescricaoIncidente
		set $$$VARPEPPermeabilizacaoCateterSSConduta(objPEPPermeabilizacaoCateter) = pSSConduta
		;;;;;
		;
		set strStatus	=	$$$Save("VARPEPPermeabilizacaoCateter", pCodProntuario, objPEPPermeabilizacaoCateter, $$$YES)
		;
		Set objMEDPatient = $Get(^MEDPatient(0, codPaciente, 1))
		If (pSelAlergia '= $$$MEDPatientAlergia(objMEDPatient) || (pAlergia '= $$$MEDPatientAllergies(objMEDPatient))) {
			set $$$MEDPatientAlergia(objMEDPatient) 	= pSelAlergia
			set $$$MEDPatientAllergies(objMEDPatient) = pAlergia
			set strStatus	=	$$$Save("MEDPatient", codPaciente, objMEDPatient, $$$YES)
		}
	}
	catch(err){
		#dim err as %Exception.SystemException
		set strStatus = err.DisplayString()
		set erro	=	err
	}
	set retorno = {}
	if 'erro{
		tcommit
		set retorno.status = strStatus
		set retorno.dataHoraAssinatura = $$$VARPEPPermeabilizacaoCateterDataHoraAssinatura(objPEPPermeabilizacaoCateter)
	}else{
		trollback
		set retorno.status = strStatus
		set retorno.dataHoraAssinatura = $$$VARPEPPermeabilizacaoCateterDataHoraAssinatura(objPEPPermeabilizacaoCateter)
	}
	do retorno.%ToJSON()
	quit $$$OK]]></Implementation>
</Method>

<Method name="historicoReacao">
<ClassMethod>1</ClassMethod>
<Implementation><![CDATA[	$$$VAR
	Set YM 	= 0
	Set Y 	= "~"

	Set pCodProntuario 	= $Get(%request.Data("pCodProntuario",1))
	Set objProntuario 	= $get(^VARProntuarioEletronico(YM, pCodProntuario, 1))	
	Set codPaciente 		= $$$VARProntuarioEletronicoPaciente(objProntuario)

	Set arrayRetorno 	= []

	Set meuSQL = "Select Pront.*, Perm.* From SQLUser.VARProntuarioEletronico As Pront, "
	Set meuSQL = meuSQL _ "SQLUser.VARPEPPermeabilizacaoCateter As Perm "
	Set meuSQL = meuSQL _ "Where Pront.Company = 0 And Perm.Company = 0 "
	Set meuSQL = meuSQL _ "And Pront.Paciente = '"_codPaciente_"' "
	Set meuSQL = meuSQL _ "And Perm.CodigoProntuarioEletronic = Pront.Codigo "
	Set meuSQL = meuSQL _ "Order By Pront.CriadoEm Desc "
	Set rSet 	 = ##class(%SQL.Statement).%ExecDirect("",meuSQL)
	
	While(rSet.%Next()){
		Set list = {}
		Set list.admissao = rSet.%Get("Codigo")
		Set list.dataHora = $ZDateTime(rSet.%Get("CriadoEm"),4,2)

		Set list.ssPulso = rSet.%Get("ReacaoSinSintPulso")
		Set list.ssPressaoArterial = $Extract(rSet.%Get("ReacaoSinSintPA"),1,3)_"/"_$Extract(rSet.%Get("ReacaoSinSintPA"),4,6)
		Set list.ssFebre = $Select(rSet.%Get("ReacaoSinSintFebre")=1:"Sim",1:"Não")
		Set list.ssVomito = $Select(rSet.%Get("ReacaoSinSintVomito")=1:"Sim",1:"Não")
		Set list.ssDorTorax = $Select(rSet.%Get("ReacaoSinSintDornoTorax")=1:"Sim",1:"Não")
		Set list.ssSangramentos = $Select(rSet.%Get("ReacaoSinSintSangramentos")=1:"Sim",1:"Não")
		Set list.ssCalafrios = $Select(rSet.%Get("ReacaoSinSintCalafrios")=1:"Sim",1:"Não")
		Set list.ssCianose = $Select(rSet.%Get("ReacaoSinSintCianose")=1:"Sim",1:"Não")
		Set list.ssUrticaria = $Select(rSet.%Get("ReacaoSinSintUrticaria")=1:"Sim",1:"Não")
		Set list.ssUrinaEscura = $Select(rSet.%Get("ReacaoSinSintUrinaEscura")=1:"Sim",1:"Não")
		Set list.ssDispneia = $Select(rSet.%Get("ReacaoSinSintDispneia")=1:"Sim",1:"Não")
		Set list.ssDorLombar = $Select(rSet.%Get("ReacaoSinSintDorLombar")=1:"Sim",1:"Não")
		Set list.ssEritema = $Select(rSet.%Get("ReacaoSinSintEritema")=1:"Sim",1:"Não")
		Set list.ssVolUrinario = $Select(rSet.%Get("ReacaoSinSintMenosVolUrinario")=1:"Sim",1:"Não")
		Set list.ssTremor = $Select(rSet.%Get("ReacaoSinSintTremor")=1:"Sim",1:"Não")
		Set list.ssDorCabeca = $Select(rSet.%Get("ReacaoSinSintDordeCabeca")=1:"Sim",1:"Não")
		Set list.ssPrurido = $Select(rSet.%Get("ReacaoSinSintPrurido")=1:"Sim",1:"Não")
		Set list.ssOutros = $Select(rSet.%Get("ReacaoSinSintOutros")=1:"Sim",1:"Não")
		Set list.ssDescricao = rSet.%Get("ReacaoSinSintOutrosDescricao")
		Set list.iQDFlebotomia = $Select(rSet.%Get("SSIncidenteNomomentodaf")=1:"Sim",1:"Não")
		Set list.iQDPosteriormente = $Select(rSet.%Get("SSIncidentePosteriormen")=1:"Sim",1:"Não")
		Set list.iQDData = $Select(rSet.%Get("SSIncidentePostData")="":"",1:$ZDate(rSet.%Get("SSIncidentePostData"),4))
		Set list.iHematoma = $Select(rSet.%Get("SSIncidenteHematoma")=1:"Sim",1:"Não")
		Set list.iHematomaDesc = rSet.%Get("SSIncidenteHematomaDesc")
		Set list.iDorExessiva = $Select(rSet.%Get("SSIncidenteDorexcessiva")=1:"Sim",1:"Não")
		Set list.iDorLocBraco = $Select(rSet.%Get("SSIncDorOutLocBra")=1:"Sim",1:"Não")
		Set list.iDorLocBracoDesc = rSet.%Get("SSIncDorOutLocBraDesc")
		Set list.iAdormecimento = $Select(rSet.%Get("SSIncidenteAdormeciment")=1:"Sim",1:"Não")
		Set list.iChoques = $Select(rSet.%Get("SSIncidenteChoques")=1:"Sim",1:"Não")
		Set list.iHiperemia = $Select(rSet.%Get("SSIncidenteHiperemia")=1:"Sim",1:"Não")
		Set list.iHiperemiaDesc = rSet.%Get("SSIncidenteHiperemiaDes")
		Set list.iPuncaoArterial = $Select(rSet.%Get("SSIncidentePossivelpunc")=1:"Sim",1:"Não")
		Set list.iInfiltracao = $Select(rSet.%Get("SSIncidenteInfiltracao")=1:"Sim",1:"Não")
		Set list.iInfiltracaoDesc = rSet.%Get("SSIncidenteInfiltracaoD")
		Set list.iQueda = $Select(rSet.%Get("SSIncidenteQueda")=1:"Sim",1:"Não")
		Set list.iNenhumaLesao = $Select(rSet.%Get("SSIncidenteNenhumalesao")=1:"Sim",1:"Não")
		Set list.iPossivelLesao = $Select(rSet.%Get("SSIncPossivelLesao")=1:"Sim",1:"Não")
		Set list.iPossivelLesaoDesc = rSet.%Get("SSIncPossivelLesaoDesc")
		Set list.descricaoIncidente = rSet.%Get("SSDescricaodoIncidente")
		Set list.condutaTratamento = rSet.%Get("SSConduta")
		Set list.conclusao = rSet.%Get("SSConclusao")
		;
		Do arrayRetorno.%Push(list)
	}
	Do arrayRetorno.%ToJSON()
	Return $$$OK]]></Implementation>
</Method>

<Method name="historicoDadosVitais">
<ClassMethod>1</ClassMethod>
<Implementation><![CDATA[	$$$VAR
	Set YM 	= 0
	Set Y 	= "~"

	Set pCodProntuario 	= $Get(%request.Data("pCodProntuario",1))
	Set objProntuario 	= $get(^VARProntuarioEletronico(YM, pCodProntuario, 1))	
	Set codPaciente 		= $$$VARProntuarioEletronicoPaciente(objProntuario)

	Set arrayRetorno 	= []

	Set sql = "SELECT P.NumeroAdmisao,P.CriadoEm,C.* "
					_ "FROM SQLUser.VARProntuarioEletronico AS P "
					_ "INNER JOIN SQLUser.VARPEPPermeabilizacaoCateter AS C ON C.CodigoProntuarioEletronic = P.Codigo "
					_ "WHERE C.Company = 0 AND P.Company = 0 AND P.Paciente = '"_codPaciente_"' "
					_ "ORDER BY P.CriadoEm DESC"
	
	Set rSet 	 = ##class(%SQL.Statement).%ExecDirect("",sql)
	
	While(rSet.%Next()){
		Set list = {}
		Set list.admissao = rSet.%Get("NumeroAdmisao")
		Set list.dataHora = $ZDateTime(rSet.%Get("CriadoEm"),4,2)
		
		Set list.alergia = rSet.%Get("Alergia")
		Set list.portaCath = $CASE(rSet.%Get("PortaCath"),"D":"Sub Clavia Direita","E":"Sub Clavia Esquerda",:"")
		Set list.PICC = rSet.%Get("PICC")
		Set list.hickman = $CASE(rSet.%Get("Hickman"),1:"Região Esterna",2:rSet.%Get("HickmanOutros"),:"")
		Set list.outros = rSet.%Get("Outros")
		Set list.puncaoAgulha20Gx10 = $S(rSet.%Get("PuncaoAgulha20Gx10")=1:"Sim",1:"")
		Set list.puncaoAgulha20Gx075 = $S(rSet.%Get("PuncaoAgulha20Gx075")=1:"Sim",1:"")
		Set list.puncaoRefluxoPositivo = $S(rSet.%Get("PuncaoRefluxoPositivo")=1:"Sim",1:"")
		Set list.puncaoRefluxoNegativo = $S(rSet.%Get("PuncaoRefluxoNegativo")=1:"Sim",1:"")
		Set list.puncaoDescricaoOutros = rSet.%Get("PuncaoDescricaoOutros")
		Set list.infusao20mlSF09 = $S(rSet.%Get("Infusao20mlSF09")=1:"Sim",1:"")
		Set list.infusao40mlSF09 = $S(rSet.%Get("Infusao40mlSF09")=1:"Sim",1:"")
		Set list.infusaoSeringaHeparina = $S(rSet.%Get("InfusaoSeringaHeparina")=1:"Sim",1:"")
		Set list.infusaoObstruido = $S(rSet.%Get("InfusaoObstruido")=1:"Sim",1:"")
		Set list.boaInfusaoeFluxoLivre = $S(rSet.%Get("BoaInfusaoeFluxoLivre")=1:"Sim",1:"")
		Set list.pele = $CASE(rSet.%Get("Pele"),1:"Limpa e Integra",2:"Sugidade e Integra",3:rSet.%Get("PeleOutros"),:"")
		Set list.liberacao = $CASE(rSet.%Get("Liberacao"),1:"Curativa",2:"Sem Curativo",3:rSet.%Get("LiberacaoOutros"),:"")
		
		Do arrayRetorno.%Push(list)
	}
	
	Do arrayRetorno.%ToJSON()
	Return $$$OK]]></Implementation>
</Method>
</Class>
</Export>