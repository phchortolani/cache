<?xml version="1.0" encoding="UTF-8"?>
<Export generator="Cache" version="22" zv="CACHE" ts="2001-01-01 00:00:00">
<Routine name="INAUFPARA" type="MAC" languagemode="0" timestamp="58440,0"><![CDATA[
INAUFPARA(YKEY) ;INAUFPARA;FIS;IMPORT VON BENUTERPARAMETERN NACH AUFTRAGSSPARAMETER;30.10.2001
	;
	;/------------------------------------------------------------------\
	;| Description of Function :
	;|		IMPORT VON BENUTERPARAMETERN NACH AUFTRAGSSPARAMETER
	;|
	;| Inputs : 
	;|
	;|
	;| ByRef :
	;|
	;|
	;| Returns :
	;|
	;|
	;| History :
	;|
	;| FIS	30.10.2001
	;|
	;\------------------------------------------------------------------/
	;
	NEW OLDPARA,NR,NRX
	SET YKEY=$PIECE($GET(YKEY),",",1)
	IF YKEY="" DO ^WWWFORM QUIT
	IF '$DATA(^INAUF(YM,YKEY))="" DO ^WWWFORM QUIT
	;SUCHEN BEREITS ERFASSTER PARAMETER ;seek yet parameter 
	IF $DATA(^INAUFPARA(YM,YKEY)) DO
	. SET NR="" FOR  SET NR=$ORDER(^INAUFPARA(YM,YKEY,NR)) QUIT:NR=""  DO
	. . IF $GET(^INAUFPARA(YM,YKEY,NR,1))'="" SET OLDPARA(NR)=^(1)
	. . QUIT
	. QUIT
	;KOPIEREN BENUTZERPARAMETER
	IF $DATA(^INPARA(YM,"POSGRUPPE",SPRACHE)) DO
	. KILL ^INAUFPARA(YM,YKEY)
	. MERGE ^INAUFPARA(YM,YKEY)=^INPARA(YM,"POSGRUPPE",SPRACHE)
	. QUIT
	;WIEDEREINSETZEN ERFASSTER PARAMENTER ;reinstate 
	IF $DATA(OLDPARA) DO
	. SET NR="" FOR  SET NR=$ORDER(OLDPARA(NR)) QUIT:NR=""  DO
	. . SET NRX=NR
	. . IF $DATA(^INAUFPARA(YM,YKEY,NRX)) QUIT  ;SUCHBEGRIFF BEREITS VORHANDEN ;yet on hand 
	. . ;IF $DATA(^INAUFPARA(YM,YKEY,NRX)) FOR  QUIT:'$DATA(^INAUFPARA(YM,YKEY,NRX))  SET NRX=NRX+1
	. . SET ^INAUFPARA(YM,YKEY,NRX,1)=$GET(OLDPARA(NR))
	. . QUIT
	. QUIT
	DO ^WWWFORM
	QUIT
	
BACK(KEY) ;RÃœCKSPRUNG NACH AUFTRAG ;within order 
	NEW YFORM,YKEY
	SET YKEY=$GET(KEY)
	SET YFORM="INAUF"
	IF YKEY="" SET YFORM="INAUFNEU"
	SET %("VAR","YKEY")=YKEY
	SET %("VAR","YFORM")=YFORM
	DO ^WWWFORM
	QUIT
]]></Routine>
</Export>