<?xml version="1.0" encoding="UTF-8"?>
<Export generator="Cache" version="22" zv="CACHE" ts="2001-01-01 00:00:00">
<Routine name="INARTPREISBEPROM1S" type="MAC" languagemode="0" timestamp="58440,0"><![CDATA[
INARTPREISBEPROM1S ;INARTPREISBEPROM1S;BEC;SETZEN VORGABEN VON INARTPREISPROM2 ARTIKEL;02.04.03
	;
	;/------------------------------------------------------------------\
	;| Description of Function :
	;|		SETZEN VORGABEN VON INARTPREISPROM2 ARTIKEL
	;|
	;| Inputs : 
	;|
	;|
	;| ByRef :
	;|
	;|
	;| Returns :
	;|
	;|
	;| History :
	;|
	;| BEC	02.04.03
	;|
	;\------------------------------------------------------------------/
	;
	SET VORG(1)=$GET(VORG(1))  ;BETRIEB
	SET VORG(2)=$GET(VORG(2))  ;AKTION         
	SET VORG(3)=$GET(VORG(3))  ;WARENENGRUPPE
	SET VORG(3)=$TRANSLATE(VORG(3),",",";")
	NEW CHECK
	SET CHECK=$GET(^WWWDATEN(YM,+$HOROLOG,YUSER,"INARTPREISBEPROM1","K","HIDDEN"))
	SET CHECK=$PIECE(CHECK,Y,2)
	SET %(YQUERY,"YAUSWAHL")=VORG(1)_Y_VORG(2)_Y_VORG(3)_Y_$GET(CHECK)
	SET %("VAR","YAUSWAHL")=VORG(1)_Y_VORG(2)_Y_VORG(3)_Y_$GET(CHECK)
	SET %(YQUERY,"YFORM")="INARTPREISBEPROM1"
	SET %("VAR","YKEY")=VORG(1)_","_VORG(2)_","_VORG(3)
	SET %("VAR","YFORM")="INARTPREISBEPROM1"
	SET YBACK="INARTPREISBEPROM,"
	SET YFORM="INARTPREISBEPROM1"
	;AUSLESEN DATEN AUS WWWDATEN ZUM SPEICHERN ;pick out out of Save 
	IF $DATA(^WWWDATEN(YM,+$HOROLOG,YUSER,"INARTPREISBEPROM1","K")) DO
	. QUIT:VORG(1)=""
	. QUIT:VORG(2)=""
	. QUIT:VORG(3)=""
	. SET $PIECE(^INARTPREISBEPROM(YM,VORG(1),VORG(2),1),Y,26)=1     ;=0 NEU RECHNEN ;recent have faith in 
	. NEW ARTIKEL1,ARTIKEL2,YI,OK,YFELD,YKEY,ART,LFN,LFN1
	. SET LFN="" FOR  SET LFN=$ORDER(^WWWDATEN(YM,+$HOROLOG,YUSER,"INARTPREISBEPROM1","K",LFN)) QUIT:LFN=""  DO
	. . QUIT:LFN="HIDDEN"
	. . SET YFELD=""
	. . SET LFN1=$GET(^WWWDATEN(YM,+$HOROLOG,YUSER,"INARTPREISBEPROM1","K",LFN))
	. . QUIT:LFN1=""
	. . QUIT:$PIECE(LFN1,Y,1)=""	//SR13246
	. . 
	. . SET YKEY=VORG(1)_","_VORG(2)_","_$PIECE(LFN1,Y,1)
	. . IF $PIECE(LFN1,Y,2)=1 DO
	. . . IF '$DATA(^INARTPREISBEPROM2(YM,VORG(1),VORG(2),$PIECE(LFN1,Y,1))) SET OK=$$^WWWSPEI("INARTPREISBEPROM2",YKEY,YFELD,1)  ;ANLEGEN WENN NICHT VORHANDEN ;put onto when Not on hand 
	. . . QUIT
	. . IF $PIECE(LFN1,Y,2)="" DO
	. . . IF $DATA(^INARTPREISBEPROM2(YM,VORG(1),VORG(2),$PIECE(LFN1,Y,1)))  DO ^WWWKILL("INARTPREISBEPROM2",VORG(1)_","_VORG(2)_","_$PIECE(LFN1,Y,1))  ;LÃ–SCHEN WENN DESELECTIERT ;Delete when 
	. . . QUIT
	. . QUIT
	. QUIT
	DO ^WWWFORM
	QUIT
]]></Routine>
</Export>