<?xml version="1.0" encoding="UTF-8"?>
<Export generator="Cache" version="22" zv="CACHE" ts="2001-01-01 00:00:00">
<Routine name="INARTDAUERT" type="MAC" languagemode="0" timestamp="58440,0"><![CDATA[
INARTDAUERT(YART,YMENGE)        ;INARTDAUERT;DT;GESAMTDAUER DES ARTIKELTEILS;30.08.2000
	;
	;/------------------------------------------------------------------\
	;| Description of Function :
	;|		GESAMTDAUER DES ARTIKELTEILS
	;|
	;| Inputs : 
	;|
	;|
	;| ByRef :
	;|
	;|
	;| Returns :
	;|
	;|
	;| History :
	;|
	;| DT	30.08.2000
	;|
	;\------------------------------------------------------------------/
	;
	;YART=ARTIKELNUMMER
	;YMENGE=ARTIKELTEILEMENGE
	NEW DAUER,TEIL,ARTIKEL1,ME
	SET DAUER=""
	SET YART=$GET(YART)
	SET YMENGE=+$GET(YMENGE)
	IF YMENGE=0 SET YMENGE=1
	IF YMENGE<0 SET YMENGE=YMENGE*-1  ;FIS;22891;KEINE NEGATIVE DAUER;12.12.03
	IF YART="" QUIT DAUER
	SET DAUER=$PIECE($GET(^INART(YM,YART,1)),Y,45)
	SET ME=$PIECE($GET(^INART(YM,YART,1)),Y,40)   ;MENGENEINHEIT
	IF $DATA(^INARTT(YM,YART)) DO  ;ERRECHNEN DAUER DER TEILE ;permanence the 
	. SET DAUER=0
	. SET TEIL="" FOR  SET TEIL=$ORDER(^INARTT(YM,YART,TEIL)) QUIT:TEIL=""  DO  IF DAUER>100000000 SET DAUER=0 QUIT  ;FEHLER ;shortcoming 
	. . SET ARTIKEL1=$GET(^INARTT(YM,YART,TEIL,1))  ;ARTIKELTEILEINFO
	. . QUIT:YART=$PIECE(ARTIKEL1,Y,1)  ;GLEICHES TEIL;TYBD;28,11,2004;26567
	. . SET ME=$PIECE(ARTIKEL1,Y,5)
	. . IF ME=2!(ME=10)!(ME=11) IF $PIECE(ARTIKEL1,Y,9)'="" SET $PIECE(ARTIKEL1,Y,7)=+$PIECE(ARTIKEL1,Y,9)
	. . ;I ME=2!(ME=10)!(ME=11) IF $PIECE(ARTIKEL1,Y,9)'="" SET $PIECE(ARTIKEL1,Y,7)=$$^INARTRUEST(YART)+$PIECE(ARTIKEL1,Y,9)
	. . ;I ME'=2 I ME'=10 I ME'=11 S $P(ARTIKEL1,Y,7)=0
	. . SET DAUER=DAUER+$PIECE(ARTIKEL1,Y,7)  ;DAUER ;permanence 
	. . SET ^INARTT(YM,YART,TEIL,1)=ARTIKEL1  ;ARTIKELTEILEINFO
	. . QUIT
	. QUIT
	IF +YMENGE'=0 SET DAUER=$JUSTIFY(DAUER*YMENGE,0,0) 
	IF DAUER>100000000 SET DAUER=0  ;FEHLER ;shortcoming 
	;IF +DAUER=0 IF '$DATA(^INARTT(YM,YART)) SET DAUER=$$^INARTRUEST(YART)+($PIECE($GET(^INART(YM,YART,1)),Y,45)*YMENGE)   ;DAUER
	;IF +$$^INARTRUEST(YART)'=0 IF '$DATA(^INARTT(YM,YART)) SET DAUER=$$^INARTRUEST(YART)+DAUER   ;DAUER
	IF +DAUER=0 SET DAUER=""
	QUIT DAUER
]]></Routine>
</Export>